// Automatically generated file.  Do not edit!
var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return{next:aa(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b)a:{var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,h){this.im=f;ca(this,"description",{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.im};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});
fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function ia(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}fa("Array.prototype.keys",function(a){return a?a:function(){return ia(this,function(b){return b})}});fa("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
fa("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});
fa("String.prototype.includes",function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==(this+"").indexOf(b,c||0)}});function ja(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
fa("WeakMap",function(a){function b(l){this.vd=(k+=Math.random()+1).toString();if(l){l=ba(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return"object"===m&&null!==l||"function"===m}function e(l){if(!ja(l,h)){var m=new c;ca(l,h,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(n){if(n instanceof c)return n;Object.isExtensible(n)&&e(n);return m(n)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),
n=new a([[l,2],[m,3]]);if(2!=n.get(l)||3!=n.get(m))return!1;n.delete(l);n.set(m,4);return!n.has(l)&&4==n.get(m)}catch(u){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var k=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!ja(l,h))throw Error("WeakMap key fail: "+l);l[h][this.vd]=m;return this};b.prototype.get=function(l){return d(l)&&ja(l,h)?l[h][this.vd]:void 0};b.prototype.has=function(l){return d(l)&&
ja(l,h)&&ja(l[h],this.vd)};b.prototype.delete=function(l){return d(l)&&ja(l,h)&&ja(l[h],this.vd)?delete l[h][this.vd]:!1};return b});
fa("Map",function(a){function b(){var k={};return k.Ic=k.next=k.head=k}function c(k,l){var m=k[1];return ha(function(){if(m){for(;m.head!=k[1];)m=m.Ic;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(k,l){var m=l&&typeof l;"object"==m||"function"==m?f.has(l)?m=f.get(l):(m=""+ ++h,f.set(l,m)):m="p_"+l;var n=k[0][m];if(n&&ja(k[0],m))for(k=0;k<n.length;k++){var u=n[k];if(l!==l&&u.key!==u.key||l===u.key)return{id:m,list:n,index:k,Za:u}}return{id:m,
list:n,index:-1,Za:void 0}}function e(k){this[0]={};this[1]=b();this.size=0;if(k){k=ba(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var k=Object.seal({x:4}),l=new a(ba([[k,"s"]]));if("s"!=l.get(k)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var m=l.entries(),n=m.next();if(n.done||n.value[0]!=k||"s"!=n.value[1])return!1;n=m.next();return n.done||4!=n.value[0].x||
"t"!=n.value[1]||!m.next().done?!1:!0}catch(u){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(k,l){k=0===k?0:k;var m=d(this,k);m.list||(m.list=this[0][m.id]=[]);m.Za?m.Za.value=l:(m.Za={next:this[1],Ic:this[1].Ic,head:this[1],key:k,value:l},m.list.push(m.Za),this[1].Ic.next=m.Za,this[1].Ic=m.Za,this.size++);return this};e.prototype.delete=function(k){k=d(this,k);return k.Za&&k.list?(k.list.splice(k.index,1),k.list.length||delete this[0][k.id],k.Za.Ic.next=k.Za.next,k.Za.next.Ic=
k.Za.Ic,k.Za.head=null,this.size--,!0):!1};e.prototype.clear=function(){this[0]={};this[1]=this[1].Ic=b();this.size=0};e.prototype.has=function(k){return!!d(this,k).Za};e.prototype.get=function(k){return(k=d(this,k).Za)&&k.value};e.prototype.entries=function(){return c(this,function(k){return[k.key,k.value]})};e.prototype.keys=function(){return c(this,function(k){return k.key})};e.prototype.values=function(){return c(this,function(k){return k.value})};e.prototype.forEach=function(k,l){for(var m=this.entries(),
n;!(n=m.next()).done;)n=n.value,k.call(l,n[1],n[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});
var ka={},la;function ma(a,b,c){if(c<a){var d=c;c=a;a=d}return Math.max(a,Math.min(b,c))};

var na=28,oa=na,qa=[,2,1,4,3];
var ra=Object.create(null);function sa(a){this.bj=a}sa.prototype.toString=function(){return this.bj};var ta=new sa("connectionChecker"),ua=new sa("cursor"),p=new sa("event"),va=new sa("field"),wa=new sa("renderer"),xa=new sa("toolbox"),ya=new sa("theme"),za=new sa("flyoutsVerticalToolbox"),Aa=new sa("metricsManager"),Ba=new sa("blockDragger");
function q(a,b,c){if(!(a instanceof sa)&&"string"!=typeof a||""==String(a).trim())throw Error('Invalid type "'+a+'". The type must be a non-empty string or a Blockly.registry.Type.');a=String(a).toLowerCase();if("string"!=typeof b||""==b.trim())throw Error('Invalid name "'+b+'". The name must be a non-empty string.');b=b.toLowerCase();if(!c)throw Error("Can not register a null value");var d=ra[a];d||(d=ra[a]=Object.create(null));switch(a){case String(va):if("function"!=typeof c.L)throw Error('Type "'+
a+'" must have a fromJson function');}if(d[b])throw Error('Name "'+b+'" with type "'+a+'" already registered.');d[b]=c}function Ca(a,b,c){a=String(a).toLowerCase();b=b.toLowerCase();var d=ra[a];if(!d||!d[b]){b="Unable to find ["+b+"]["+a+"] in the registry.";if(c)throw Error(b+" You must require or register a "+a+" plugin.");console.warn(b);return null}return d[b]}function Da(a,b,c){b=b.plugins[a.toString()]||"default";return"function"==typeof b?b:Ca(a,b,c)};var r=function(){return"object"===typeof self?self:"object"===typeof window?window:"object"===typeof global?global:this}();
var t={};r.Blockly||(r.Blockly={});r.Blockly.Msg||(r.Blockly.Msg=t);function Ea(a){a=String(a).toLowerCase().trim();var b=Fa[a];if(b)return b;b="0x"==a.substring(0,2)?"#"+a.substring(2):a;b="#"==b[0]?b:"#"+b;if(/^#[0-9a-f]{6}$/.test(b))return b;if(/^#[0-9a-f]{3}$/.test(b))return["#",b[1],b[1],b[2],b[2],b[3],b[3]].join("");var c=a.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return c&&(a=Number(c[1]),b=Number(c[2]),c=Number(c[3]),0<=a&&256>a&&0<=b&&256>b&&0<=c&&256>c)?Ga(a,b,c):null}
function Ga(a,b,c){b=a<<16|b<<8|c;return 16>a?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)}function Ha(a){a=Ea(a);if(!a)return[0,0,0];a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]}function Ia(a,b,c){a=Ea(a);if(!a)return null;b=Ea(b);if(!b)return null;a=Ha(a);b=Ha(b);return Ga(Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2])))}
var Fa={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function w(a,b){this.x=a;this.y=b}function Ja(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}function Ka(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function La(a,b){return new w(a.x+b.x,a.y+b.y)}w.prototype.clone=function(){return new w(this.x,this.y)};w.prototype.scale=function(a){this.x*=a;this.y*=a;return this};w.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};function Na(a,b,c,d){this.top=a;this.bottom=b;this.left=c;this.right=d}Na.prototype.contains=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};function Oa(a){return a.length?a.reduce(function(b,c){return b.length<c.length?b:c}).length:0}function Pa(a,b){if(!a.length)return 0;if(1==a.length)return a[0].length;var c=0;b=b||Oa(a);for(var d=0;d<b;d++){for(var e=a[0][d],f=1;f<a.length;f++)if(e!=a[f][d])return c;" "==e&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f][d])&&" "!=e)return c;return b}
function Qa(a,b){if(!a.length)return 0;if(1==a.length)return a[0].length;var c=0;b=b||Oa(a);for(var d=0;d<b;d++){for(var e=a[0].substr(-d-1,1),f=1;f<a.length;f++)if(e!=a[f].substr(-d-1,1))return c;" "==e&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f].charAt(a[f].length-d-1))&&" "!=e)return c;return b}
function Ra(a,b,c){for(var d=[0],e=[],f=0;f<a.length;f++)d[d.length-1]+=a[f].length,!0===b[f]?(d.push(0),e.push(a[f].charAt(a[f].length-1))):!1===b[f]&&d[d.length-1]++;a=Math.max.apply(Math,d);for(f=b=0;f<d.length;f++)b-=2*Math.pow(Math.abs(c-d[f]),1.5),b-=Math.pow(a-d[f],1.5),-1!=".?!".indexOf(e[f])?b+=c/3:-1!=",;)]}".indexOf(e[f])&&(b+=c/4);1<d.length&&d[d.length-1]<=d[d.length-2]&&(b+=.5);return b}
function Sa(a,b,c){for(var d=Ra(a,b,c),e,f=0;f<b.length-1;f++)if(b[f]!=b[f+1]){var h=[].concat(b);h[f]=!h[f];h[f+1]=!h[f+1];var k=Ra(a,h,c);k>d&&(d=k,e=h)}return e?Sa(a,e,c):b};function Ta(a,b){this.width=a;this.height=b};function Ua(a){var b;(b=Va(a,"display"))||(b=a.currentStyle?a.currentStyle.display:null);if("none"!=(b||a.style&&a.style.display))return new Ta(a.offsetWidth,a.offsetHeight);b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";var f=a.offsetWidth;a=a.offsetHeight;b.display=c;b.position=e;b.visibility=d;return new Ta(f,a)}
function Va(a,b){return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function Wa(a){var b=new w(0,0);a=a.getBoundingClientRect();var c=document.documentElement;c=new w(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};var Xa,Ya,Za,$a,ab,bb,cb,db,eb,fb,gb;
(function(a){function b(d){return-1!=c.indexOf(d.toUpperCase())}gb=a;var c=gb.toUpperCase();Xa=b("Trident")||b("MSIE");Ya=b("Edge");b("JavaFX");!b("Chrome")&&b("CriOS");Za=b("WebKit")&&!Ya;$a=b("Gecko")&&!Za&&!Xa&&!Ya;ab=b("Android");a=r.navigator&&r.navigator.maxTouchPoints;bb=b("iPad")||b("Macintosh")&&0<a;cb=b("iPod");db=b("iPhone")&&!bb&&!cb;eb=b("Macintosh");fb=bb||ab&&!b("Mobile")||b("Silk");!fb&&(cb||db||ab||b("IEMobile"))})(r.navigator&&r.navigator.userAgent||"");
function hb(a){a.preventDefault();a.stopPropagation()}function ib(a){return"textarea"==a.target.type||"text"==a.target.type||"number"==a.target.type||"email"==a.target.type||"password"==a.target.type||"search"==a.target.type||"tel"==a.target.type||"url"==a.target.type||a.target.isContentEditable||a.target.dataset&&"true"==a.target.dataset.So}
function jb(a){var b=new w(0,0),c=a.getAttribute("x");c&&(b.x=parseInt(c,10));if(c=a.getAttribute("y"))b.y=parseInt(c,10);if(c=(c=a.getAttribute("transform"))&&c.match(kb))b.x+=Number(c[1]),c[3]&&(b.y+=Number(c[3]));(a=a.getAttribute("style"))&&-1<a.indexOf("translate")&&(a=a.match(lb))&&(b.x+=Number(a[1]),a[3]&&(b.y+=Number(a[3])));return b}var kb=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,lb=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;
function mb(a){return a.ctrlKey&&eb?!0:2==a.button}function nb(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;c||(c=b.getScreenCTM().inverse());return d.matrixTransform(c)}function ob(a){if("string"!=typeof a)return a;a=pb(a,!1);return a.length?String(a[0]):""}
function pb(a,b){var c=[],d=a.split("");d.push("");var e=0;a=[];for(var f=null,h=0;h<d.length;h++){var k=d[h];0==e?"%"==k?((k=a.join(""))&&c.push(k),a.length=0,e=1):a.push(k):1==e?"%"==k?(a.push(k),e=0):b&&"0"<=k&&"9">=k?(e=2,f=k,(k=a.join(""))&&c.push(k),a.length=0):"{"==k?e=3:(a.push("%",k),e=0):2==e?"0"<=k&&"9">=k?f+=k:(c.push(parseInt(f,10)),h--,e=0):3==e&&(""==k?(a.splice(0,0,"%{"),h--,e=0):"}"!=k?a.push(k):(e=a.join(""),/[A-Z]\w*/i.test(e)?(k=e.toUpperCase(),(k=0==k.lastIndexOf("BKY_",0)?k.substring(4):
null)&&k in t?(e=t[k],"string"==typeof e?Array.prototype.push.apply(c,pb(e,b)):b?c.push(String(e)):c.push(e)):c.push("%{"+e+"}")):c.push("%{"+e+"}"),e=a.length=0))}(k=a.join(""))&&c.push(k);b=[];for(h=a.length=0;h<c.length;++h)"string"==typeof c[h]?a.push(c[h]):((k=a.join(""))&&b.push(k),a.length=0,b.push(c[h]));(k=a.join(""))&&b.push(k);a.length=0;return b}function qb(){for(var a=rb.length,b=[],c=0;20>c;c++)b[c]=rb.charAt(Math.random()*a);return b.join("")}var rb="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
function sb(){if(void 0!==tb)return tb;if(!r.getComputedStyle)return!1;var a=document.createElement("p"),b="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)if(void 0!==a.style[d]){a.style[d]="translate3d(1px,1px,1px)";b=r.getComputedStyle(a);if(!b)return document.body.removeChild(a),!1;b=b.getPropertyValue(c[d])}document.body.removeChild(a);return tb=
"none"!==b}var tb;function ub(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0}function vb(a){var b=Object.create(null),c=wb(a,!0);if(a=xb(a))a=c.indexOf(a),c.splice(a,c.length-a);a=0;for(var d;d=c[a];a++)b[d.type]?b[d.type]++:b[d.type]=1;return b}
function yb(a){var b="string"==typeof a?ob(a):a,c=Number(b);if(!isNaN(c)&&0<=c&&360>=c){var d=b=a=0,e=Math.floor(c/60),f=c/60-e,h=165.75*.55,k=165.75*(1-.45*f);f=165.75*(1-.45*(1-f));switch(e){case 1:a=k;b=165.75;d=h;break;case 2:a=h;b=165.75;d=f;break;case 3:a=h;b=k;d=165.75;break;case 4:a=f;b=h;d=165.75;break;case 5:a=165.75;b=h;d=k;break;case 6:case 0:a=165.75,b=f,d=h}a=Ga(Math.floor(a),Math.floor(b),Math.floor(d));return{yn:c,Af:a}}if(c=Ea(b))return{yn:null,Af:c};c='Invalid colour: "'+b+'"';a!=
b&&(c+=' (from "'+a+'")');throw Error(c);};var x="",zb=!0,y=0,Ab=["create","move"],Bb=[];function z(a){0==y&&(Bb.length||setTimeout(Cb,0),Bb.push(a))}function Cb(){for(var a=Db(Bb,!0),b=Bb.length=0,c;c=a[b];b++)if(c.cb){var d=Eb[c.cb]||null;if(d){var e=c;if(e.Qa)for(d.Sd.push(e),d.Tf.length=0;d.Sd.length>d.Xj&&0<=d.Xj;)d.Sd.shift();for(var f=0;c=d.Ec[f];f++)c(e)}}}
function Db(a,b){a=a.slice();b||a.reverse();for(var c=[],d=Object.create(null),e=0,f;f=a[e];e++)if(!f.bh()){var h=[f.$k?"ui":f.type,f.$,f.cb].join(" "),k=d[h],l=k?k.event:null;if(!k)d[h]={event:f,index:e},c.push(f);else if("move"==f.type&&k.index==e-1)l.Hd=f.Hd,l.Gd=f.Gd,l.$c=f.$c,k.index=e;else if("change"==f.type&&f.element==l.element&&f.name==l.name)l.newValue=f.newValue;else if("viewport_change"==f.type)l.Kb=f.Kb,l.Jb=f.Jb,l.scale=f.scale,l.Mf=f.Mf;else if("click"!=f.type||"bubble_open"!=l.type)d[h]=
{event:f,index:e},c.push(f)}a=c.filter(function(m){return!m.bh()});b||a.reverse();for(e=1;f=a[e];e++)"change"==f.type&&"mutation"==f.element&&a.unshift(a.splice(e,1)[0]);return a}function A(a){x="boolean"==typeof a?a?qb():"":a}function Fb(a){var b=[];a=wb(a,!1);for(var c=0,d;d=a[c];c++)b[c]=d.id;return b}function B(a){return Ca(p,a)};function C(a){this.io=a}C.prototype.toString=function(){return this.io};var Gb=new C("animate"),Hb=new C("circle"),Ib=new C("defs"),Jb=new C("feComposite"),Kb=new C("feGaussianBlur"),Lb=new C("fePointLight"),Mb=new C("feSpecularLighting"),Nb=new C("filter"),Ob=new C("g"),Pb=new C("image"),Qb=new C("line"),Rb=new C("path"),Sb=new C("pattern"),Tb=new C("rect"),Ub=new C("svg"),Vb=new C("text"),Wb=new C("tspan");var Xb=null,Zb=0,$b=null;function D(a,b,c){a=document.createElementNS("http://www.w3.org/2000/svg",String(a));for(var d in b)a.setAttribute(d,b[d]);document.body.runtimeStyle&&(a.runtimeStyle=a.currentStyle=a.style);c&&c.appendChild(a);return a}function E(a,b){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}
function ac(a,b){for(var c=(a.getAttribute("class")||"").split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!=b||(c.splice(d,1),d--);c.length?a.setAttribute("class",c.join(" ")):a.removeAttribute("class")}function bc(a,b){return-1!=(" "+(a.getAttribute("class")||"")+" ").indexOf(" "+b+" ")}function F(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function cc(a,b){var c=b.nextSibling;b=b.parentNode;if(!b)throw Error("Reference node has no parent.");c?b.insertBefore(a,c):b.appendChild(a)}
function dc(a,b){a.style.transform=b;a.style["-webkit-transform"]=b}function ec(){Zb++;Xb||(Xb=Object.create(null))}function fc(){Zb--;Zb||(Xb=null)}function gc(a,b,c,d){var e=a.textContent;a=e+"\n"+a.className.baseVal;var f;if(Xb&&(f=Xb[a]))return f;$b||(f=document.createElement("canvas"),f.className="blocklyComputeCanvas",document.body.appendChild(f),$b=f.getContext("2d"));$b.font=c+" "+b+" "+d;f=$b.measureText(e).width;Xb&&(Xb[a]=f);return f};
function G(a){return document.createElementNS("https://developers.google.com/blockly/xml",a)};
function hc(a,b){if(a.Cb()&&(a=ic(a,!1)[0],!a))return new DocumentFragment;var c;a.i.u&&(c=a.i.Tg());b=jc(a,b);var d=a.ea();b.setAttribute("x",Math.round(a.i.u?c-d.x:d.x));b.setAttribute("y",Math.round(d.y));return b}
function jc(a,b){if(a.Cb())return(a=ic(a,!1)[0])?jc(a):new DocumentFragment;var c=G(a.R?"shadow":"block");c.setAttribute("type",a.type);b||c.setAttribute("id",a.id);if(a.Hc){var d=a.Hc();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}d=0;for(var e;e=a.s[d];d++)for(var f=0,h;h=e.Y[f];f++){var k=!1;h.name&&(h.Zj?k=!0:h.Qe&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),
k=!0));k?(k=G("field"),k.setAttribute("name",h.name||""),k.textContent=h.kb,h=k):h=null;h&&c.appendChild(h)}if(d=a.yc.text)e=a.yc.size,f=a.yc.Hl,h=G("comment"),h.appendChild(document.createTextNode(d)),h.setAttribute("pinned",f),h.setAttribute("h",e.height),h.setAttribute("w",e.width),c.appendChild(h);a.data&&(d=G("data"),d.appendChild(document.createTextNode(a.data)),c.appendChild(d));for(d=0;e=a.s[d];d++){var l;f=!0;5!=e.type&&(k=e.connection.I(),1==e.type?l=G("value"):3==e.type&&(l=G("statement")),
h=e.connection.re(),!h||k&&k.R||l.appendChild(kc(h,b)),k&&(h=jc(k,b),h.nodeType==Node.ELEMENT_NODE&&(l.appendChild(h),f=!1)),l.setAttribute("name",e.name),f||c.appendChild(l))}void 0!=a.Cc&&a.Cc!=a.Bn&&c.setAttribute("inline",a.Cc);a.isCollapsed()&&c.setAttribute("collapsed",!0);a.isEnabled()||c.setAttribute("disabled",!0);lc(a)||a.R||c.setAttribute("deletable",!1);a.Oa()||a.R||c.setAttribute("movable",!1);a.Ab()||c.setAttribute("editable",!1);if(d=xb(a))h=jc(d,b),h.nodeType==Node.ELEMENT_NODE&&(l=
G("next"),l.appendChild(h),c.appendChild(l));h=a.F&&a.F.re();!h||d&&d.R||l.appendChild(kc(h,b));return c}function kc(a,b){for(var c=a=a.cloneNode(!0),d;c;)if(b&&"shadow"==c.nodeName&&c.removeAttribute("id"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,d.nodeType==Node.TEXT_NODE&&""==d.data.trim()&&c.firstChild!=d&&F(d);c&&(d=c,c=c.nextSibling,d.nodeType==Node.TEXT_NODE&&""==d.data.trim()&&F(d))}return a}
function mc(a){return(new XMLSerializer).serializeToString(a).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")}function nc(a){var b=(new DOMParser).parseFromString(a,"text/xml");if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+a);return b.documentElement}
function oc(a,b){var c;b.u&&(c=b.Tg());var d=[];ec();var e=x;e||A(!0);b.Hb&&b.Hb(!1);var f=!0;try{for(var h=0,k;k=a.childNodes[h];h++){var l=k.nodeName.toLowerCase(),m=k;if("block"==l||"shadow"==l&&!zb){var n=pc(m,b);d.push(n.id);var u=m.hasAttribute("x")?parseInt(m.getAttribute("x"),10):10,v=m.hasAttribute("y")?parseInt(m.getAttribute("y"),10):10;isNaN(u)||isNaN(v)||n.moveBy(b.u?c-u:u,v);f=!1}else{if("shadow"==l)throw TypeError("Shadow block cannot be a top-level block.");if("variables"==l){if(f)for(var J=
void 0,Ma=b,pa=0;J=m.childNodes[pa];pa++){if(J.nodeType==Node.ELEMENT_NODE){var Yb=J.getAttribute("type"),sd=J.getAttribute("id");Ma.Rc(J.textContent,Yb,sd)}}else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");f=!1}}}}finally{e||A(!1),fc()}b.Hb&&b.Hb(!0);z(new (B("finished_loading"))(b))}
function pc(a,b){if(a instanceof qc){var c=a;a=b;b=c;console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}y++;c=b.tf();try{var d=rc(a,b),e=wb(d,!1);if(b.J){sc(d,!1);for(var f=e.length-1;0<=f;f--)e[f].ve();for(f=e.length-1;0<=f;f--)e[f].V(!1);setTimeout(function(){d.Sc||sc(d,!0)},1);tc(d);uc(b)}else for(f=e.length-1;0<=f;f--);}finally{y--}if(0==y){a=vc(b,c);for(f=0;f<a.length;f++)b=a[f],z(new (B("var_create"))(b));z(new (B("create"))(d))}return d}
function wc(a,b){for(var c=0,d;d=a[c];c++){var e=d.textContent,f="true"==d.getAttribute("pinned"),h=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10);b.He(e);b.yc.Hl=f;isNaN(h)||isNaN(d)||(b.yc.size=new Ta(h,d));f&&b.jn&&!b.Bb&&setTimeout(function(){b.Mb.Ka(!0)},1)}}function xc(a){for(var b={Ze:null,$e:null},c=0,d;d=a.childNodes[c];c++)d.nodeType==Node.ELEMENT_NODE&&("block"==d.nodeName.toLowerCase()?b.Ze=d:"shadow"==d.nodeName.toLowerCase()&&(b.$e=d));return b}
function rc(a,b,c,d){var e=a.getAttribute("type");if(!e)throw TypeError("Block type unspecified: "+a.outerHTML);var f=a.getAttribute("id");f=b.Ce(e,f);for(var h=[],k=[],l=[],m=[],n=[],u=[],v=0,J;J=a.childNodes[v];v++)if(J.nodeType!=Node.TEXT_NODE)switch(J.nodeName.toLowerCase()){case "mutation":h.push(J);break;case "comment":if(!ka.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}k.push(J);break;case "data":l.push(J);break;case "title":case "field":m.push(J);
break;case "value":case "statement":n.push(J);break;case "next":u.push(J);break;default:console.warn("Ignoring unknown tag: "+J.nodeName)}v=!1;J=0;for(var Ma;Ma=h[J];J++)f.Tc&&(f.Tc(Ma),f.ve&&(v=!0));h=v;wc(k,f);for(k=0;v=l[k];k++)f.data=v.textContent;if(c)if(d)if(f.B)c.connect(f.B);else throw TypeError("Next block does not have previous statement.");else if(f.v)c.connect(f.v);else if(f.B)c.connect(f.B);else throw TypeError("Child block does not have output or previous statement.");for(c=0;k=m[c];c++)l=
k.getAttribute("name"),d=f,(v=yc(d,l))?v.zi(k):console.warn("Ignoring non-existent field "+l+" in block "+d.type);for(m=0;d=n[m];m++){l=d.getAttribute("name");c=zc(f,l);if(!c){console.warn("Ignoring non-existent input "+l+" in block "+e);break}d=xc(d);if(d.Ze){if(!c.connection)throw TypeError("Input connection does not exist.");rc(d.Ze,b,c.connection,!1)}d.$e&&c.connection.Zf(d.$e)}for(e=0;n=u[e];e++){n=xc(n);if(n.Ze){if(!f.F)throw TypeError("Next statement does not exist.");if(f.F.isConnected())throw TypeError("Next statement is already connected.");
rc(n.Ze,b,f.F,!0)}n.$e&&f.F&&f.F.Zf(n.$e)}h&&f.ve();(b=a.getAttribute("inline"))&&f.Od("true"==b);(b=a.getAttribute("disabled"))&&f.Nd("true"!=b&&"disabled"!=b);if(b=a.getAttribute("deletable"))f.ci="true"==b;(b=a.getAttribute("movable"))&&f.zj("true"==b);(b=a.getAttribute("editable"))&&f.yj("true"==b);(b=a.getAttribute("collapsed"))&&f.Ld("true"==b);if("shadow"==a.nodeName.toLowerCase()){a=ic(f,!1);for(b=0;u=a[b];b++)if(!u.R)throw TypeError("Shadow block not allowed non-shadow child.");if(Ac(f).length)throw TypeError("Shadow blocks cannot have variable references.");
f.Ej(!0)}return f};var Bc="ontouchstart"in r||!!(r.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!r.navigator||!r.navigator.maxTouchPoints&&!r.navigator.msMaxTouchPoints),Cc=null,Dc={};
r.PointerEvent?Dc={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:Bc&&(Dc={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var Ec=0;
function Fc(a,b){Gc();a.changedTouches&&1!=a.changedTouches.length||(Ec=setTimeout(function(){a.changedTouches&&(a.button=2,a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY);b&&Hc(b,a)},750))}function Gc(){Ec&&(clearTimeout(Ec),Ec=0)}function Ic(a){return void 0!=a.pointerId?a.pointerId:a.changedTouches&&a.changedTouches[0]&&void 0!==a.changedTouches[0].identifier&&null!==a.changedTouches[0].identifier?a.changedTouches[0].identifier:"mouse"}
function Jc(a){var b=Ic(a);return void 0!==Cc&&null!==Cc?Cc==b:"mousedown"==a.type||"touchstart"==a.type||"pointerdown"==a.type?(Cc=b,!0):!1}function Kc(a){return 0==a.type.lastIndexOf("touch",0)||0==a.type.lastIndexOf("mouse",0)||0==a.type.lastIndexOf("pointer",0)}function Lc(a){return 0==a.type.lastIndexOf("touch",0)||0==a.type.lastIndexOf("pointer",0)}
function Mc(a){var b=[];if(a.changedTouches)for(var c=0;c<a.changedTouches.length;c++)b[c]={type:a.type,changedTouches:[a.changedTouches[c]],target:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()}};else b.push(a);return b};function H(a,b,c,d,e,f){function h(v){var J=!e;v=Mc(v);for(var Ma=0,pa;pa=v[Ma];Ma++)if(!J||!Kc(pa)||Jc(pa)){var Yb=pa;if(0==Yb.type.lastIndexOf("touch",0)){var sd=Yb.changedTouches[0];Yb.clientX=sd.clientX;Yb.clientY=sd.clientY}c?d.call(c,pa):d(pa);k=!0}}var k=!1,l=[];if(r.PointerEvent&&b in Dc)for(var m=0,n;n=Dc[b][m];m++)a.addEventListener(n,h,!1),l.push([a,n,h]);else if(a.addEventListener(b,h,!1),l.push([a,b,h]),b in Dc){var u=function(v){h(v);var J=!f;k&&J&&v.preventDefault()};for(m=0;n=Dc[b][m];m++)a.addEventListener(n,
u,!1),l.push([a,n,u])}return l}function Nc(a,b,c){function d(l){c(l)}var e=[];if(r.PointerEvent&&b in Dc)for(var f=0,h;h=Dc[b][f];f++)a.addEventListener(h,d,!1),e.push([a,h,d]);else if(a.addEventListener(b,d,!1),e.push([a,b,d]),b in Dc){var k=function(l){if(l.changedTouches&&1==l.changedTouches.length){var m=l.changedTouches[0];l.clientX=m.clientX;l.clientY=m.clientY}c(l);l.preventDefault()};for(f=0;h=Dc[b][f];f++)a.addEventListener(h,k,!1),e.push([a,h,k])}return e}
function I(a){for(;a.length;){var b=a.pop();b[0].removeEventListener(b[1],b[2],!1)}};
function Oc(){this.rk=Object.create(null);this.Um=Object.create(null)}function Pc(a,b){var c=Qc;c=String(c).toLowerCase();return-1!==a.rk[b].Ao.indexOf(c)}function Rc(a,b){b=String(b).toLowerCase();b=a.Um[b];if(!b)return[];var c=[],d=[],e=a.rk;b.forEach(function(f){d.push(e[f])});d.sort(function(f,h){return f.weight-h.weight});d.forEach(function(f){c.push(f.component)});return c}function Sc(a){this.bj=a}Sc.prototype.toString=function(){return this.bj};
var Tc=new Sc("positionable"),Uc=new Sc("drag_target"),Qc=new Sc("delete_area"),Vc=new Sc("autohideable");
var Wc,Xc,Yc,Zc=null,$c=null,ad=null,bd=null,cd="",dd="";
function ed(){if(!Wc){var a=document.createElement("div");a.className="blocklyDropDownDiv";(fd||document.body).appendChild(a);Wc=a;var b=document.createElement("div");b.className="blocklyDropDownContent";a.appendChild(b);Xc=b;b=document.createElement("div");b.className="blocklyDropDownArrow";a.appendChild(b);Yc=b;Wc.style.opacity=0;Wc.style.transition="transform 0.25s, opacity 0.25s";a.addEventListener("focusin",function(){E(a,"blocklyFocused")});a.addEventListener("focusout",function(){ac(a,"blocklyFocused")})}}
function gd(a,b,c,d){a=hd(a,c.left,c.right,d.width);return{Li:a.pe,Mi:b,wi:a.pe,xi:b+16,ee:a.ee,Rh:-9,Ph:!0,Qh:!0}}function id(a,b,c,d){a=hd(a,c.left,c.right,d.width);return{Li:a.pe,Mi:b-d.height,wi:a.pe,xi:b-d.height-16,ee:a.ee,Rh:d.height-2-8,Ph:!1,Qh:!0}}function hd(a,b,c,d){var e=a;a=ma(b,a-d/2,c-d);b=ma(12,e-8-a,d-12-16);return{ee:b,pe:a}}function jd(){var a=Wc;a.style.transform="translate(0, 0)";a.style.opacity=0;ad=setTimeout(function(){kd()},250);bd&&(bd(),bd=null)}
function kd(){if($c){ad&&clearTimeout(ad);var a=Wc;a.style.transform="";a.style.left="";a.style.top="";a.style.opacity=0;a.style.display="none";a.style.backgroundColor="";a.style.borderColor="";bd&&(bd(),bd=null);Xc.textContent="";Xc.style.width="";$c=null;cd&&(ac(a,cd),cd="");dd&&(ac(a,dd),dd="");ld(md)}};function nd(){this.mc=null;this.cb=void 0;this.group=x;this.Qa=zb}g=nd.prototype;g.$k=!1;g.T=function(){var a={type:this.type};this.group&&(a.group=this.group);return a};g.L=function(a){this.mc=!1;this.group=a.group};g.bh=function(){return!1};g.run=function(){};function od(a){if(a.cb)var b=Eb[a.cb]||null;if(!b)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return b};function K(a,b){a.h=b.prototype;a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function pd(a,b){for(var c in b)a[c]=b[c]}function qd(){var a=rd;return Object.values?Object.values(a):Object.keys(a).map(function(b){return a[b]})};function td(a){td.h.constructor.call(this);this.$=(this.mc="undefined"==typeof a)?"":a.id;this.cb=this.mc?"":a.i.id}K(td,nd);td.prototype.T=function(){var a=td.h.T.call(this);a.blockId=this.$;return a};td.prototype.L=function(a){td.h.L.call(this,a);this.$=a.blockId};function ud(a,b,c,d,e){ud.h.constructor.call(this,a);a&&(this.element="undefined"==typeof b?"":b,this.name="undefined"==typeof c?"":c,this.oldValue="undefined"==typeof d?"":d,this.newValue="undefined"==typeof e?"":e)}K(ud,td);g=ud.prototype;
g.type="change";g.T=function(){var a=ud.h.T.call(this);a.element=this.element;this.name&&(a.name=this.name);a.oldValue=this.oldValue;a.newValue=this.newValue;return a};g.L=function(a){ud.h.L.call(this,a);this.element=a.element;this.name=a.name;this.oldValue=a.oldValue;this.newValue=a.newValue};g.bh=function(){return this.oldValue==this.newValue};
g.run=function(a){var b=od(this).Pb(this.$);if(b)switch(b.Fd&&b.Fd.Ka(!1),a=a?this.newValue:this.oldValue,this.element){case "field":(b=yc(b,this.name))?vd(b,a):console.warn("Can't set non-existent field: "+this.name);break;case "comment":b.He(a||null);break;case "collapsed":b.Ld(!!a);break;case "disabled":b.Nd(!a);break;case "inline":b.Od(!!a);break;case "mutation":var c="";b.Hc&&(c=(c=b.Hc())&&mc(c));if(b.Tc){var d=nc(a||"<mutation/>");b.Tc(d)}z(new ud(b,"mutation",null,c,a));break;default:console.warn("Unknown change type: "+
this.element)}else console.warn("Can't change non-existent block: "+this.$)};function wd(a){wd.h.constructor.call(this,a);a&&(a.R&&(this.Qa=!1),this.xml=a.i.J?hc(a):jc(a),this.wd=Fb(a))}K(wd,td);wd.prototype.type="create";wd.prototype.T=function(){var a=wd.h.T.call(this);a.xml=mc(this.xml);a.ids=this.wd;this.Qa||(a.recordUndo=this.Qa);return a};wd.prototype.L=function(a){wd.h.L.call(this,a);this.xml=nc(a.xml);this.wd=a.ids;void 0!==a.recordUndo&&(this.Qa=a.recordUndo)};
wd.prototype.run=function(a){var b=od(this);if(a)a=G("xml"),a.appendChild(this.xml),oc(a,b);else{a=0;for(var c;c=this.wd[a];a++){var d=b.Pb(c);d?d.m(!1):c==this.$&&console.warn("Can't uncreate non-existent block: "+c)}}};function xd(a){xd.h.constructor.call(this,a);if(a){if(a.getParent())throw Error("Connected blocks cannot be deleted.");a.R&&(this.Qa=!1);this.hj=a.i.J?hc(a):jc(a);this.wd=Fb(a)}}K(xd,td);xd.prototype.type="delete";
xd.prototype.T=function(){var a=xd.h.T.call(this);a.oldXml=mc(this.hj);a.ids=this.wd;this.Qa||(a.recordUndo=this.Qa);return a};xd.prototype.L=function(a){xd.h.L.call(this,a);this.hj=nc(a.oldXml);this.wd=a.ids;void 0!==a.recordUndo&&(this.Qa=a.recordUndo)};xd.prototype.run=function(a){var b=od(this);if(a){a=0;for(var c;c=this.wd[a];a++){var d=b.Pb(c);d?d.m(!1):c==this.$&&console.warn("Can't delete non-existent block: "+c)}}else a=G("xml"),a.appendChild(this.hj),oc(a,b)};
function yd(a){yd.h.constructor.call(this,a);a&&(a.R&&(this.Qa=!1),a=zd(this),this.xl=a.Dl,this.ul=a.Vk,this.ej=a.vk)}K(yd,td);g=yd.prototype;g.type="move";g.T=function(){var a=yd.h.T.call(this);this.Hd&&(a.newParentId=this.Hd);this.Gd&&(a.newInputName=this.Gd);this.$c&&(a.newCoordinate=Math.round(this.$c.x)+","+Math.round(this.$c.y));this.Qa||(a.recordUndo=this.Qa);return a};
g.L=function(a){yd.h.L.call(this,a);this.Hd=a.newParentId;this.Gd=a.newInputName;if(a.newCoordinate){var b=a.newCoordinate.split(",");this.$c=new w(Number(b[0]),Number(b[1]))}void 0!==a.recordUndo&&(this.Qa=a.recordUndo)};function Ad(a){var b=zd(a);a.Hd=b.Dl;a.Gd=b.Vk;a.$c=b.vk}function zd(a){var b=od(a).Pb(a.$);a={};var c=b.getParent();if(c){if(a.Dl=c.id,b=Bd(c,b))a.Vk=b.name}else a.vk=b.ea();return a}g.bh=function(){return this.xl==this.Hd&&this.ul==this.Gd&&Ja(this.ej,this.$c)};
g.run=function(a){var b=od(this),c=b.Pb(this.$);if(c){var d=a?this.Hd:this.xl,e=a?this.Gd:this.ul,f=a?this.$c:this.ej;a=null;if(d&&(a=b.Pb(d),!a)){console.warn("Can't connect to non-existent block: "+d);return}c.getParent()&&Cd(c);if(f)e=c.ea(),c.moveBy(f.x-e.x,f.y-e.y);else{c=c.v||c.B;b=c.type;if(e){if(a=zc(a,e))var h=a.connection}else 4==b&&(h=a.F);h?c.connect(h):console.warn("Can't connect to non-existent input: "+e)}}else console.warn("Can't move non-existent block: "+this.$)};q(p,"create",wd);
q(p,"delete",xd);q(p,"change",ud);q(p,"move",yd);function Dd(a){this.mc="undefined"==typeof a;this.cb=a?a.id:"";this.group=x;this.Qa=!1}K(Dd,nd);Dd.prototype.type="finished_loading";Dd.prototype.T=function(){var a={type:this.type};this.group&&(a.group=this.group);this.cb&&(a.workspaceId=this.cb);return a};Dd.prototype.L=function(a){this.mc=!1;this.cb=a.workspaceId;this.group=a.group};q(p,"finished_loading",Dd);function Ed(a){Ed.h.constructor.call(this);this.mc="undefined"==typeof a;this.cb=a?a:"";this.Qa=!1}K(Ed,nd);Ed.prototype.$k=!0;function Fd(a,b,c,d){Fd.h.constructor.call(this,a?a.i.id:void 0);this.$=a?a.id:null;this.element="undefined"==typeof b?"":b;this.oldValue="undefined"==typeof c?"":c;this.newValue="undefined"==typeof d?"":d}K(Fd,Ed);Fd.prototype.type="ui";
Fd.prototype.T=function(){var a=Fd.h.T.call(this);a.element=this.element;void 0!==this.newValue&&(a.newValue=this.newValue);this.$&&(a.blockId=this.$);return a};Fd.prototype.L=function(a){Fd.h.L.call(this,a);this.element=a.element;this.newValue=a.newValue;this.$=a.blockId};q(p,"ui",Fd);function Gd(a){Gd.h.constructor.call(this);this.kd=(this.mc="undefined"==typeof a)?"":a.gb();this.cb=this.mc?"":a.i.id}K(Gd,nd);Gd.prototype.T=function(){var a=Gd.h.T.call(this);a.varId=this.kd;return a};Gd.prototype.L=function(a){Gd.h.T.call(this);this.kd=a.varId};function Hd(a){Hd.h.constructor.call(this,a);a&&(this.Ud=a.type,this.Td=a.name)}K(Hd,Gd);Hd.prototype.type="var_create";Hd.prototype.T=function(){var a=Hd.h.T.call(this);a.varType=this.Ud;a.varName=this.Td;return a};
Hd.prototype.L=function(a){Hd.h.L.call(this,a);this.Ud=a.varType;this.Td=a.varName};Hd.prototype.run=function(a){var b=od(this);a?b.Rc(this.Td,this.Ud,this.kd):b.oe(this.kd)};function Id(a){Id.h.constructor.call(this,a);a&&(this.Ud=a.type,this.Td=a.name)}K(Id,Gd);Id.prototype.type="var_delete";Id.prototype.T=function(){var a=Id.h.T.call(this);a.varType=this.Ud;a.varName=this.Td;return a};Id.prototype.L=function(a){Id.h.L.call(this,a);this.Ud=a.varType;this.Td=a.varName};
Id.prototype.run=function(a){var b=od(this);a?b.oe(this.kd):b.Rc(this.Td,this.Ud,this.kd)};function Jd(a,b){Jd.h.constructor.call(this,a);a&&(this.fj=a.name,this.cj="undefined"==typeof b?"":b)}K(Jd,Gd);Jd.prototype.type="var_rename";Jd.prototype.T=function(){var a=Jd.h.T.call(this);a.oldName=this.fj;a.newName=this.cj;return a};Jd.prototype.L=function(a){Jd.h.L.call(this,a);this.fj=a.oldName;this.cj=a.newName};Jd.prototype.run=function(a){var b=od(this);a?b.Ee(this.kd,this.cj):b.Ee(this.kd,this.fj)};
q(p,"var_create",Hd);q(p,"var_delete",Id);q(p,"var_rename",Jd);function Kd(a){this.ff=a;this.Ha()}g=Kd.prototype;g.Z=null;g.hc=null;g.ff=null;g.ed=1;g.fg=null;g.pk=new w(0,0);g.Ha=function(){this.Z||(this.Z=D(Ub,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyBlockDragSurface"},this.ff),this.hc=D(Ob,{},this.Z))};
function Ld(a,b){if(a.hc.childNodes.length)throw Error("Already dragging a block.");a.hc.appendChild(b);a.Z.style.display="block";a.fg=new w(0,0)}g.Me=function(a,b){this.fg=new w(a*this.ed,b*this.ed);a=this.fg.x;b=this.fg.y;a=a.toFixed(0);b=b.toFixed(0);this.Z.style.display="block";dc(this.Z,"translate3d("+a+"px, "+b+"px, 0px)")};g.Di=function(){var a=jb(this.Z);return new w(a.x/this.ed,a.y/this.ed)};g.P=function(){return this.Z};
g.Dg=function(a){a?a.appendChild(this.hc.firstChild):this.hc.removeChild(this.hc.firstChild);this.Z.style.display="none";if(this.hc.childNodes.length)throw Error("Drag group was not cleared.");this.fg=null};var Md=!1,Nd=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;",
"left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);",
"color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {",
"max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;",
"border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;",
"}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;",
"}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;",
"}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",
".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {",
"margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;",
"}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",
".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {",
"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {",
"background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"];function Od(a,b){this.se=a;this.Gj=b.spacing;this.dl=b.length;this.Dn=(this.Ti=a.firstChild)&&this.Ti.nextSibling;this.Zn=b.snap}Od.prototype.ed=1;Od.prototype.m=function(){this.se=null};Od.prototype.update=function(a){this.ed=a;var b=this.Gj*a||100;this.se.setAttribute("width",b);this.se.setAttribute("height",b);b=Math.floor(this.Gj/2)+.5;var c=b-this.dl/2,d=b+this.dl/2;b*=a;c*=a;d*=a;Pd(this.Ti,a,c,d,b,b);Pd(this.Dn,a,b,b,c,d)};
function Pd(a,b,c,d,e,f){a&&(a.setAttribute("stroke-width",b),a.setAttribute("x1",c),a.setAttribute("y1",e),a.setAttribute("x2",d),a.setAttribute("y2",f))}Od.prototype.moveTo=function(a,b){this.se.setAttribute("x",a);this.se.setAttribute("y",b);(Xa||Ya)&&this.update(this.ed)};function Qd(){this.name="classic";q(ya,"classic",this)}Qd.prototype.Qb=function(){return this.name+"-theme"};var Rd={};Rd=new Qd;function Sd(a){if(!a)return null;if(a instanceof Element||"string"==typeof a){if(a){if("string"!=typeof a&&(Xa&&a.outerHTML?a=a.outerHTML:a instanceof Element||(a=null)),"string"==typeof a&&(a=nc(a),"xml"!=a.nodeName.toLowerCase()))throw TypeError("Toolbox should be an <xml> document.");}else a=null;var b={contents:Td(a)};a instanceof Node&&Ud(a,b);a=b}b=a.kind;var c=a.contents;if(b&&"flyoutToolbox"!=b&&"categoryToolbox"!=b)throw Error("Invalid toolbox kind "+b+". Please supply either flyoutToolbox or categoryToolbox");
if(!c)throw Error("Toolbox must have a contents attribute.");return a}function Vd(a){if(!a)return!1;var b=a.kind;return b?"categoryToolbox"==b:!!a.contents.filter(function(c){return"CATEGORY"==c.kind.toUpperCase()}).length}function Td(a){var b=[],c=a.childNodes;c||(c=a);a=0;for(var d;d=c[a];a++)if(d.tagName){var e={},f=d.tagName.toUpperCase();e.kind=f;"BLOCK"==f?e.blockxml=d:d.childNodes&&0<d.childNodes.length&&(e.contents=Td(d));Ud(d,e);b.push(e)}return b}
function Ud(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];-1<d.nodeName.indexOf("css-")?(b.cssconfig=b.cssconfig||{},b.cssconfig[d.nodeName.replace("css-","")]=d.value):b[d.nodeName]=d.value}};function Wd(a){var b=!!a.readOnly;if(b)var c=null,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1;else c=Sd(a.toolbox),d=Vd(c),e=a.trashcan,void 0===e&&(e=d),f=a.collapse,void 0===f&&(f=d),h=a.comments,void 0===h&&(h=d),k=a.disable,void 0===k&&(k=d),l=a.sounds,void 0===l&&(l=!0);var m=!!a.rtl;var n="end"!==a.toolboxPosition==m?3:2;var u=a.css;void 0===u&&(u=!0);var v="https://blockly-demo.appspot.com/static/media/";a.media?v=a.media:a.path&&(v=a.path+"media/");var J=void 0===a.oneBasedIndex?!0:!!a.oneBasedIndex,Ma=
a.renderer||"geras",pa=a.plugins||{};this.u=m;this.Rn=J;this.collapse=f;this.Wm=h;this.disable=k;this.readOnly=b;this.Jf=a.maxBlocks||Infinity;this.hh=a.maxInstances;this.Fl=v;this.Mk=d;b=a.move||{};f={};void 0===b.scrollbars&&void 0===a.scrollbars?f.scrollbars=d:"object"==typeof b.scrollbars?(f.scrollbars={},f.scrollbars.Ki=!!b.scrollbars.horizontal,f.scrollbars.vertical=!!b.scrollbars.vertical,f.scrollbars.Ki&&f.scrollbars.vertical?f.scrollbars=!0:f.scrollbars.Ki||f.scrollbars.vertical||(f.scrollbars=
!1)):f.scrollbars=!!b.scrollbars||!!a.scrollbars;f.Oe=f.scrollbars&&void 0!==b.wheel?!!b.wheel:"object"==typeof f.scrollbars;f.fc=f.scrollbars?void 0===b.drag?!0:!!b.drag:!1;this.Ja=f;this.Pk=e;this.wn=l;this.un=u;this.Ad=c;c=a.grid||{};d={};d.spacing=Number(c.spacing)||0;d.Yh=c.colour||"#888";d.length=void 0===c.length?1:Number(c.length);d.Yo=0<d.spacing&&!!c.snap;this.Lk=d;c=a.zoom||{};d={};d.controls=void 0===c.controls?!1:!!c.controls;d.Oe=void 0===c.wheel?!1:!!c.wheel;d.bo=void 0===c.startScale?
1:Number(c.startScale);d.Kf=void 0===c.maxScale?3:Number(c.maxScale);d.Lf=void 0===c.minScale?.3:Number(c.minScale);d.Vn=void 0===c.scaleSpeed?1.2:Number(c.scaleSpeed);d.Gl=void 0===c.pinch?d.Oe||d.controls:!!c.pinch;this.ma=d;this.Rd=n;this.Ol=Ma;this.Pl=a.rendererOverrides;this.Gi=null;this.ib=a.parentWorkspace;this.plugins=pa};
function Xd(a,b,c){this.j=a;b=void 0===b?!0:b;c=void 0===c?!0:c;var d=b&&c;b&&(this.va=new Yd(a,!0,d));c&&(this.Aa=new Yd(a,!1,d));d&&(this.gf=D(Tb,{height:Zd,width:Zd,"class":"blocklyScrollbarBackground"},null),cc(this.gf,a.hd));this.X=null}g=Xd.prototype;g.m=function(){F(this.gf);this.X=this.j=this.gf=null;this.va&&(this.va.m(),this.va=null);this.Aa&&(this.Aa.m(),this.Aa=null)};
g.resize=function(){var a=this.j.jc();if(a){var b=!1,c=!1;this.X&&this.X.Ma==a.Ma&&this.X.Ta==a.Ta&&this.X.eb==a.eb&&this.X.Va==a.Va?(this.X&&this.X.scrollWidth==a.scrollWidth&&this.X.Jb==a.Jb&&this.X.scrollLeft==a.scrollLeft||(b=!0),this.X&&this.X.scrollHeight==a.scrollHeight&&this.X.Kb==a.Kb&&this.X.scrollTop==a.scrollTop||(c=!0)):c=b=!0;if(b||c){try{y++,this.va&&b&&this.va.resize(a),this.Aa&&c&&this.Aa.resize(a)}finally{y--}$d(this.j)}this.va&&this.Aa&&(this.X&&this.X.Ma==a.Ma&&this.X.Va==a.Va||
this.gf.setAttribute("x",this.Aa.position.x),this.X&&this.X.Ta==a.Ta&&this.X.eb==a.eb||this.gf.setAttribute("y",this.va.position.y));this.X=a}};g.set=function(a,b,c){this.va&&this.va.set(a,!1);this.Aa&&this.Aa.set(b,!1);if(c||void 0===c)a={},this.va&&(a.x=ae(this.va)),this.Aa&&(a.y=ae(this.Aa)),this.j.xh(a)};g.Xf=function(a){this.va&&this.va.Xf(a);this.Aa&&this.Aa.Xf(a)};g.isVisible=function(){var a=!1;this.va&&(a=this.va.isVisible());this.Aa&&(a=a||this.Aa.isVisible());return a};
function Yd(a,b,c){this.j=a;this.bd=c||!1;this.ud=b;this.Bd=.5;this.ratio=this.X=null;a="blocklyScrollbar"+(this.ud?"Horizontal":"Vertical");this.oc=D(Ub,{"class":a+" blocklyMainWorkspaceScrollbar"},null);this.H=D(Ob,{},this.oc);this.Lc=D(Tb,{"class":"blocklyScrollbarBackground"},this.H);a=Math.floor((Zd-5)/2);this.sb=D(Tb,{"class":"blocklyScrollbarHandle",rx:a,ry:a},this.H);this.j.jb.subscribe(this.sb,"scrollbarColour","fill");this.j.jb.subscribe(this.sb,"scrollbarOpacity","fill-opacity");cc(this.oc,
L(this.j));this.position=new w(0,0);a=Zd;b?(this.Lc.setAttribute("height",a),this.oc.setAttribute("height",a),this.sb.setAttribute("height",a-5),this.sb.setAttribute("y",2.5),this.fh="width",this.Il="x"):(this.Lc.setAttribute("width",a),this.oc.setAttribute("width",a),this.sb.setAttribute("width",a-5),this.sb.setAttribute("x",2.5),this.fh="height",this.Il="y");this.Al=H(this.Lc,"mousedown",this,this.Mn);this.Bl=H(this.sb,"mousedown",this,this.Nn)}var be,ce;g=Yd.prototype;g.Cl=new w(0,0);g.Sl=0;
g.Gb=0;g.Uc=0;g.yf=0;g.Ef=!0;g.$h=!0;var Zd=15;Bc&&(Zd=25);g=Yd.prototype;g.m=function(){de();I(this.Al);this.Al=null;I(this.Bl);this.Bl=null;F(this.oc);this.Lc=this.H=this.oc=null;this.sb&&(this.j.jb.unsubscribe(this.sb),this.sb=null);this.j=null};function ee(a,b){return b=0>=b||isNaN(b)?0:Math.min(b,a.Gb)}function fe(a,b){a.Uc=b;a.sb.setAttribute(a.fh,a.Uc)}function ge(a,b){return b=0>=b||isNaN(b)?0:Math.min(b,a.Gb-a.Uc)}function he(a,b){a.yf=b;a.sb.setAttribute(a.Il,a.yf)}
function ie(a,b){a.Gb=b;a.oc.setAttribute(a.fh,a.Gb);a.Lc.setAttribute(a.fh,a.Gb)}g.setPosition=function(a,b){this.position.x=a;this.position.y=b;dc(this.oc,"translate("+(this.position.x+this.Cl.x)+"px,"+(this.position.y+this.Cl.y)+"px)")};
g.resize=function(a){if(!a&&(a=this.j.jc(),!a))return;var b;(b=!this.X)||(b=this.X,b=!(a.Ma==b.Ma&&a.Ta==b.Ta&&a.Jb==b.Jb&&a.Kb==b.Kb&&a.eb==b.eb&&a.Va==b.Va&&a.scrollWidth==b.scrollWidth&&a.scrollHeight==b.scrollHeight&&a.scrollLeft==b.scrollLeft&&a.scrollTop==b.scrollTop));b&&(this.ud?(b=a,je(this,b)?ke(this,b):le(this,b)):(b=a,je(this,b)?me(this,b):ne(this,b)),this.X=a,oe(this))};function je(a,b){return a.X?a.X.Ma!==b.Ma||a.X.Ta!==b.Ta||a.X.Va!==b.Va||a.X.eb!==b.eb:!0}
function ke(a,b){var c=b.Ma-2*a.Bd;a.bd&&(c-=Zd);ie(a,Math.max(0,c));c=b.Va+a.Bd;a.bd&&a.j.u&&(c+=Zd);a.setPosition(c,b.eb+b.Ta-Zd-a.Bd);le(a,b)}function le(a,b){if(b.Ma>=b.scrollWidth)fe(a,a.Gb),he(a,0),a.bd||a.Ka(!1);else{a.bd||a.Ka(!0);var c=a.Gb*b.Ma/b.scrollWidth;c=ee(a,c);fe(a,c);c=b.scrollWidth-b.Ma;var d=a.Gb-a.Uc;b=(b.Jb-b.scrollLeft)/c*d;b=ge(a,b);he(a,b);a.ratio=d/c}}
function me(a,b){var c=b.Ta-2*a.Bd;a.bd&&(c-=Zd);ie(a,Math.max(0,c));a.setPosition(a.j.u?b.Va+a.Bd:b.Va+b.Ma-Zd-a.Bd,b.eb+a.Bd);ne(a,b)}function ne(a,b){if(b.Ta>=b.scrollHeight)fe(a,a.Gb),he(a,0),a.bd||a.Ka(!1);else{a.bd||a.Ka(!0);var c=a.Gb*b.Ta/b.scrollHeight;c=ee(a,c);fe(a,c);c=b.scrollHeight-b.Ta;var d=a.Gb-a.Uc;b=(b.Kb-b.scrollTop)/c*d;b=ge(a,b);he(a,b);a.ratio=d/c}}g.isVisible=function(){return this.Ef};g.Xf=function(a){var b=a!=this.$h;this.$h=a;b&&pe(this)};
g.Ka=function(a){var b=a!=this.isVisible();if(this.bd)throw Error("Unable to toggle visibility of paired scrollbars.");this.Ef=a;b&&pe(this)};function pe(a){a.$h&&a.isVisible()?a.oc.setAttribute("display","block"):a.oc.setAttribute("display","none")}
g.Mn=function(a){ld(this.j);Cc=null;de();if(mb(a))a.stopPropagation();else{var b=nb(a,L(this.j),qe(this.j));b=this.ud?b.x:b.y;var c=this.sb;for(var d=0,e=0;c;){var f=jb(c);d+=f.x;e+=f.y;if(-1!=(" "+(c.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;c=c.parentNode}c=new w(d,e);c=this.ud?c.x:c.y;d=this.yf;e=.95*this.Uc;b<=c?d-=e:b>=c+this.Uc&&(d+=e);he(this,ge(this,d));oe(this);a.stopPropagation();a.preventDefault()}};
g.Nn=function(a){ld(this.j);de();mb(a)?a.stopPropagation():(this.$n=this.yf,re(this.j),this.Sl=this.ud?a.clientX:a.clientY,be=H(document,"mouseup",this,this.Pn),ce=H(document,"mousemove",this,this.On),a.stopPropagation(),a.preventDefault())};g.On=function(a){he(this,ge(this,this.$n+((this.ud?a.clientX:a.clientY)-this.Sl)));oe(this)};g.Pn=function(){se(this.j);Cc=null;de()};function de(){M(!0);be&&(I(be),be=null);ce&&(I(ce),ce=null)}function ae(a){a=a.yf/(a.Gb-a.Uc);isNaN(a)&&(a=0);return a}
function oe(a){var b=ae(a),c={};a.ud?c.x=b:c.y=b;a.j.xh(c)}g.set=function(a,b){he(this,ge(this,a*this.ratio));(b||void 0===b)&&oe(this)};var te=!1,ue=!1,ve=0,we=0,xe=0,ye=0,ze=null,Ae=null,N=null;function Be(a){for(;a&&a.Yb;){if("string"==typeof a.Yb||"function"==typeof a.Yb)return a;a=a.Yb}return null}function Ce(a){a.Gn=Nc(a,"mouseover",De);a.Fn=Nc(a,"mouseout",Ee);a.addEventListener("mousemove",Fe,!1)}function Ge(a){a&&(I(a.Gn),I(a.Fn),a.removeEventListener("mousemove",Fe))}function De(a){ue||(a=Be(a.currentTarget),ze!=a&&(He(),Ae=null,ze=a),clearTimeout(ve))}
function Ee(){ue||(ve=setTimeout(function(){Ae=ze=null;He()},1),clearTimeout(we))}function Fe(a){if(ze&&ze.Yb&&!ue)if(te){var b=xe-a.pageX;a=ye-a.pageY;10<Math.sqrt(b*b+a*a)&&He()}else Ae!=ze&&(clearTimeout(we),xe=a.pageX,ye=a.pageY,we=setTimeout(Ie,750))}function He(){te&&(te=!1,N&&(N.style.display="none"));we&&clearTimeout(we)}
function Ie(){if(!ue&&(Ae=ze,N)){N.textContent="";var a;if(a=Be(ze)){for(a=a.Yb;"function"==typeof a;)a=a();if("string"!=typeof a)throw Error("Tooltip function must return a string.");}else a="";a=a.split("\n");for(var b=0;b<a.length;b++){var c=b;var d=a[b],e=50;if(d.length<=e)var f=d;else{for(var h=d.trim().split(/\s+/),k=0;k<h.length;k++)h[k].length>e&&(e=h[k].length);k=-Infinity;var l=1;do{var m=k;f=d;d=[];var n=h.length/l,u=1;for(k=0;k<h.length-1;k++)u<(k+1.5)/n?(u++,d[k]=!0):d[k]=!1;d=Sa(h,d,
e);k=Ra(h,d,e);n=h;u=[];for(var v=0;v<n.length;v++)u.push(n[v]),void 0!==d[v]&&u.push(d[v]?"\n":" ");d=u.join("");l++}while(k>m)}a[c]=f}a=a.join("\n");a=a.split("\n");for(b=0;b<a.length;b++)c=document.createElement("div"),c.appendChild(document.createTextNode(a[b])),N.appendChild(c);a=ze.u;b=document.documentElement.clientWidth;c=document.documentElement.clientHeight;N.style.direction=a?"rtl":"ltr";N.style.display="block";te=!0;f=xe;f=a?f-(0+N.offsetWidth):f+0;m=ye+10;m+N.offsetHeight>c+window.scrollY&&
(m-=N.offsetHeight+20);a?f=Math.max(5-window.scrollX,f):f+N.offsetWidth>b+window.scrollX-10&&(f=b-N.offsetWidth-10);N.style.top=m+"px";N.style.left=f+"px"}};function Je(a,b,c){Array.isArray(c)&&(c=c.join(" "));a.setAttribute("aria-"+b,c)};function Ke(a,b){this.o=a;this.type=b}g=Ke.prototype;g.K=null;g.Sc=!1;g.ie=null;g.zh=null;g.x=0;g.y=0;g.Fg=function(a){var b=this.A(),c=a.A();a.isConnected()&&a.disconnect();if(this.isConnected()){var d=this.re(!0);this.zh=null;var e=this.I();if(e.R)e.m(!1);else{this.disconnect();var f=e}this.zh=d}var h;0==y&&(h=new (B("move"))(c));if(!this||!a)throw Error("Cannot connect null connections.");this.K=a;a.K=this;c.yh(b);h&&(Ad(h),z(h));f&&(a=1===this.type?f.v:f.B,(c=Le(c,a))?a.connect(c):a.ij(this))};
g.m=function(){if(this.isConnected()){this.Zf(null);var a=this.I();a&&Cd(a)}this.Sc=!0};g.A=function(){return this.o};function Me(a){return 1==a.type||3==a.type}g.isConnected=function(){return!!this.K};g.ij=function(){};g.connect=function(a){if(this.K!=a&&0==Ne(this,a,!1)){var b=x;b||A(!0);Me(this)?this.Fg(a):a.Fg(this);b||A(!1)}};function Oe(a,b){var c=null;b=b.v;for(var d=0,e;e=a.s[d];d++)if((e=e.connection)&&0==Ne(b,e,!1)){if(c)return null;c=e}return c}
function Le(a,b){if(2===b.type){a:{b=b.A();for(var c;c=Oe(a,b);)if(a=c.I(),!a||a.R){b=c;break a}b=null}return b}return(a=a.dh(!0))&&0==Ne(b,a,!1)?a:null}g.disconnect=function(){var a=this.K;if(!a)throw Error("Source connection not connected.");if(a.K!=this)throw Error("Target connection not connected to source connection.");if(Me(this)){var b=this.o;var c=a.A();a=this}else b=a.A(),c=this.o;var d=x;d||A(!0);this.ii(b,c);c.R||a.Uf();d||A(!1)};
g.ii=function(a,b){var c;0==y&&(c=new (B("move"))(b));this.K=this.K.K=null;b.yh(null);c&&(Ad(c),z(c))};g.Uf=function(){var a=this.A(),b=this.re();if(a.i&&b)if(a=pc(b,a.i),a.v)this.connect(a.v);else if(a.B)this.connect(a.B);else throw Error("Child block does not have output or previous statement.");};g.I=function(){return this.isConnected()?this.K.A():null};g.zl=function(){!this.isConnected()||this.K&&0==Ne(this,this.K,!1)||Cd(Me(this)?this.I():this.o)};
g.Wf=function(a){a?(Array.isArray(a)||(a=[a]),this.ie=a,this.zl()):this.ie=null};g.Zf=function(a){this.zh=a;a=this.I();a?a.R&&(a.m(!1),this.Uf()):this.Uf()};g.re=function(a){return a&&this.I().R?jc(this.I()):this.zh};g.ol=function(){return[]};g.kc=function(){for(var a=null,b=this.o.s,c=0;c<b.length;c++)if(b[c].connection===this){a=b[c];break}return a};function Ne(a,b,c,d){if(a&&b){if(Me(a)){var e=a.A();var f=b.A()}else f=a.A(),e=b.A();e=e==f?1:b.type!=qa[a.type]?2:e.i!==f.i?5:e.R&&!f.R?6:0}else e=3;if(0!=e)a=e;else{a:if(e=a.ie,f=b.ie,e&&f){for(var h=0;h<e.length;h++)if(-1!=f.indexOf(e[h])){e=!0;break a}e=!1}else e=!0;a=e?c&&!Pe(a,b,d||0)?7:0:4}return a}
function Pe(a,b,c){if(Qe(a,b)>c||b.A().Cb())return!1;switch(b.type){case 4:return a.K||-1!=Re.indexOf(b)?a=!1:b.K?(a=b.I(),a=a.Cb()?!(a.B&&a.B.I()):!1):a=!0,a;case 2:if(b.isConnected()&&!b.I().Cb()||a.isConnected())return!1;break;case 1:if(b.isConnected()&&!b.I().Oa()&&!b.I().R)return!1;break;case 3:if(b.isConnected()&&!a.A().F&&!b.I().R&&b.I().F)return!1;break;default:return!1}return-1!=Re.indexOf(b)?!1:!0}q(ta,"default",function(){});function Se(a){this.pa=Object.create(null);this.i=a}g=Se.prototype;g.clear=function(){this.pa=Object.create(null)};g.Ee=function(a,b){var c=this.xf(a);if(!c)throw Error("Tried to rename a variable that didn't exist. ID: "+a);var d=this.Rg(b,c.type);a=Te(this.i);A(!0);try{if(d&&d.gb()!=c.gb()){var e=c.type;b!=d.name&&Ue(d,b,a);for(b=0;b<a.length;b++){var f,h=a[b];for(d=0;f=h.s[d];d++)for(var k=0;f.Y[k];k++);}z(new (B("var_delete"))(c));this.pa[e].splice(this.Sg(e).indexOf(c),1)}else Ue(c,b,a)}finally{A(!1)}};
function Ue(a,b,c){z(new (B("var_rename"))(a,b));a.name=b;for(a=0;a<c.length;a++)for(var d=c[a],e=0;b=d.s[e];e++)for(var f=0;b.Y[f];f++);}
g.Rc=function(a,b,c){var d=this.Rg(a,b);if(d){if(c&&d.gb()!=c)throw Error('Variable "'+a+'" is already in use and its id is "'+d.gb()+'" which conflicts with the passed in id, "'+c+'".');return d}if(c&&this.xf(c))throw Error('Variable id, "'+c+'", is already in use.');b=b||"";d=new Ve(this.i,a,b,c||qb());a=this.pa[b]||[];a.push(d);delete this.pa[b];this.pa[b]=a;return d};
g.oe=function(a){var b=this.xf(a);if(b){var c=b.name,d=this.Fi(a);a=0;for(var e;e=d[a];a++)if("procedures_defnoreturn"==e.type||"procedures_defreturn"==e.type){a=We(e,"NAME");c=t.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",c).replace("%2",a);Xe(c);return}var f=this;1<d.length?(c=t.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",c),Ye(c,function(h){h&&b&&Ze(f,b,d)})):Ze(f,b,d)}else console.warn("Can't delete non-existent variable: "+a)};
function Ze(a,b,c){var d=x;d||A(!0);try{for(var e=0;e<c.length;e++)c[e].m(!0);var f=a.pa[b.type];a=0;for(var h;h=f[a];a++)if(h.gb()==b.gb()){f.splice(a,1);z(new (B("var_delete"))(b));break}}finally{d||A(!1)}}g.Rg=function(a,b){if(b=this.pa[b||""])for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a.toLowerCase())return d;return null};g.xf=function(a){for(var b=Object.keys(this.pa),c=0;c<b.length;c++)for(var d=b[c],e=0,f;f=this.pa[d][e];e++)if(f.gb()==a)return f;return null};
g.Sg=function(a){return(a=this.pa[a||""])?a.slice():[]};g.tf=function(){var a=[],b;for(b in this.pa)a=a.concat(this.pa[b]);return a};g.Fi=function(a){for(var b=[],c=Te(this.i),d=0;d<c.length;d++){var e=Ac(c[d]);if(e)for(var f=0;f<e.length;f++)e[f].gb()==a&&b.push(c[d])}return b};function qc(a){this.id=qb();Eb[this.id]=this;this.options=a||new Wd({});this.u=!!this.options.u;this.Rd=this.options.Rd;new (Da(ta,this.options,!0))(this);this.jg=[];this.Gh=[];Object.create(null);this.Ec=[];this.Sd=[];this.Tf=[];this.Sh=Object.create(null);this.Nc=Object.create(null);this.pa=new Se(this);this.Nl=null}g=qc.prototype;g.J=!1;g.Pi=!1;g.Xj=1024;g.Hg=null;g.m=function(){this.Ec.length=0;this.clear();delete Eb[this.id]};
g.qc=function(a,b){a=a.ea();b=b.ea();return a.y+qc.prototype.qc.offset*a.x-(b.y+qc.prototype.qc.offset*b.x)};g.yg=function(a){this.jg.push(a)};g.vh=function(a){if(!ub(this.jg,a))throw Error("Block not present in workspace's list of top-most blocks.");};g.$a=function(a){var b=[].concat(this.jg);a&&1<b.length&&(this.qc.offset=Math.sin(3*Math.PI/180),this.u&&(this.qc.offset*=-1),b.sort(this.qc));return b};function $e(a,b){return a.Nc[b]?a.Nc[b].slice(0):[]}
function Te(a){var b=a.$a(!1);for(a=0;a<b.length;a++)b.push.apply(b,ic(b[a],!1));return b.filter(function(c){return!c.Cb()})}g.clear=function(){this.Pi=!0;try{var a=x;for(a||A(!0);this.jg.length;)this.jg[0].m(!1);for(;this.Gh.length;)this.Gh[this.Gh.length-1].m(!1);a||A(!1);this.pa.clear();this.Nl&&this.Nl.clear()}finally{this.Pi=!1}};g.Ee=function(a,b){this.pa.Ee(a,b)};g.Rc=function(a,b,c){return this.pa.Rc(a,b,c)};g.Fi=function(a){return this.pa.Fi(a)};g.oe=function(a){this.pa.oe(a)};
g.Rg=function(a,b){return this.pa.Rg(a,b)};g.xf=function(a){return this.pa.xf(a)};g.Sg=function(a){return this.pa.Sg(a)};g.tf=function(){return this.pa.tf()};g.Tg=function(){return 0};g.Ce=function(a,b){return new af(this,a,b)};function bf(a,b){if(!cf(a))return!0;var c=0,d;for(d in b){if(b[d]>(a.options.hh?(void 0!==a.options.hh[d]?a.options.hh[d]:Infinity)-$e(a,d).length:Infinity))return!1;c+=b[d]}return c>(isNaN(a.options.Jf)?Infinity:a.options.Jf-Te(a).length)?!1:!0}
function cf(a){return Infinity!=a.options.Jf||!!a.options.hh}function df(a,b){var c=b?a.Tf:a.Sd;a=b?a.Sd:a.Tf;var d=c.pop();if(d){for(var e=[d];c.length&&d.group&&d.group==c[c.length-1].group;)e.push(c.pop());for(c=0;d=e[c];c++)a.push(d);e=Db(e,b);zb=!1;try{for(c=0;d=e[c];c++)d.run(b)}finally{zb=!0}}}function ef(){var a=O;a.Sd.length=0;a=a.Tf.length=0;for(var b;b=Bb[a];a++)b.Qa=!1}g.Pb=function(a){return this.Sh[a]||null};var Eb=Object.create(null);
function ff(){var a=[],b;for(b in Eb)a.push(Eb[b]);return a};function gf(a){this.ff=a;this.Ha()}g=gf.prototype;g.Z=null;g.ff=null;g.Ha=function(){this.Z||(this.Z=D(Ub,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyWsDragSurface blocklyOverflowVisible"},null),this.ff.appendChild(this.Z))};g.Me=function(a,b){a=a.toFixed(0);b=b.toFixed(0);this.Z.style.display="block";dc(this.Z,"translate3d("+a+"px, "+b+"px, 0px)")};g.Di=function(){return jb(this.Z)};
g.Dg=function(a){if(!a)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var b=this.Z.childNodes[0],c=this.Z.childNodes[1];if(!(b&&c&&bc(b,"blocklyBlockCanvas")&&bc(c,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");null!=this.rj?cc(b,this.rj):a.insertBefore(b,a.firstChild);cc(c,b);this.Z.style.display="none";if(this.Z.childNodes.length)throw Error("Drag surface was not cleared.");dc(this.Z,"");this.rj=null};function hf(a,b,c){if(!b)throw Error("Cannot create a node without a location.");this.ng=a;this.M=b;this.gm=null;(a=c||null)&&a.fm&&(this.gm=a.fm)}var jf=!1;function kf(a){return a?new hf("field",a):null}function lf(a){if(!a)return null;var b=a.type;return 1==b||3==b&&a.kc()?mf(a.kc()):3==b?new hf("next",a):2==b?new hf("output",a):4==b?new hf("previous",a):null}function mf(a){return a&&a.connection?new hf("input",a.connection):null}function nf(a){return a?new hf("block",a):null}
function of(a){return a?new hf("stack",a):null}g=hf.prototype;g.getType=function(){return this.ng};function pf(a,b){a=a.M;a instanceof af||(a=a.A());if(!a||!a.i)return null;var c=a.Sb();a=c.i.$a(!0);for(var d=0,e;e=a[d];d++)if(c.id==e.id)return b=d+(b?1:-1),-1==b||b==a.length?null:of(a[b]);throw Error("Couldn't find "+(b?"next":"previous")+" stack?!");}function qf(a){if(!a)return null;do var b=a.B&&a.B.I();while(b&&xb(b)==a&&(a=b));return(b=a.B||a.v)&&b.K&&b.K.kc()?mf(b.K.kc()):of(a)}
g.A=function(){return"block"===this.getType()?this.M:"stack"===this.getType()?this.M:"workspace"===this.getType()?null:this.M.A()};
g.next=function(){switch(this.ng){case "stack":return pf(this,!0);case "output":var a=this.M;return nf(a.A());case "field":a:{var b=this.M,c=b.kc();a=b.A();b=c.Y.indexOf(b)+1;c=a.s.indexOf(c);for(var d;d=a.s[c];c++){for(var e=d.Y;b<e.length;){if(rf(e[b])||jf){a=kf(e[b]);break a}b++}b=0;if(d.connection){a=mf(d);break a}}a=null}return a;case "input":a:{b=this.M.kc();a=b.A();for(b=a.s.indexOf(b)+1;c=a.s[b];b++){d=c.Y;e=0;for(var f;f=d[e];e++)if(rf(f)||jf){a=kf(f);break a}if(c.connection){a=mf(c);break a}}a=
null}return a;case "block":return lf(this.M.F);case "previous":return a=this.M,nf(a.A());case "next":return a=this.M,lf(a.K)}return null};g.Wc=function(){switch(this.ng){case "workspace":var a=this.M.$a(!0);if(0<a.length)return of(a[0]);break;case "stack":a=this.M;var b=a.B||a.v;return b?lf(b):nf(a);case "block":a=this.M;a:{a=a.s;b=0;for(var c;c=a[b];b++){for(var d=c.Y,e=0,f;f=d[e];e++)if(rf(f)||jf){a=kf(f);break a}if(c.connection){a=mf(c);break a}}a=null}return a;case "input":return lf(this.M.K)}return null};
g.dd=function(){switch(this.ng){case "stack":return pf(this,!1);case "field":a:{var a=this.M;var b=a.kc();var c=a.A();a=b.Y.indexOf(a)-1;for(var d=c.s.indexOf(b),e;e=c.s[d];d--){if(e.connection&&e!==b){b=mf(e);break a}for(e=e.Y;-1<a;){if(rf(e[a])||jf){b=kf(e[a]);break a}a--}0<=d-1&&(a=c.s[d-1].Y.length-1)}b=null}return b;case "input":a:{b=this.M.kc();c=b.A();for(a=c.s.indexOf(b);d=c.s[a];a--){if(d.connection&&d!==b){b=mf(d);break a}d=d.Y;e=d.length-1;for(var f;f=d[e];e--)if(rf(f)||jf){b=kf(f);break a}}b=
null}return b;case "block":return b=this.M,lf(b.B||b.v);case "previous":b=this.M;if((b=b.K)&&!b.kc())return lf(b);break;case "next":return b=this.M,nf(b.A())}return null};
g.ad=function(){switch(this.ng){case "stack":var a=this.M,b=a.ea();a=a.i;return(b=new w(b.x,b.y+-20),a)?new hf("workspace",a,{fm:b}):null;case "output":return b=this.M,(a=b.K)?lf(a):of(b.A());case "field":return nf(this.M.A());case "input":return b=this.M,nf(b.A());case "block":return a=this.M,qf(a);case "previous":return b=this.M,qf(b.A());case "next":return b=this.M,qf(b.A())}return null};var sf=Object.create(null);var tf=Object.create(null);function uf(){this.jo=this.Yb;this.ag(function(){var a=this.getParent();return a&&vf(a)&&a.Yb||this.jo}.bind(this))}if(tf.parent_tooltip_when_inline)throw Error('Error: Extension "parent_tooltip_when_inline" is already registered.');if("function"!=typeof uf)throw Error('Error: Extension "parent_tooltip_when_inline" must be a function');tf.parent_tooltip_when_inline=uf;var wf=0,xf=null;function yf(a,b,c,d){var e=(new Date-c)/150;1<e?F(a):(a.setAttribute("transform","translate("+(a.mo+(b?-1:1)*a.jk.width*d/2*e)+","+(a.no+a.jk.height*d*e)+") scale("+(1-e)*d+")"),setTimeout(yf,10,a,b,c,d))}function zf(a,b,c){var d=(new Date-b)/150;1<d?F(a):(a.setAttribute("r",25*d*c),a.style.opacity=1-d,wf=setTimeout(zf,10,a,b,c))}
function Af(a,b,c){var d=(new Date-c)/200;1<d?a.cg="":(a.cg="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*b)+")",xf=a,wf=setTimeout(Af,10,a,b,c));a.setAttribute("transform",a.mg+a.cg)}function Bf(){if(xf){clearTimeout(wf);var a=xf;a.cg="";a.setAttribute("transform",a.mg);xf=null}};function Cf(a,b,c){Cf.h.constructor.call(this,a?a.i.id:void 0);this.$=a?a.id:null;this.Zk=b;this.lk=c}K(Cf,Ed);Cf.prototype.type="drag";Cf.prototype.T=function(){var a=Cf.h.T.call(this);a.isStart=this.Zk;a.blockId=this.$;a.blocks=this.lk;return a};Cf.prototype.L=function(a){Cf.h.L.call(this,a);this.Zk=a.isStart;this.$=a.blockId;this.lk=a.blocks};q(p,"drag",Cf);function Df(a){this.jd=P=a;this.j=a.i;this.Yc=this.Ri=null;this.rf=Ef(this,this.jd);this.Pa=this.qa=null;this.$b=!1;this.qf=this.Ji=this.Cd=null;this.Ag=Ff(this)}Df.prototype.m=function(){this.Ag.length=0;y++;try{this.rf&&this.rf.m(),this.Yc&&this.Yc.m()}finally{y--}};
Df.prototype.update=function(a,b){var c=this.qa&&this.Pa?oa:na;for(var d=null,e=null,f=0;f<this.Ag.length;f++){var h=this.Ag[f],k=h.closest(c,a);k.connection&&(d=k.connection,e=h,c=k.sh)}c={closest:d,local:e,sh:c};if((this.$b=this.Fj(c,b))||Gf(this,c,a)){y++;c.closest?(a=this.qa!=c.closest,b=this.Pa!=c.local,this.qa&&this.Pa&&(a||b||this.$b)&&Hf(this)):Hf(this);this.Pa=this.qa=this.Cd=null;if(!this.$b&&(a=c.closest,b=c.local,a))if(a==this.qa||a.A().Cb())console.log("Trying to connect to an insertion marker");
else{this.qa=a;this.Pa=b;a=this.qa;b=this.Pa;c=this.jd;2==b.type||4==b.type?((d=!a.isConnected())||(d=a.I(),d=!!Le(c,2===b.type?d.v:d.B)),b=d?0:2):b=0;switch(b){case 1:this.Ji=this.qa.A();break;case 0:d=this.Pa;b=this.qa;c=this.Ri&&d==this.Ri?this.Yc:this.rf;d=c.Ci(d.A(),d);if(d==this.Cd)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");c.V();c.J=!0;c.P().setAttribute("visibility","visible");d&&b&&(3!=d.type&&1!=d.type||c.moveBy(b.x-d.x,b.y-d.y));b&&d.connect(b);
this.Cd=d;break;case 2:this.qf=this.qa.I(),If(this.qf.ga,"blocklyReplaceable",!0)}a&&(c=a.o.i.oa.D(),b=Jf(c,a),1==a.type||2==a.type?(c=c.ce,b=Q(0,-c)+R("v",c)+b.Eb+R("v",c)):(c=c.Ue-c.ac,b=Q(-c,0)+R("h",c)+b.cd+R("h",c)),c=a.o.ea(),Ke.Tk=D(Rb,{"class":"blocklyHighlightedConnectionPath",d:b,transform:"translate("+(a.x-c.x)+","+(a.y-c.y)+")"+(a.o.u?" scale(-1 1)":"")},a.o.P()))}y--}};
function Ef(a,b){var c=b.type;y++;try{var d=a.j.Ce(c);d.Ql(!0);if(b.Hc){var e=b.Hc();e&&d.Tc(e)}for(a=0;a<b.s.length;a++){var f=b.s[a];if("_TEMP_COLLAPSED_INPUT"!=f.name){var h=d.s[a];if(!h)throw Error("The insertion marker manager tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");for(c=0;c<f.Y.length;c++){var k=f.Y[c],l=h.Y[c];if(!l)throw Error("The insertion marker manager tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");
vd(l,k.kb)}}}d.Ld(b.isCollapsed());d.Od(vf(b));d.ve();d.P().setAttribute("visibility","hidden")}finally{y--}return d}function Ff(a){var b=a.jd.Rb(!1),c=a.jd.dh(!0);if(c&&c!=a.jd.F){b.push(c);a.Ri=c;if(a.Yc){y++;try{a.Yc.m()}finally{y--}}a.Yc=Ef(a,c.A())}return b}
function Gf(a,b,c){var d=b.local,e=b.closest;b=b.sh;if(d&&e){if(a.Pa&&a.qa){if(a.qa==e&&a.Pa==d)return!1;d=a.Pa.x+c.x-a.qa.x;a=a.Pa.y+c.y-a.qa.y;a=Math.sqrt(d*d+a*a);return!(e&&b>a-8)}if(a.Pa||a.qa)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!a.Pa||!a.qa);console.error("Returning true from shouldUpdatePreviews, but it's not clear why.");return!0}Df.prototype.Fj=function(a,b){return b&&Pc(this.j.af,b.id)?b.po(this.jd,a&&!!a.closest):!1};
function Hf(a){a.qa&&a.qa.I()&&(F(Ke.Tk),delete Ke.Tk);if(a.qf)If(a.qf.ga,"blocklyReplaceable",!1),a.qf=null;else if(a.Ji)a.Ji=null;else if(a.Cd)if(a.Cd){var b=a.Cd,c=b.A(),d=c.F,e=c.B,f=c.v;f=1==b.type&&!(f&&f.K);!(b!=d||e&&e.K)||f?Cd(b.I(),!1):3==b.type&&b!=d?(d=b.K,Cd(d.A(),!1),e=e?e.K:null,Cd(c,!0),e&&e.connect(d)):Cd(c,!0);if(b.K)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");a.Cd=null;(a=c.P())&&a.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}
Df.prototype.qe=function(){var a=[];this.rf&&a.push(this.rf);this.Yc&&a.push(this.Yc);return a};function Kf(a,b){this.W=a;this.j=b;this.ic=new Df(this.W);this.ba=null;this.$b=!1;this.rc=this.W.ea();b=[];a=wb(a,!1);for(var c=0,d;d=a[c];c++){d=Lf(d);for(var e=0;e<d.length;e++){var f={location:d[e].No(),icon:d[e]};b.push(f)}}this.Og=b}g=Kf.prototype;g.m=function(){this.Og.length=0;this.ic&&this.ic.m()};
g.Dh=function(a,b){x||A(!0);var c=new (B("drag"))(this.W,!0,wb(this.W,!1));z(c);this.j.ah&&Mf(this.W);ec();this.j.Hb(!1);Bf();if(this.W.getParent()||b&&this.W.F&&this.W.F.I())Cd(this.W,b),a=this.De(a),a=La(this.rc,a),this.W.translate(a.x,a.y),a=this.W,a.i.cc.play("disconnect"),1>a.i.scale||(b=Nf(a).height,b=Math.atan(10/b)/Math.PI*180,a.u||(b*=-1),Af(a.P(),b,new Date)),a=this.ic,a.Ag=Ff(a);this.W.Md(!0);a=this.W;a.pg&&(b=a.ea(),a.P().removeAttribute("transform"),a.i.lb.Me(b.x,b.y),(b=a.P())&&Ld(a.i.lb,
b))};g.fc=function(a,b){b=this.De(b);Of(this.W,La(this.rc,b));for(var c=0;c<this.Og.length;c++){var d=this.Og[c];d.icon.Xo(La(d.location,b))}c=this.ba;this.ba=Pf(this.j,a);this.ic.update(b,this.ba);a=this.$b;this.$b=this.ic.$b;a!=this.$b&&If(this.W.ga,"blocklyDraggingDelete",this.$b);this.ba!==c&&(c&&c.Jn(this.W),this.ba&&this.ba.In(this.W));this.ba&&this.ba.Kn(this.W)};
g.nf=function(a,b){this.fc(a,b);this.Og=[];a=new (B("drag"))(this.W,!1,wb(this.W,!1));z(a);fc();Bf();if(this.ba&&this.ba.Yn(this.W))b=this.rc;else{var c=b=this.De(b);b=La(this.rc,b)}a=this.W;a.pg&&(a.translate(b.x,b.y),a.i.lb.Dg(a.i.Da));this.ba&&this.ba.Ln(this.W);this.$b?(Qf(this),this.W.m(!1,!0),Re=[],b=!0):b=!1;if(!b)if(this.W.Md(!1),c){Rf(this.W,c.x,c.y);Qf(this);if(this.ic.qa){if(c=this.ic,c.qa&&(y++,Hf(c),y--,c.Pa.connect(c.qa),c.jd.J)){a=(Me(c.Pa)?c.qa:c.Pa).A();var d=a.i;b=d.scale;d.cc.play("click");
if(!(1>b)){var e=Sf(d,a.P());a.v?(e.x+=(a.u?3:-3)*b,e.y+=13*b):a.B&&(e.x+=(a.u?-23:23)*b,e.y+=3*b);a=D(Hb,{cx:e.x,cy:e.y,r:0,fill:"none",stroke:"#888","stroke-width":10},L(d));zf(a,new Date,b)}Mf(c.jd.Sb())}}else this.W.V();Tf(this.W)}else Uf(this.W.i,Vf(this.j.Be,!0),this.W);this.j.Hb(!0);A(!1)};function Qf(a){var b=new (B("move"))(a.W);b.ej=a.rc;Ad(b);z(b)}g.De=function(a){a=new w(a.x/this.j.scale,a.y/this.j.scale);this.j.ah&&a.scale(1/this.j.options.ib.scale);return a};
g.qe=function(){return this.ic&&this.ic.qe?this.ic.qe():[]};q(Ba,"default",Kf);function Wf(a,b){this.Ba=a;this.j=b;this.ba=null;this.qg=!1;this.rc=this.Ba.ea();this.pd=sb()&&b.lb?b.lb:null}Wf.prototype.m=function(){this.pd=this.j=this.Ba=null};function Xf(a,b,c){a.De(c);Of(a.Ba,a.pd);c=a.ba;a.ba=Pf(a.j,b);b=a.qg;a.qg=a.Fj(a.ba);b!=a.qg&&If(a.Ba.ga,"blocklyDraggingDelete",a.qg);a.ba!==c&&(c&&c.Jn(a.Ba),a.ba&&a.ba.In(a.Ba));a.ba&&a.ba.Kn(a.Ba)}Wf.prototype.Fj=function(a){return a&&Pc(this.j.af,a.id)?a.po(this.Ba,!1):!1};
function Yf(a,b,c){Xf(a,b,c);a.ba&&a.ba.Yn(a.Ba)?b=a.rc:(b=a.De(c),b=La(a.rc,b));a.Ba.moveTo(b.x,b.y);a.ba&&a.ba.Ln(a.Ba);a.qg?a.Ba.m(!1,!0):(a.pd&&a.pd.Dg(a.j.hd),a.Ba.Md&&a.Ba.Md(!1));a.j.Hb(!0);A(!1)}Wf.prototype.De=function(a){a=new w(a.x/this.j.scale,a.y/this.j.scale);this.j.ah&&a.scale(1/this.j.options.ib.scale);return a};function Zf(a,b,c){Zf.h.constructor.call(this,a?a.i.id:b);this.$=a?a.id:null;this.Tl=c}K(Zf,Ed);Zf.prototype.type="click";Zf.prototype.T=function(){var a=Zf.h.T.call(this);a.targetType=this.Tl;this.$&&(a.blockId=this.$);return a};Zf.prototype.L=function(a){Zf.h.L.call(this,a);this.Tl=a.targetType;this.$=a.blockId};q(p,"click",Zf);function $f(a){this.j=a;this.Uk=ag(this.j);this.dm=bg(this.j);this.co=new w(a.scrollX,a.scrollY)}$f.prototype.m=function(){this.j=null};$f.prototype.Dh=function(){P&&cg(P);re(this.j)};$f.prototype.nf=function(a){this.fc(a);se(this.j)};$f.prototype.fc=function(a){a=La(this.co,a);if(this.Uk&&this.dm)this.j.scroll(a.x,a.y);else if(this.Uk)this.j.scroll(a.x,this.j.scrollY);else if(this.dm)this.j.scroll(this.j.scrollX,a.y);else throw new TypeError("Invalid state.");};function dg(a,b){this.ll=null;this.Xa=new w(0,0);this.ta=this.La=this.Je=this.Ke=this.Xb=null;this.bi=b;this.Cf=this.xd=this.Df=this.rd=!1;this.Wb=a;this.O=this.Wd=this.dc=this.Oc=this.nh=this.mh=null;this.Qk=this.Zg=this.zf=this.nk=!1}g=dg.prototype;g.m=function(){Cc=null;ue=!1;this.bi.Na=null;this.mh&&I(this.mh);this.nh&&I(this.nh);this.dc&&this.dc.m();this.Wd&&this.Wd.m();this.Oc&&this.Oc.m()};
function eg(a,b){var c=new w(b.clientX,b.clientY);var d=a.ll;a.Xa=new w(c.x-d.x,c.y-d.y);a.rd?c=!1:(c=a.Xa,a.rd=Math.sqrt(c.x*c.x+c.y*c.y)>(a.O?10:5),c=a.rd);if(c){if(a.nk)throw Error("updateIsDragging_ should only be called once per gesture.");a.nk=!0;a.Xb?(a.Cf=!0,a.Oc=new Wf(a.Xb,a.ta),c=a.Oc,x||A(!0),c.j.Hb(!1),c.Ba.Wo(!1),c.pd&&(c.Ba.moveTo(0,0),c.pd.Me(c.rc.x,c.rc.y),Ld(c.pd,c.Ba.P())),c.Ba.Md&&c.Ba.Md(!0),Xf(a.Oc,a.Wb,a.Xa),c=!0):c=!1;if(!c){a.La?(a.O?(a.La&&a.O.Po(a.La)?!a.O.Cn()||a.O.Qo(a.Xa)?
(a.ta=a.O.Kj,fg(a.ta),x||A(!0),a.Je=null,a.La=a.O.Zm(a.La),a.La.select(),c=!0):c=!1:c=!1,a.xd=c):a.La.Oa()&&(a.xd=!0),a.xd?(a.dc=new (Da(Ba,a.bi.options,!0))(a.La,a.ta),a.dc.Dh(a.Xa,a.Qk),a.dc.fc(a.Wb,a.Xa),c=!0):c=!1):c=!1;if(c=!c)if(a.O)c=a.O.Cn();else if(c=a.ta)c=a.ta,c=c.options.Ja&&c.options.Ja.fc;c&&(a.Wd=new $f(a.ta),a.Df=!0,a.Wd.Dh())}Gc()}a.Wb=b}
g.ji=function(a){ib(a)?this.cancel():(this.zf=!0,Bf(),fg(this.ta),this.ta.ah&&this.ta.resize(),M(!!this.O),ld(this.ta),this.Wb=a,He(),ue=!0,this.La&&this.La.select(),mb(a)?Hc(this,a):("touchstart"!=a.type.toLowerCase()&&"pointerdown"!=a.type.toLowerCase()||"mouse"==a.pointerType||Fc(a,this),this.ll=new w(a.clientX,a.clientY),this.Qk=a.altKey||a.ctrlKey||a.metaKey,this.kk(a)))};
g.kk=function(a){this.mh=H(document,"mousemove",null,this.te.bind(this));this.nh=H(document,"mouseup",null,this.Ug.bind(this));a.preventDefault();a.stopPropagation()};g.te=function(a){eg(this,a);this.Df?this.Wd.fc(this.Xa):this.xd?this.dc.fc(this.Wb,this.Xa):this.Cf&&Xf(this.Oc,this.Wb,this.Xa);a.preventDefault();a.stopPropagation()};
g.Ug=function(a){eg(this,a);Gc();if(this.Zg)console.log("Trying to end a gesture recursively.");else{this.Zg=!0;if(this.Cf)Yf(this.Oc,a,this.Xa);else if(this.xd)this.dc.nf(a,this.Xa);else if(this.Df)this.Wd.nf(this.Xa);else if(this.Xb&&!this.rd)this.Xb.Xn&&this.Xb.Xn(),this.Xb.select&&this.Xb.select();else if(gg(this)){var b=this.Ke,c=this.Wb;rf(b)&&b.Ch(c);hg(this)}else!this.Je||this.rd||gg(this)?this.Je||this.Xb||this.Ke||this.rd||(b=this.bi,P&&cg(P),b=this.ta||b,z(new (B("click"))(null,b.id,"workspace"))):
(this.O&&this.O.ik?this.La.isEnabled()&&(x||A(!0),Tf(this.O.Zm(this.La))):(b=new (B("click"))(this.Je,this.ta.id,"block"),z(b)),hg(this),A(!1));a.preventDefault();a.stopPropagation();this.m()}};g.cancel=function(){this.Zg||(Gc(),this.Cf?Yf(this.Oc,this.Wb,this.Xa):this.xd?this.dc.nf(this.Wb,this.Xa):this.Df&&this.Wd.nf(this.Xa),this.m())};function Hc(a,b){a.La?(hg(a),M(!!a.O),a.La.Ah(b)):a.Xb?a.Xb.Ah(b):a.ta&&!a.O&&(M(),a.ta.Ah(b));b.preventDefault();b.stopPropagation();a.m()}
function hg(a){a.La&&!a.O&&Mf(a.La)}function ig(a,b){b.R?ig(a,b.getParent()):a.La=b}function gg(a){return(a.Ke?rf(a.Ke):!1)&&!a.rd&&(!a.O||!a.O.ik)}g.zb=function(){return this.Df||this.xd||this.Cf};g.qe=function(){return this.dc?this.dc.qe():[]};function jg(){for(var a=ff(),b=0,c;c=a[b];b++)if(c.Na)return!0;return!1};function kg(){this.xb=this.Nb=this.Yh=null;this.type="marker"}function lg(a,b){var c=a.Nb;a.Nb=b;a.xb&&a.xb.Ob(c,a.Nb)}kg.prototype.Ob=function(){this.xb&&this.xb.Ob(this.Nb,this.Nb)};kg.prototype.Bc=function(){this.xb&&this.xb.Bc()};kg.prototype.m=function(){this.xb&&this.xb.m()};function mg(){mg.h.constructor.call(this);this.type="cursor"}K(mg,kg);mg.prototype.next=function(){var a=this.Nb;if(!a)return null;for(a=a.next();a&&a.next()&&("next"==a.getType()||"block"==a.getType());)a=a.next();a&&lg(this,a);return a};mg.prototype.Wc=function(){var a=this.Nb;if(!a)return null;if("previous"==a.getType()||"output"==a.getType())a=a.next();(a=a.Wc())&&lg(this,a);return a};
mg.prototype.dd=function(){var a=this.Nb;if(!a)return null;for(a=a.dd();a&&a.dd()&&("next"==a.getType()||"block"==a.getType());)a=a.dd();a&&lg(this,a);return a};mg.prototype.ad=function(){var a=this.Nb;if(!a)return null;(a=a.ad())&&"block"==a.getType()&&(a=a.dd()||a);a&&lg(this,a);return a};q(ua,"default",mg);function ng(a){this.zc=this.wb=null;this.If=Object.create(null);this.j=a}g=ng.prototype;g.uf=function(){return this.wb};g.wf=function(a){return this.If[a]||null};g.Jc=function(a){a?(this.j.Da.appendChild(a),this.zc=a):this.zc=null};g.fd=function(a){a?this.j.Da&&(this.zc?this.j.Da.insertBefore(a,this.zc):this.j.Da.appendChild(a)):this.Gc=null};
g.m=function(){for(var a=Object.keys(this.If),b=0,c;c=a[b];b++){var d=this.If[c];if(d)d.m(),delete this.If[c];else throw Error("Marker with ID "+c+" does not exist. Can only unregister markers that exist.");}this.If=null;this.wb&&(this.wb.m(),this.wb=null)};var og,pg=null,qg=null,rg="",sg="";function tg(a){var b=S,c=S.m;ug();pg=b;qg=c;b=og;b.style.direction=a?"rtl":"ltr";b.style.display="block";a=md;rg=a.oa.Qb();sg=a.Ac().Qb();E(b,rg);E(b,sg)}function ug(){if(pg){pg=null;var a=og;a.style.display="none";a.style.left="";a.style.top="";qg&&qg();qg=null;a.textContent="";rg&&(ac(a,rg),rg="");sg&&(ac(a,sg),sg="");ld(md)}}function vg(a,b,c){og.style.left=a+"px";og.style.top=b+"px";og.style.height=c+"px"};function wg(a,b,c){this.kb=this.Jh;this.Wl=this.cm=null;this.Ra=new Ta(0,0);this.g=this.aj=this.Qd=this.Sa=this.ua=this.fb=this.Gc=this.zc=null;c&&this.bf(c);vd(this,a);b&&(this.cm=b)}g=wg.prototype;g.Jh=null;g.name=void 0;g.Sc=!1;g.kl=50;g.o=null;g.Xc=!0;g.ld=!0;g.qk=null;g.Qe=!0;g.Zj=!1;g.bf=function(a){var b=a.tooltip;"string"==typeof b&&(b=ob(a.tooltip));b&&this.ag(b)};g.D=function(){!this.g&&this.o&&this.o.i&&this.o.i.J&&(this.g=this.o.i.oa.D());return this.g};g.A=function(){return this.o};
g.na=function(){this.fb||(this.fb=D(Ob,{},null),this.isVisible()||(this.fb.style.display="none"),this.o.P().appendChild(this.fb),this.Wg(),xg(this),this.ag(this.Wl),Ce(yg(this)),this.aj=H(yg(this),"mousedown",this,this.Nf))};g.Wg=function(){zg(this);Ag(this)};function zg(a){a.ua=D(Tb,{rx:a.D().ug,ry:a.D().ug,x:0,y:0,height:a.Ra.height,width:a.Ra.width,"class":"blocklyFieldRect"},a.fb)}
function Ag(a){a.Sa=D(Vb,{"class":"blocklyText"},a.fb);a.D().Kh&&a.Sa.setAttribute("dominant-baseline","central");a.Qd=document.createTextNode("");a.Sa.appendChild(a.Qd)}g.zi=function(a){vd(this,a.textContent)};g.m=function(){$c===this&&jd();pg==this&&ug();Ge(yg(this));this.aj&&I(this.aj);F(this.fb);this.Sc=!0};
function xg(a){var b=a.fb;a.Qe&&b&&(a.o.Ab()?(E(b,"blocklyEditableText"),ac(b,"blocklyNonEditableText"),b.style.cursor=a.mm):(E(b,"blocklyNonEditableText"),ac(b,"blocklyEditableText"),b.style.cursor=""))}function rf(a){return!!a.o&&a.o.Ab()&&!!a.Ch&&"function"===typeof a.Ch}g.isVisible=function(){return this.ld};g.Ka=function(a){if(this.ld!=a){this.ld=a;var b=this.P();b&&(b.style.display=a?"block":"none")}};g.P=function(){return this.fb};g.Ga=function(){};
g.vj=function(){this.Qd&&(this.Qd.nodeValue=Bg(this));this.$l()};g.$l=function(){var a=this.D(),b=this.ua?this.D().Re:0,c=2*b,d=a.vg,e=0;this.Sa&&(e=gc(this.Sa,a.Te+"pt",a.Yd,a.Xd),c+=e);this.ua&&(d=Math.max(d,a.Rj));this.Ra.height=d;this.Ra.width=c;Cg(this,b,e);Dg(this)};function Cg(a,b,c){if(a.Sa){var d=a.D(),e=a.Ra.height/2;a.Sa.setAttribute("x",a.o.u?a.Ra.width-c-b:b);a.Sa.setAttribute("y",d.Kh?e:e-d.vg/2+d.Uj)}}
function Dg(a){a.ua&&(a.ua.setAttribute("width",a.Ra.width),a.ua.setAttribute("height",a.Ra.height),a.ua.setAttribute("rx",a.D().ug),a.ua.setAttribute("ry",a.D().ug))}g.getSize=function(){if(!this.isVisible())return new Ta(0,0);this.Xc?(this.vj(),this.Xc=!1):this.ld&&0==this.Ra.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.vj());return this.Ra};
function Bg(a){var b=Eg(a);if(!b)return"\u00a0";b.length>a.kl&&(b=b.substring(0,a.kl-2)+"\u2026");b=b.replace(/\s/g,"\u00a0");a.o&&a.o.u&&(b+="\u200f");return b}function Eg(a){if(a.Ei){var b=a.Ei.call(a);if(null!==b)return String(b)}return String(a.kb)}g.Hf=function(){this.Xc=!0;this.g=null};function Fg(a){a.Xc=!0;a.o&&a.o.J&&(a.o.V(),a.o.mb(),a.Nj())}
function vd(a,b){if(null!==b){var c=a.Ng(b);b=Gg(a,b,c);if(!(b instanceof Error)){if(c=a.cm)if(c=c.call(a,b),b=Gg(a,b,c),b instanceof Error)return;c=a.o;if(!c||!c.Sc){var d=a.kb;d===b?a.lf(b):(c&&0==y&&z(new (B("change"))(c,"field",a.name||null,d,b)),a.lf(b),a.Xc&&Fg(a))}}}}function Gg(a,b,c){if(null===c)return a.Xc&&Fg(a),Error();void 0!==c&&(b=c);return b}g.Ng=function(a){return null===a||void 0===a?null:a};g.lf=function(a){this.kb=a;this.Xc=!0};
g.Nf=function(a){if(this.o&&this.o.i&&(a=Hg(this.o.i,a))){if(a.zf)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");a.Ke||(a.Ke=this)}};g.ag=function(a){a||""===a||(a=this.o);var b=yg(this);b?b.Yb=a:this.Wl=a};function yg(a){return a.qk||a.P()}g.kc=function(){for(var a=null,b=this.o,c=b.s,d=0;d<b.s.length;d++)for(var e=c[d],f=e.Y,h=0;h<f.length;h++)if(f[h]===this){a=e;break}return a};g.Jk=function(){return!1};
g.Jc=function(a){a?(this.fb.appendChild(a),this.zc=a):this.zc=null};g.fd=function(a){a?(this.fb.appendChild(a),this.Gc=a):this.Gc=null};g.Nj=function(){var a=this.o.i;a.Ff&&this.zc&&a.uf().Ob();a.Ff&&this.Gc&&a.wf("local_marker_1").Ob()};function Ig(a,b,c){this.Cg=null;Ig.h.constructor.call(this,a,null,c);c||(this.Cg=b||null)}K(Ig,wg);Ig.prototype.Jh="";Ig.L=function(a){var b=ob(a.text);return new Ig(b,void 0,a)};Ig.prototype.Qe=!1;Ig.prototype.bf=function(a){Ig.h.bf.call(this,a);this.Cg=a["class"]};Ig.prototype.Wg=function(){Ag(this);this.Cg&&E(this.Sa,this.Cg)};Ig.prototype.Ng=function(a){return null===a||void 0===a?null:String(a)};q(va,"field_label",Ig);function Jg(a,b,c,d){if(5!=a&&!b)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=a;this.name=b;this.o=c;this.connection=d;this.Y=[]}g=Jg.prototype;g.align=-1;g.ld=!0;g.A=function(){return this.o};function Kg(a,b,c){Lg(a,a.Y.length,b,c);return a}
function Lg(a,b,c,d){if(0>b||b>a.Y.length)throw Error("index "+b+" out of bounds.");if(!(c||""==c&&d))return b;if("string"==typeof c){c={type:"field_label",text:c};var e=Ca(va,c.type);e?c=e.L(c):(console.warn("Blockly could not create a field of type "+c.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),c=null)}if(c.o)throw Error("Field already bound to a block.");
c.o=a.o;a.o.J&&(c.na(),c.Ga());c.name=d;c.Ka(a.isVisible());c.qj&&(b=Lg(a,b,c.qj));a.Y.splice(b,0,c);++b;c.Jj&&(b=Lg(a,b,c.Jj));a.o.J&&(a.o=a.o,a.o.V(),a.o.mb());return b}g.isVisible=function(){return this.ld};
g.Ka=function(a){if(this.ld!=a){this.ld=a;for(var b=0,c;c=this.Y[b];b++)c.Ka(a);if(this.connection){this.connection=this.connection;if(a)Mg(this.connection);else if(b=this.connection,Ng(b,!1),b.K)for(b=wb(b.I(),!1),c=0;c<b.length;c++){for(var d=b[c],e=d.Rb(!0),f=0;f<e.length;f++)Ng(e[f],!1);d=Lf(d);for(f=0;f<d.length;f++)d[f].Ka(!1)}if(b=this.connection.I())b.P().style.display=a?"block":"none"}}};g.Hf=function(){for(var a=0,b;b=this.Y[a];a++)b.Hf()};
g.Wf=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.Wf(a)};function Og(a){a.align=1;a.o.J&&(a.o=a.o,a.o.V());return a}g.Zf=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.Zf(a)};g.re=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.re()};g.na=function(){if(this.o.i.J)for(var a=0;a<this.Y.length;a++)this.Y[a].na()};
g.m=function(){for(var a=0,b;b=this.Y[a];a++)b.m();this.connection&&this.connection.m();this.o=null};function af(a,b,c){if(ka.Generator&&"undefined"!=typeof ka.Generator.prototype[b])throw Error('Block prototypeName "'+b+'" conflicts with Blockly.Generator members.');this.id=c&&!a.Pb(c)?c:qb();a.Sh[this.id]=this;this.B=this.F=this.v=null;this.s=[];this.Cc=void 0;this.disabled=!1;this.Yb="";this.contextMenu=!0;this.pc=null;this.wc=[];this.Dk=this.ml=this.ci=!0;this.nd=this.R=!1;this.yc={text:null,Hl:!1,size:new Ta(160,80)};this.hm=new w(0,0);this.i=a;this.Bb=a.zd;this.u=a.u;this.ye=!1;this.sd=void 0;
this.J=null;if(b){this.type=b;c=sf[b];if(!c||"object"!=typeof c)throw TypeError("Unknown block type: "+b);pd(this,c)}a.yg(this);a.Nc[this.type]||(a.Nc[this.type]=[]);a.Nc[this.type].push(this);(a=x)||A(!0);b=zb;try{"function"==typeof this.na&&(zb=!1,this.na(),zb=b),0==y&&z(new (B("create"))(this))}finally{a||A(!1),zb=b}this.Bn=this.Cc;if("function"==typeof this.onchange){if((a=this.onchange)&&"function"!=typeof a)throw Error("onchange must be a function.");this.Of&&ub(this.i.Ec,this.Of);if(this.onchange=
a)this.Of=a.bind(this),this.i.Ec.push(this.Of)}}g=af.prototype;g.data=null;g.Sc=!1;g.vb="#000000";g.dg="";
g.m=function(a){if(this.i){this.Of&&ub(this.i.Ec,this.Of);Cd(this,a);0==y&&z(new (B("delete"))(this));y++;try{if(this.i){this.i.vh(this);var b=this.i;b.Nc[this.type].splice(b.Nc[this.type].indexOf(this),1);b.Nc[this.type].length||delete b.Nc[this.type];delete this.i.Sh[this.id];this.i=null}P==this&&(P=null);for(var c=this.wc.length-1;0<=c;c--)this.wc[c].m(!1);c=0;for(var d;d=this.s[c];c++)d.m();this.s.length=0;var e=this.Rb(!0);c=0;for(var f;f=e[c];c++)f.m()}finally{y--,this.Sc=!0}}};
function Cd(a,b){if(a.v){var c=null;a.v.isConnected()&&(c=a.v.K,a.v.disconnect());if(c&&b){a:{b=null;for(var d=0;d<a.s.length;d++){var e=a.s[d].connection;if(e&&1==e.type&&e.K){if(b){a=null;break a}b=e}}a=b}a&&a.isConnected()&&!a.I().R&&(a=a.K,a.disconnect(),0==Ne(a,c,!1)?c.connect(a):a.ij(c))}}else a.B&&(c=null,a.B.isConnected()&&(c=a.B.K,a.B.disconnect()),d=xb(a),b&&d&&!d.R&&(a=a.F.K,a.disconnect(),c&&0==Ne(c,a,!1)&&c.connect(a)))}
g.Rb=function(){var a=[];this.v&&a.push(this.v);this.B&&a.push(this.B);this.F&&a.push(this.F);for(var b=0,c;c=this.s[b];b++)c.connection&&a.push(c.connection);return a};g.dh=function(a){for(var b=this.F;b;){var c=b.I();if(!c||a&&c.R)return b;b=c.F}return null};g.mb=function(){};g.getParent=function(){return this.pc};function Bd(a,b){for(var c=0,d;d=a.s[c];c++)if(d.connection&&d.connection.I()==b)return d;return null}
function Pg(a){do{var b=a;a=a.getParent();if(!a)return null}while(xb(a)==b);return a}function xb(a){return a.F&&a.F.I()}g.Sb=function(){var a=this;do{var b=a;a=b.pc}while(a);return b};function ic(a,b){if(!b)return a.wc;b=[];for(var c=0,d;d=a.s[c];c++)d.connection&&(d=d.connection.I())&&b.push(d);(a=xb(a))&&b.push(a);return b}
g.yh=function(a){if(a!=this.pc){if(this.pc){ub(this.pc.wc,this);if(this.B&&this.B.isConnected())throw Error("Still connected to previous block.");if(this.v&&this.v.isConnected())throw Error("Still connected to parent block.");this.pc=null}else this.i.vh(this);(this.pc=a)?a.wc.push(this):this.i.yg(this)}};function wb(a,b){var c=[a];a=ic(a,b);for(var d,e=0;d=a[e];e++)c.push.apply(c,wb(d,b));return c}function lc(a){return a.ci&&!a.R&&!(a.i&&a.i.options.readOnly)}
g.Oa=function(){return this.ml&&!this.R&&!(this.i&&this.i.options.readOnly)};g.zj=function(a){this.ml=a};g.Ej=function(a){this.R=a};g.Cb=function(){return this.ye};g.Ql=function(a){this.ye=a};g.Ab=function(){return this.Dk&&!(this.i&&this.i.options.readOnly)};g.yj=function(a){this.Dk=a;a=0;for(var b;b=this.s[a];a++)for(var c=0,d;d=b.Y[c];c++)xg(d)};
g.Ci=function(a,b){var c=this.Rb(!0);a=a.Rb(!0);if(c.length!=a.length)throw Error("Connection lists did not match in length.");for(var d=0;d<a.length;d++)if(a[d]==b)return c[d];return null};g.ag=function(a){this.Yb=a};g.Bi=function(){return this.vb};g.Ge=function(a){this.vb=yb(a).Af};g.Ie=function(a){this.dg=a};
function yc(a,b){if("string"!==typeof b)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===b?"nothing":b+" of type "+typeof b)+" instead");for(var c=0,d;d=a.s[c];c++)for(var e=0,f;f=d.Y[e];e++)if(f.name===b)return f;return null}function Ac(a){for(var b=0,c;c=a.s[b];b++)for(var d=0;c.Y[d];d++);return[]}function We(a,b){return(a=yc(a,b))?a.kb:null}function Qg(a,b){a=yc(a,"NAME");if(!a)throw Error('Field "NAME" not found.');vd(a,b)}
g.Dj=function(a,b){if(a){void 0===b&&(b=null);if(!this.B){if(this.v)throw Error("Remove output connection prior to adding previous connection.");this.B=this.Gf(4)}this.B.Wf(b)}else if(this.B){if(this.B.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.B.m();this.B=null}};
g.Aj=function(a,b){if(a)void 0===b&&(b=null),this.F||(this.F=this.Gf(3)),this.F.Wf(b);else if(this.F){if(this.F.isConnected())throw Error("Must disconnect next statement before removing connection.");this.F.m();this.F=null}};
g.Bj=function(a,b){if(a){void 0===b&&(b=null);if(!this.v){if(this.B)throw Error("Remove previous connection prior to adding output connection.");this.v=this.Gf(2)}this.v.Wf(b)}else if(this.v){if(this.v.isConnected())throw Error("Must disconnect output value before removing connection.");this.v.m();this.v=null}};g.Od=function(a){this.Cc!=a&&(z(new (B("change"))(this,"inline",null,this.Cc,a)),this.Cc=a)};
function vf(a){if(void 0!=a.Cc)return a.Cc;for(var b=1;b<a.s.length;b++)if(5==a.s[b-1].type&&5==a.s[b].type)return!1;for(b=1;b<a.s.length;b++)if(1==a.s[b-1].type&&5==a.s[b].type)return!0;return!1}g.isEnabled=function(){return!this.disabled};g.Nd=function(a){this.isEnabled()!=a&&(z(new (B("change"))(this,"disabled",null,this.disabled,!a)),this.disabled=!a)};function Rg(a){for(a=Pg(a);a;){if(a.disabled)return!0;a=Pg(a)}return!1}g.isCollapsed=function(){return this.nd};
g.Ld=function(a){this.nd!=a&&(z(new (B("change"))(this,"collapsed",null,this.nd,a)),this.nd=a)};
g.toString=function(a,b){function c(m){var n=m.ie;!n&&m.K&&(n=m.K.ie);return!!n&&(-1!=n.indexOf("Boolean")||-1!=n.indexOf("Number"))}function d(){h&&h.getType()==k.getType()&&h.M==k.M&&(h=null)}var e=[];b=b||"?";var f=jf;jf=!0;for(var h=nf(this),k=h;h;){switch(h.getType()){case "input":var l=h.M;h.Wc()?c(l)&&e.push("("):e.push(b);break;case "field":l=h.M,"_TEMP_COLLAPSED_FIELD"!=l.name&&e.push(Eg(l))}l=h;h=l.Wc()||l.next();if(!h){h=l.ad();for(d();h&&!h.next();)h=h.ad(),d(),h&&"input"==h.getType()&&
c(h.M)&&e.push(")");h&&(h=h.next())}}jf=f;for(b=2;b<e.length;b++)"("==e[b-2]&&")"==e[b]&&(e[b-2]=e[b-1],e.splice(b-1,2));e=e.reduce(function(m,n){return m+("("==m.substr(-1)||")"==n?"":" ")+n},"");e=e.trim()||"???";a&&e.length>a&&(e=e.substring(0,a-3)+"...");return e};g.uc=function(a,b){var c=null;if(1==a||3==a)c=this.Gf(a);a=new Jg(a,b,this,c);this.s.push(a);return a};
g.tj=function(a,b){for(var c=0,d;d=this.s[c];c++)if(d.name==a)return d.m(),this.s.splice(c,1),!0;if(b)return!1;throw Error("Input not found: "+a);};function zc(a,b){for(var c=0,d;d=a.s[c];c++)if(d.name==b)return d;return null}g.He=function(a){this.yc.text!=a&&(z(new (B("change"))(this,"comment",null,this.yc.text,a)),this.yc.text=a)};g.ea=function(){return this.hm};g.moveBy=function(a,b){if(this.pc)throw Error("Block has parent.");var c=new (B("move"))(this);this.hm.translate(a,b);Ad(c);z(c)};
g.Gf=function(a){return new Ke(this,a)};function Sg(){this.Vb=[];this.Kd=this.Ia=this.lh=this.jh=this.ih=this.xc=this.kh=this.td=this.kj=null}g=Sg.prototype;
g.V=function(a){var b=document.createElement("div");b.className="blocklyMenu goog-menu blocklyNonSelectable";b.tabIndex=0;this.Kd&&b.setAttribute("role",this.Kd);this.Ia=b;for(var c=0,d;d=this.Vb[c];c++)b.appendChild(d.Ha());this.kh=H(b,"mouseover",this,this.sn,!0);this.xc=H(b,"click",this,this.nn,!0);this.ih=H(b,"mouseenter",this,this.qn,!0);this.jh=H(b,"mouseleave",this,this.rn,!0);this.lh=H(b,"keydown",this,this.on);a.appendChild(b)};
g.focus=function(){var a=this.Ia;a&&(a.focus({preventScroll:!0}),E(a,"blocklyFocused"))};g.Yf=function(a){this.Kd=a};g.m=function(){this.kh&&(I(this.kh),this.kh=null);this.xc&&(I(this.xc),this.xc=null);this.ih&&(I(this.ih),this.ih=null);this.jh&&(I(this.jh),this.jh=null);this.lh&&(I(this.lh),this.lh=null);for(var a=0,b;b=this.Vb[a];a++)b.m();this.Ia=null};
function Tg(a,b){for(var c=a.Ia;b&&b!=c;){if(bc(b,"blocklyMenuItem"))for(var d=0,e;e=a.Vb[d];d++)if(e.Ia==b)return e;b=b.parentElement}return null}
g.Kc=function(a){var b=this.td;b&&(b.Kc(!1),this.td=null);if(a){a.Kc(!0);this.td=a;b=this.Ia;var c=a.Ia,d=Wa(c),e=Wa(b);var f=Va(b,"borderLeftWidth");Va(b,"borderRightWidth");var h=Va(b,"borderTopWidth");Va(b,"borderBottomWidth");f=d.x-e.x-parseFloat(f);d=d.y-e.y-parseFloat(h);c=new Ta(c.offsetWidth,c.offsetHeight);e=b.clientHeight-c.height;h=b.scrollLeft;var k=b.scrollTop;h+=Math.min(f,Math.max(f-(b.clientWidth-c.width),0));k+=Math.min(d,Math.max(d-e,0));f=new w(h,k);b.scrollLeft=f.x;b.scrollTop=
f.y;Je(b,"activedescendant",a.gb())}};function Ug(a,b,c){b+=c;for(var d;d=a.Vb[b];){if(d.isEnabled()){a.Kc(d);break}b+=c}}g.sn=function(a){(a=Tg(this,a.target))&&(a.isEnabled()?this.td!=a&&this.Kc(a):this.Kc(null))};g.nn=function(a){var b=this.kj;this.kj=null;b&&"number"==typeof a.clientX&&1>Ka(b,new w(a.clientX,a.clientY))||(a=Tg(this,a.target))&&a.isEnabled()&&a.Ye&&a.Ye(a)};g.qn=function(){this.focus()};g.rn=function(){if(this.Ia){var a=this.Ia;a&&(a.blur(),ac(a,"blocklyFocused"));this.Kc(null)}};
g.on=function(a){if(this.Vb.length&&!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){var b=this.td;switch(a.keyCode){case 13:case 32:b&&b.isEnabled()&&b.Ye&&b.Ye(b);break;case 38:b=this.Vb.indexOf(this.td);Ug(this,0>b?this.Vb.length:b,-1);break;case 40:Ug(this,this.Vb.indexOf(this.td),1);break;case 33:case 36:Ug(this,-1,1);break;case 34:case 35:Ug(this,this.Vb.length,-1);break;default:return}a.preventDefault();a.stopPropagation()}};
g.getSize=function(){var a=this.Ia,b=Ua(a);b.height=a.scrollHeight;return b};var Vg=0;function Wg(a,b){this.ai=a;this.kb=b;this.Pg=!0;this.Ia=null;this.xj=!1;this.Kd=null;this.Sk=this.Xh=this.Wh=!1;this.Ye=null}g=Wg.prototype;
g.Ha=function(){var a=document.createElement("div");a.id="blockly-"+(Vg++).toString(36);this.Ia=a;a.className="blocklyMenuItem goog-menuitem "+(this.Pg?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.Xh?"blocklyMenuItemSelected goog-option-selected ":"")+(this.Sk?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.xj?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var b=document.createElement("div");b.className="blocklyMenuItemContent goog-menuitem-content";if(this.Wh){var c=document.createElement("div");
c.className="blocklyMenuItemCheckbox goog-menuitem-checkbox";b.appendChild(c)}c=this.ai;"string"==typeof this.ai&&(c=document.createTextNode(this.ai));b.appendChild(c);a.appendChild(b);this.Kd&&a.setAttribute("role",this.Kd);Je(a,"selected",this.Wh&&this.Xh||!1);Je(a,"disabled",!this.Pg);return a};g.m=function(){this.Ia=null};g.gb=function(){return this.Ia.id};g.Yf=function(a){this.Kd=a};
g.Kc=function(a){this.Sk=a;var b=this.Ia;b&&this.isEnabled()&&(a?(E(b,"blocklyMenuItemHighlight"),E(b,"goog-menuitem-highlight")):(ac(b,"blocklyMenuItemHighlight"),ac(b,"goog-menuitem-highlight")))};g.isEnabled=function(){return this.Pg};g.Nd=function(a){this.Pg=a};function Xg(a,b,c){a.Ye=b.bind(c)};var S={Ig:null,bb:null,show:function(a,b,c){tg(c);if(b.length){var d=S.Sn(b,c);S.bb=d;S.Tn(d,a,c);setTimeout(function(){d.focus()},1);S.Ig=null}else S.Bc()},Sn:function(a,b){var c=new Sg;c.Yf("menu");for(var d=0,e;e=a[d];d++){var f=new Wg(e.text);f.xj=b;f.Yf("menuitem");c.Vb.push(f);f.Nd(e.enabled);e.enabled&&Xg(f,function(){S.Bc();this.ka(this.scope)},e)}return c},Tn:function(a,b,c){var d=document.body;var e=document.documentElement;d=new w(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);d=
new Na(d.y,document.documentElement.clientHeight+d.y,d.x,document.documentElement.clientWidth+d.x);var f=new Na(b.clientY+d.top,b.clientY+d.top,b.clientX+d.left,b.clientX+d.left);S.$m(a);b=a.getSize();c&&(f.left+=b.width,f.right+=b.width,d.left+=b.width,d.right+=b.width);e=f.bottom+b.height>=d.bottom?f.top-b.height:f.bottom;c?(c=Math.max(f.right-b.width,d.left),c=Math.min(c,d.right-b.width)):(c=Math.min(f.left,d.right-b.width),c=Math.max(c,d.left));0>e?vg(c,0,b.height+e):vg(c,e,b.height);a.focus()},
$m:function(a){a.V(og);var b=a.Ia;E(b,"blocklyContextMenu");H(b,"contextmenu",null,hb);a.focus()},Bc:function(){pg==S&&ug();S.Ig=null},m:function(){S.bb&&(S.bb.m(),S.bb=null)},zo:function(a,b){return function(){y++;try{var c=pc(b,a.i),d=a.ea();d.x=a.u?d.x-na:d.x+na;d.y+=2*na;c.moveBy(d.x,d.y)}finally{y--}0==y&&!c.R&&z(new (B("create"))(c));c.select()}}};function Yg(){Zg=this;this.Fb=Object.create(null)}var Zg=null;Yg.prototype.register=function(a){if(this.Fb[a.id])throw Error('Menu item with ID "'+a.id+'" is already registered.');this.Fb[a.id]=a};Yg.prototype.unregister=function(a){if(!this.Fb[a])throw Error('Menu item with ID "'+a+'" not found.');delete this.Fb[a]};Yg.prototype.getItem=function(a){return this.Fb[a]||null};
function $g(a,b){var c=[],d=Zg.Fb;Object.keys(d).forEach(function(e){e=d[e];if(a==e.rb){var f=e.sa(b);"hidden"!=f&&(e={text:"function"==typeof e.Ya?e.Ya(b):e.Ya,enabled:"enabled"==f,ka:e.ka,scope:b,weight:e.weight},c.push(e))}});c.sort(function(e,f){return e.weight-f.weight});return c}new Yg;function ah(a,b,c){ah.h.constructor.call(this,c);this.tl=a;this.ql=b}K(ah,Ed);ah.prototype.type="selected";ah.prototype.T=function(){var a=ah.h.T.call(this);a.oldElementId=this.tl;a.newElementId=this.ql;return a};ah.prototype.L=function(a){ah.h.L.call(this,a);this.tl=a.oldElementId;this.ql=a.newElementId};q(p,"selected",ah);function bh(a,b){bh.h.constructor.call(this,a,b);this.ne=a.i.Hg[b];this.wk=a.i.Hg[qa[b]];this.Id=new w(0,0);this.Mc=ch;this.K=null}K(bh,Ke);var ch=-1;g=bh.prototype;g.m=function(){bh.h.m.call(this);1==this.Mc&&dh(this.ne,this,this.y)};g.A=function(){return bh.h.A.call(this)};g.I=function(){return bh.h.I.call(this)};function Qe(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}
function eh(a,b){if(!a.o.i.zb()){var c=a.o.Sb();if(!c.Bb){var d=!1;if(!c.Oa()){c=b.A().Sb();if(!c.Oa())return;b=a;d=!0}var e=P==c;e||fh(c.ga,!0);var f=b.x+na+Math.floor(10*Math.random())-a.x,h=b.y+na+Math.floor(10*Math.random())-a.y;d&&(h=-h);c.u&&(f=b.x-na-Math.floor(10*Math.random())-a.x);c.moveBy(f,h);e||fh(c.ga,!1)}}}
g.moveTo=function(a,b){if(this.Mc==ch){var c=this.ne;c.ra.splice(gh(c,b),0,this);this.Mc=1}else 1==this.Mc&&(dh(this.ne,this,this.y),c=this.ne,c.ra.splice(gh(c,b),0,this));this.x=a;this.y=b};g.moveBy=function(a,b){this.moveTo(this.x+a,this.y+b)};function hh(a,b){a.moveTo(b.x+a.Id.x,b.y+a.Id.y)}function ih(a,b,c){a.Id.x=b;a.Id.y=c}
function jh(a){var b=a.K.x-a.x,c=a.K.y-a.y;if(0!=b||0!=c){a=a.I();var d=a.P();if(!d)throw Error("block is not rendered.");d=jb(d);a.P().setAttribute("transform","translate("+(d.x-b)+","+(d.y-c)+")");Rf(a,-b,-c)}}
g.closest=function(a,b){var c=this.wk;if(c.ra.length){var d=this.y,e=this.x;this.x=e+b.x;this.y=d+b.y;var f=gh(c,this.y);b=null;for(var h=a,k,l=f-1;0<=l&&Math.abs(c.ra[l].y-this.y)<=a;)k=c.ra[l],0==Ne(this,k,!0,h)&&(b=k,h=Qe(k,this)),l--;for(;f<c.ra.length&&Math.abs(c.ra[f].y-this.y)<=a;)k=c.ra[f],0==Ne(this,k,!0,h)&&(b=k,h=Qe(k,this)),f++;this.x=e;this.y=d;a={connection:b,sh:h}}else a={connection:null,sh:a};return a};
function Ng(a,b){b&&1==a.Mc||!b&&0==a.Mc||a.o.Bb||(b?(b=a.ne,b.ra.splice(gh(b,a.y),0,a),a.Mc=1):(1==a.Mc&&dh(a.ne,a,a.y),a.Mc=0))}function Mg(a){Ng(a,!0);var b=[];if(1!=a.type&&3!=a.type)return b;if(a=a.I()){if(a.isCollapsed()){var c=[];a.v&&c.push(a.v);a.F&&c.push(a.F);a.B&&c.push(a.B)}else c=a.Rb(!0);for(var d=0;d<c.length;d++)b.push.apply(b,Mg(c[d]));b.length||(b[0]=a)}return b}
g.ij=function(a){var b=this.A();if(zb){var c=x;setTimeout(function(){b.Sc||b.getParent()||(A(c),eh(this,a),A(!1))}.bind(this),250)}};g.ii=function(a,b){bh.h.ii.call(this,a,b);a.J&&a.V();b.J&&(tc(b),b.V(),b.P().style.display="block")};g.Uf=function(){bh.h.Uf.call(this);var a=this.I();a&&(a.ve(),a.V(!1),a=this.A(),a.J&&a.V())};g.ol=function(a){return kh(this.wk,this,a)};
g.Fg=function(a){bh.h.Fg.call(this,a);var b=this.A();a=a.A();var c=b.J,d=a.J;c&&tc(b);d&&tc(a);c&&d&&(3==this.type||4==this.type?a.V():b.V());if(b=Bd(b,a))b=b.isVisible(),a.P().style.display=b?"block":"none"};g.zl=function(){!this.isConnected()||this.K&&0==Ne(this,this.K,!1)||(Cd(Me(this)?this.I():this.o),this.o.mb())};function lh(){lh.h.constructor.call(this)}K(lh,mg);g=lh.prototype;g.next=function(){var a=this.Nb;if(!a)return null;(a=mh(this,a,this.bm))&&lg(this,a);return a};g.Wc=function(){return this.next()};g.dd=function(){var a=this.Nb;if(!a)return null;(a=nh(this,a,this.bm))&&lg(this,a);return a};g.ad=function(){return this.dd()};function mh(a,b,c){if(!b)return null;var d=b.Wc()||b.next();if(c(d))return d;if(d)return mh(a,d,c);b=oh(a,b.ad());return c(b)?b:b?mh(a,b,c):null}
function nh(a,b,c){if(!b)return null;var d=b.dd();d=d?ph(a,d):b.ad();return c(d)?d:d?nh(a,d,c):null}g.bm=function(a){var b=!1;a=a&&a.getType();if("output"==a||"input"==a||"field"==a||"next"==a||"previous"==a||"workspace"==a)b=!0;return b};function oh(a,b){if(!b)return null;var c=b.next();return c?c:oh(a,b.ad())}function ph(a,b){if(!b.Wc())return b;for(b=b.Wc();b.next();)b=b.next();return ph(a,b)}q(ua,"basicCursor",lh);function T(a,b,c){this.H=D(Ob,{},null);this.H.mg="";this.style=qh(a.oa.D(),null);this.ga=a.oa.il(this.H,this.style);this.uj=this.J=!1;this.i=a;this.B=this.F=this.v=null;this.pg=sb()&&!!a.lb;var d=this.ga.ya;d.Yb=this;Ce(d);T.h.constructor.call(this,a,b,c);this.H.dataset?this.H.dataset.id=this.id:Xa&&this.H.setAttribute("data-id",this.id)}K(T,af);g=T.prototype;g.height=0;g.width=0;g.Ih=null;
g.ve=function(){if(!this.i.J)throw TypeError("Workspace is headless.");for(var a=0,b;b=this.s[a];a++)b.na();b=Lf(this);for(a=0;a<b.length;a++)b[a].Go();this.Ga();If(this.ga,"blocklyDraggable",this.Oa());a=this.P();this.i.options.readOnly||this.gn||!a||H(a,"mousedown",this,this.Nf);this.gn=!0;a.parentNode||this.i.Da.appendChild(a)};
g.select=function(){if(this.R&&this.getParent())this.getParent().select();else if(P!=this){var a=null;if(P){a=P.id;y++;try{cg(P)}finally{y--}}a=new (B("selected"))(a,this.id,this.i.id);z(a);P=this;fh(this.ga,!0)}};function cg(a){if(P==a){var b=new (B("selected"))(a.id,null,a.i.id);b.cb=a.i.id;z(b);P=null;fh(a.ga,!1)}}g.Fd=null;g.Mb=null;g.em=null;function Lf(a){var b=[];a.Fd&&b.push(a.Fd);a.Mb&&b.push(a.Mb);a.em&&b.push(a.em);return b}
g.yh=function(a){var b=this.pc;if(a!=b){ec();T.h.yh.call(this,a);fc();var c=this.P();if(!this.i.Pi&&c){var d=this.ea();a?(a.P().appendChild(c),a=this.ea(),Rf(this,a.x-d.x,a.y-d.y)):b&&(this.i.Da.appendChild(c),this.translate(d.x,d.y));this.Ga()}}};g.ea=function(){var a=0,b=0,c=this.pg?this.i.lb.hc:null,d=this.P();if(d){do{var e=jb(d);a+=e.x;b+=e.y;this.pg&&this.i.lb.hc.firstChild==d&&(e=this.i.lb.Di(),a+=e.x,b+=e.y);d=d.parentNode}while(d&&d!=this.i.Da&&d!=c)}return new w(a,b)};
g.moveBy=function(a,b){if(this.pc)throw Error("Block has parent.");var c=0==y;if(c)var d=new (B("move"))(this);var e=this.ea();this.translate(e.x+a,e.y+b);Rf(this,a,b);c&&(Ad(d),z(d));uc(this.i)};g.translate=function(a,b){this.P().setAttribute("transform","translate("+a+","+b+")")};g.moveTo=function(a){var b=this.ea();this.moveBy(a.x-b.x,a.y-b.y)};function Of(a,b){a.pg?a.i.lb.Me(b.x,b.y):(a.H.mg="translate("+b.x+","+b.y+")",a.H.setAttribute("transform",a.H.mg+a.H.cg))}
function rh(a){if(a.i&&!a.i.zb()&&!a.getParent()&&!a.Bb){var b=a.i.yb;if(b&&b.Zn){var c=b.Gj,d=c/2,e=a.ea();b=Math.round((e.x-d)/c)*c+d-e.x;c=Math.round((e.y-d)/c)*c+d-e.y;b=Math.round(b);c=Math.round(c);0==b&&0==c||a.moveBy(b,c)}}}function sh(a){var b=a.ea(),c=Nf(a);if(a.u){a=b.x-c.width;var d=b.x}else a=b.x,d=b.x+c.width;return new Na(b.y,b.y+c.height,a,d)}g.Hf=function(){this.ga.ef=this.i.oa.D();for(var a=0,b;b=this.s[a];a++)b.Hf()};
g.Ld=function(a){this.nd!=a&&(T.h.Ld.call(this,a),a?this.J&&this.V():th(this))};function th(a){for(var b=a.isCollapsed(),c=0,d;d=a.s[c];c++)"_TEMP_COLLAPSED_INPUT"!=d.name&&d.Ka(!b);if(b){d=Lf(a);for(c=0;b=d[c];c++)b.Ka(!1);c=a.toString(30);(d=yc(a,"_TEMP_COLLAPSED_FIELD"))?vd(d,c):(d=zc(a,"_TEMP_COLLAPSED_INPUT")||a.uc(5,"_TEMP_COLLAPSED_INPUT"),Kg(d,new Ig(c),"_TEMP_COLLAPSED_FIELD"))}else tc(a),a.tj("_TEMP_COLLAPSED_INPUT")}
g.Nf=function(a){var b=this.i&&Hg(this.i,a);if(b){if(b.zf)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");b.Je||b.Xb||(b.Je=this,this.Bb&&this!=this.Sb()?ig(b,this.Sb()):ig(b,this));b.Wb=a}};g.showHelp=function(){var a="function"==typeof this.Tb?this.Tb():this.Tb;a&&window.open(a)};g.Ah=function(a){if(this.i.options.readOnly||!this.contextMenu)var b=null;else b=$g("block",{block:this}),this.an&&this.an(b);b&&b.length&&(S.show(a,b,this.u),S.Ig=this)};
function Rf(a,b,c){if(a.J){for(var d=a.Rb(!1),e=0;e<d.length;e++)d[e].moveBy(b,c);d=Lf(a);for(e=0;e<d.length;e++)d[e].Xm();for(e=0;e<a.wc.length;e++)Rf(a.wc[e],b,c)}}g.Md=function(a){if(a){var b=this.P();b.mg="";b.cg="";Re=Re.concat(this.Rb(!0));E(this.H,"blocklyDragging")}else Re=[],ac(this.H,"blocklyDragging");for(b=0;b<this.wc.length;b++)this.wc[b].Md(a)};g.zj=function(a){T.h.zj.call(this,a);If(this.ga,"blocklyDraggable",a)};g.yj=function(a){T.h.yj.call(this,a);a=Lf(this);for(var b=0;b<a.length;b++)xg(a[b])};
g.Ej=function(a){T.h.Ej.call(this,a);this.Ga()};g.Ql=function(a){this.ye!=a&&(this.ye=a)&&(this.Ge(this.i.oa.D().Am),If(this.ga,"blocklyInsertionMarker",!0))};g.P=function(){return this.H};
g.m=function(a,b){if(this.i){Ae=ze=null;He();Ge(this.ga.ya);ec();var c=this.i;P==this&&(cg(this),uh(this.i));S.Ig==this&&S.Bc();if(b&&this.J){Cd(this,a);b=this.i;var d=this.P();b.cc.play("delete");var e=Sf(b,d);d=d.cloneNode(!0);d.mo=e.x;d.no=e.y;d.setAttribute("transform","translate("+e.x+","+e.y+")");L(b).appendChild(d);d.jk=d.getBBox();yf(d,b.u,new Date,b.scale)}this.J=!1;if(this.Ih){for(var f in this.Ih)clearTimeout(this.Ih[f]);this.Ih=null}f=Lf(this);for(b=0;b<f.length;b++)f[b].m();T.h.m.call(this,
!!a);F(this.H);uc(c);this.H=null;fc()}};g.Ga=function(){this.ga.Ga(this);for(var a=Lf(this),b=0;b<a.length;b++)a[b].Ga();for(a=0;b=this.s[a];a++)for(var c=0,d;d=b.Y[c];c++)d.Ga()};function tc(a){var b=ic(a,!1);a.Ga();if(!a.isCollapsed()){a=0;for(var c;c=b[a];a++)c.J&&tc(c)}}g.jn=function(){return this.Mb};
g.He=function(a){if(!ka.Comment)throw Error("Missing require for Blockly.Comment");this.yc.text!=a&&(T.h.He.call(this,a),a=null!=a,!!this.Mb==a?this.Mb.gp():(a?this.Mb=new ka.Comment(this):(this.Mb.m(),this.Mb=null),this.J&&(this.V(),this.mb())))};g.Nd=function(a){this.isEnabled()!=a&&(T.h.Nd.call(this,a),this.J&&!Rg(this)&&tc(this))};g.Kc=function(a){this.J&&this.ga.Yl(a)};g.Bi=function(){return this.style.od};
g.Ge=function(a){T.h.Ge.call(this,a);a=vh(this.i.oa.D(),this.vb);this.ga.Ie(a.style);this.style=a.style;this.dg=a.name;this.Ga()};g.Ie=function(a){var b=qh(this.i.oa.D(),a);this.dg=a;if(b)this.sd=b.sd,this.ga.Ie(b),this.vb=b.od,this.style=b,this.Ga();else throw Error("Invalid style name: "+a);};function Mf(a){do{var b=a.P(),c=b.parentNode,d=c.childNodes;d[d.length-1]!==b&&c.appendChild(b);a=a.getParent()}while(a)}g.Dj=function(a,b){T.h.Dj.call(this,a,b);this.J&&(this.V(),this.mb())};
g.Aj=function(a,b){T.h.Aj.call(this,a,b);this.J&&(this.V(),this.mb())};g.Bj=function(a,b){T.h.Bj.call(this,a,b);this.J&&(this.V(),this.mb())};g.Od=function(a){T.h.Od.call(this,a);this.J&&(this.V(),this.mb())};g.tj=function(a,b){a=T.h.tj.call(this,a,b);this.J&&(this.V(),this.mb());return a};g.uc=function(a,b){a=T.h.uc.call(this,a,b);this.J&&(this.V(),this.mb());return a};
function sc(a,b){a.B&&Ng(a.B,b);a.v&&Ng(a.v,b);if(a.F){Ng(a.F,b);var c=a.F.I();c&&sc(c,b)}if(!a.nd)for(c=0;c<a.s.length;c++){var d=a.s[c].connection;d&&(Ng(d,b),(d=d.I())&&sc(d,b))}}g.Rb=function(a){var b=[];if(a||this.J)if(this.v&&b.push(this.v),this.B&&b.push(this.B),this.F&&b.push(this.F),a||!this.nd){a=0;for(var c;c=this.s[a];a++)c.connection&&b.push(c.connection)}return b};g.dh=function(a){return T.h.dh.call(this,a)};g.Ci=function(a,b){return T.h.Ci.call(this,a,b)};
g.Gf=function(a){return new bh(this,a)};g.mb=function(){if(this.i&&!this.i.zb()){var a=this.Sb();if(!a.Bb)for(var b=this.Rb(!1),c=0,d;d=b[c];c++){d.isConnected()&&Me(d)&&d.I().mb();for(var e=d.ol(na),f=0,h;h=e[f];f++)d.isConnected()&&h.isConnected()||h.A().Sb()!=a&&(Me(d)?eh(h,d):eh(d,h))}}};function Tf(a){var b=x;setTimeout(function(){A(b);rh(a);A(!1)},125);setTimeout(function(){A(b);a.mb();A(!1)},250)}g.getParent=function(){return T.h.getParent.call(this)};g.Sb=function(){return T.h.Sb.call(this)};
g.V=function(a){if(!this.uj){this.uj=!0;try{this.J=!0;ec();this.isCollapsed()&&th(this);this.i.oa.V(this);var b=this.ea();this.B&&hh(this.B,b);this.v&&hh(this.v,b);for(var c=0;c<this.s.length;c++){var d=this.s[c].connection;d&&(hh(d,b),d.isConnected()&&jh(d))}this.F&&(hh(this.F,b),this.F.isConnected()&&jh(this.F));if(!1!==a){var e=this.getParent();e?e.V(!0):uc(this.i)}fc();this.Nj()}finally{this.uj=!1}}};g.Nj=function(){this.i.Ff&&this.ga.jf&&this.i.uf().Ob();this.i.Ff&&this.ga.Zi&&this.i.wf("local_marker_1").Ob()};
g.Jc=function(a){this.ga.Jc(a)};g.fd=function(a){this.ga.fd(a)};function Nf(a){var b=a.height,c=a.width,d=xb(a);d&&(d=Nf(d),a=a.i.oa.D().Lh,b+=d.height-a,c=Math.max(c,d.width));return{height:b,width:c}};function wh(){this.ra=[]}function xh(a,b,c){if(!a.ra.length)return-1;var d=gh(a,c);if(d>=a.ra.length)return-1;c=b.y;for(var e=d;0<=e&&a.ra[e].y==c;){if(a.ra[e]==b)return e;e--}for(e=d;e<a.ra.length&&a.ra[e].y==c;){if(a.ra[e]==b)return e;e++}return-1}function gh(a,b){if(!a.ra.length)return 0;for(var c=0,d=a.ra.length;c<d;){var e=Math.floor((c+d)/2);if(a.ra[e].y<b)c=e+1;else if(a.ra[e].y>b)d=e;else{c=e;break}}return c}
function dh(a,b,c){b=xh(a,b,c);if(-1==b)throw Error("Unable to find connection in connectionDB.");a.ra.splice(b,1)}function kh(a,b,c){function d(m){var n=f-e[m].x,u=h-e[m].y;Math.sqrt(n*n+u*u)<=c&&l.push(e[m]);return u<c}var e=a.ra,f=b.x,h=b.y;a=0;for(var k=b=e.length-2;a<k;)e[k].y<h?a=k:b=k,k=Math.floor((a+b)/2);var l=[];b=a=k;if(e.length){for(;0<=a&&d(a);)a--;do b++;while(b<e.length&&d(b))}return l};function yh(a,b){yh.h.constructor.call(this,b);this.Ul=a}K(yh,Ed);yh.prototype.type="theme_change";yh.prototype.T=function(){var a=yh.h.T.call(this);a.themeName=this.Ul;return a};yh.prototype.L=function(a){yh.h.L.call(this,a);this.Ul=a.themeName};q(p,"theme_change",yh);function zh(a,b,c,d,e){zh.h.constructor.call(this,d);this.Kb=a;this.Jb=b;this.scale=c;this.Mf=e}K(zh,Ed);zh.prototype.type="viewport_change";zh.prototype.T=function(){var a=zh.h.T.call(this);a.viewTop=this.Kb;a.viewLeft=this.Jb;a.scale=this.scale;a.oldScale=this.Mf;return a};zh.prototype.L=function(a){zh.h.L.call(this,a);this.Kb=a.viewTop;this.Jb=a.viewLeft;this.scale=a.scale;this.Mf=a.oldScale};q(p,"viewport_change",zh);function Ah(a){this.j=a}function Bh(a){var b=0,c=0;a&&(b=a.Tg(),c=a.Mo());return new Ta(b,c)}function Ch(a){var b=Bh(Dh(a.j,!0));return{width:b.width,height:b.height,position:a.j.Rd}}function Eh(a){var b=Bh(a.j.la);return{width:b.width,height:b.height,position:a.j.Rd}}function Fh(a){var b=0,c=Eh(a),d=Ch(a),e=!!a.j.la;a=!!Dh(a.j,!0);var f=2==(e?c.position:d.position);e&&f?b=c.width:a&&f&&(b=d.width);return{top:0,left:b}}
function Gh(a,b){b=b?a.j.scale:1;var c=Hh(a.j),d=Eh(a),e=Ch(a),f=a.j.la?d.position:e.position;if(a.j.la){if(2==f||3==f)c.width-=d.width}else!Dh(a.j,!0)||2!=f&&3!=f||(c.width-=e.width);return{height:c.height/b,width:c.width/b,top:-a.j.scrollY/b,left:-a.j.scrollX/b}}
function Ih(a){var b=a.j.scale;a=[].concat(a.j.kg);if(a.length){for(var c=sh(a[0]),d=1;d<a.length;d++){var e=a[d];e.Cb&&e.Cb()||(e=sh(e),e.top<c.top&&(c.top=e.top),e.bottom>c.bottom&&(c.bottom=e.bottom),e.left<c.left&&(c.left=e.left),e.right>c.right&&(c.right=e.right))}a=c}else a=new Na(0,0,0,0);return{height:(a.bottom-a.top)*b,width:(a.right-a.left)*b,top:a.top*b,left:a.left*b}}
function Vf(a,b,c,d){b=b?a.j.scale:1;c=c||Gh(a,!1);d=d||Ih(a);if(ag(a.j)&&bg(a.j))a={};else{var e=ag(a.j),f=bg(a.j);a=c||Gh(a,!1);var h={};f||(h.top=a.top,h.bottom=a.top+a.height);e||(h.left=a.left,h.right=a.left+a.width);a=h}h=d.top+d.height;e=d.left+d.width;f=c.width;var k=c.height;var l=f/2,m=k/2;c=Math.min(d.top-m,h-k);h=Math.max(h+m,d.top+k);k=Math.min(d.left-l,e-f);d=Math.max(e+l,d.left+f);c=void 0!==a.top?a.top:c;e=void 0!==a.left?a.left:k;return{top:c/b,left:e/b,width:((void 0!==a.right?a.right:
d)-e)/b,height:((void 0!==a.bottom?a.bottom:h)-c)/b}}Ah.prototype.jc=function(){var a=Eh(this),b=Ch(this),c=Hh(this.j),d=Fh(this),e=Gh(this),f=Ih(this),h=Vf(this,!1,e,f);return{Co:f.height,Fo:f.width,Eo:f.top,Do:f.left,scrollHeight:h.height,scrollWidth:h.width,scrollTop:h.top,scrollLeft:h.left,Ta:e.height,Ma:e.width,Kb:e.top,Jb:e.left,eb:d.top,Va:d.left,Zo:c.height,$o:c.width,ep:a.width,bp:a.height,Rd:a.position,Jo:b.width,Io:b.height}};q(Aa,"default",Ah);function Jh(a){var b=Rd;this.j=a;this.hg=b;this.eg=[];this.Pc=Object.create(null)}g=Jh.prototype;g.Ac=function(){return this.hg};g.$f=function(a){var b=this.hg;this.hg=a;if(a=Kh(this.j))b&&ac(a,b.Qb()),E(a,this.hg.Qb());for(b=0;a=this.eg[b];b++)Lh(a);M()};g.subscribe=function(a,b,c){this.Pc[b]||(this.Pc[b]=[]);this.Pc[b].push({element:a,propertyName:c});a.style[c]=""};
g.unsubscribe=function(a){if(a)for(var b=Object.keys(this.Pc),c=0,d;d=b[c];c++){for(var e=this.Pc[d],f=e.length-1;0<=f;f--)e[f].element===a&&e.splice(f,1);this.Pc[d].length||delete this.Pc[d]}};g.m=function(){this.Pc=this.eg=this.hg=null};function Mh(a,b){Mh.h.constructor.call(this,a,b);this.$g=!1;this.ob=Object.create(null);this.Rl=this.Rf=0;this.Yk=this.jj=null}K(Mh,dg);g=Mh.prototype;g.ji=function(a){this.Yk=this.ta.options.ma&&this.ta.options.ma.Gl;Mh.h.ji.call(this,a);!this.Zg&&Lc(a)&&Nh(this,a)};g.kk=function(a){this.jj=H(document,"mousedown",null,this.tn.bind(this),!0);this.mh=H(document,"mousemove",null,this.te.bind(this),!0);this.nh=H(document,"mouseup",null,this.Ug.bind(this),!0);a.preventDefault();a.stopPropagation()};
g.tn=function(a){!this.zb()&&Lc(a)&&(Nh(this,a),this.$g&&Gc())};g.te=function(a){if(this.zb())Kc(a)&&!Jc(a)||Mh.h.te.call(this,a);else if(this.$g){if(Lc(a)){this.ob[Ic(a)]=Oh(this,a);var b=Object.keys(this.ob);if(this.Yk&&2===b.length){b=Object.keys(this.ob);b=Ka(this.ob[b[0]],this.ob[b[1]])/this.Rl;if(0<this.Rf&&Infinity>this.Rf){var c=b-this.Rf;c=0<c?5*c:6*c;var d=this.ta,e=nb(a,L(d),qe(d));d.zoom(e.x,e.y,c)}this.Rf=b;a.preventDefault()}else Mh.h.te.call(this,a)}Gc()}else Mh.h.te.call(this,a)};
g.Ug=function(a){if(Lc(a)&&!this.zb()){var b=Ic(a);this.ob[b]&&delete this.ob[b];2>Object.keys(this.ob).length&&(this.ob=Object.create(null),this.Rf=0)}!this.$g||this.zb()?Kc(a)&&!Jc(a)||Mh.h.Ug.call(this,a):(a.preventDefault(),a.stopPropagation(),this.m())};g.m=function(){Mh.h.m.call(this);this.jj&&I(this.jj)};function Nh(a,b){a.ob[Ic(b)]=Oh(a,b);var c=Object.keys(a.ob);2==c.length&&(a.Rl=Ka(a.ob[c[0]],a.ob[c[1]]),a.$g=!0,b.preventDefault())}
function Oh(a,b){return a.ta?new w(b.changedTouches?b.changedTouches[0].pageX:b.pageX,b.changedTouches?b.changedTouches[0].pageY:b.pageY):null};function Ph(a){this.nj=a;this.We=Object.create(null)}g=Ph.prototype;g.Si=null;g.m=function(){this.We=this.nj=null};g.load=function(a,b){if(a.length){try{var c=new r.Audio}catch(k){return}for(var d,e=0;e<a.length;e++){var f=a[e],h=f.match(/\.(\w+)$/);if(h&&c.canPlayType("audio/"+h[1])){d=new r.Audio(f);break}}d&&d.play&&(this.We[b]=d)}};g.preload=function(){for(var a in this.We){var b=this.We[a];b.volume=.01;var c=b.play();void 0!==c?c.then(b.pause).catch(function(){}):b.pause();if(bb||db)break}};
g.play=function(a,b){var c=this.We[a];c?(a=new Date,null!=this.Si&&100>a-this.Si||(this.Si=a,c=bb||ab?c:c.cloneNode(),c.volume=void 0===b?1:b,c.play())):this.nj&&this.nj.cc.play(a,b)};function Qh(a,b,c){Qh.h.constructor.call(this,a);this.Be=new (Da(Aa,a,!0))(this);this.jc=a.jc||this.Be.jc.bind(this.Be);this.xh=a.xh||Rh;this.af=new Oc;var d=[];d[1]=new wh;d[2]=new wh;d[3]=new wh;d[4]=new wh;this.Hg=d;b&&(this.lb=b);c&&(this.Vd=c);this.Hh=!!this.Vd&&sb();this.cc=new Ph(a.ib);this.yb=this.options.Gi?new Od(this.options.Gi,a.Lk):null;this.Ub=new ng(this);this.Vl=Object.create(null);this.Gk=Object.create(null);Sh&&Th&&Uh(this,"VARIABLE",Th);Vh&&Wh&&(Uh(this,"PROCEDURE",Wh),this.Ec.push(Xh));
this.jb=this.options.ib?this.options.ib.jb:new Jh(this);this.jb.eg.push(this);c=this.options.Ol||"geras";a=this.Ac();b=this.options.Pl;c=new (Ca(wa,c))(c);c.na(a,b);this.oa=c;this.Vh=null;this.Ff=!1;this.kg=[];this.ki=[];this.Uh=new Ta(0,0)}K(Qh,qc);g=Qh.prototype;g.wh=null;g.J=!0;g.Ef=!0;g.zd=!1;g.ah=!1;g.wj=!0;g.scrollX=0;g.scrollY=0;g.scale=1;g.gj=1;g.yl=0;g.vl=0;g.Ne=null;g.xa=null;g.O=null;g.la=null;g.Na=null;g.lb=null;g.Vd=null;g.Hh=!1;g.Yg=!1;g.Ni=null;g.cl=null;g.Kj=null;g.Xk=null;g.Oi=!0;
g.Jc=function(a){this.Ub.Jc(a)};g.fd=function(a){this.Ub.fd(a)};g.wf=function(a){return this.Ub?this.Ub.wf(a):null};g.uf=function(){return this.Ub?this.Ub.uf():null};g.Ac=function(){return this.jb.Ac()};g.$f=function(a){a||(a=Rd);this.jb.$f(a)};function Lh(a){a.H&&a.oa.sj(a.H,a.Ac());Yh(Te(a).filter(function(b){return!!b.dg}));Zh(a);a.la&&Lh(a.la);a.isVisible()&&a.Ka(!0);a=new (B("theme_change"))(a.Ac().name,a.id);z(a)}
function Yh(a){for(var b=0,c;c=a[b];b++){var d=c.dg;d&&(c.Ie(d),c.Fd&&c.Fd.fp())}}function qe(a){if(a.Oi){var b=L(a).getScreenCTM();b&&(a.Xk=b.inverse(),a.Oi=!1)}return a.Xk}g.og=function(){this.Oi=!0};g.isVisible=function(){return this.Ef};function Sf(a,b){var c=0,d=0,e=1;if(a.Da.contains(b)||a.hd.contains(b))e=a.scale;do{var f=jb(b);if(b==a.Da||b==a.hd)e=1;c+=f.x*e;d+=f.y*e;b=b.parentNode}while(b&&b!=L(a));return new w(c,d)}function Hh(a){a=a.Uh;return new Ta(a.width,a.height)}
function Kh(a){if(!a.Ni)for(var b=a.H;b;){if(-1!=(" "+(b.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){a.Ni=b;break}b=b.parentNode}return a.Ni}
g.Ha=function(a){this.H=D(Ob,{"class":"blocklyWorkspace"},null);a&&(this.Lc=D(Tb,{height:"100%",width:"100%","class":a},this.H),"blocklyMainBackground"==a&&this.yb?this.Lc.style.fill="url(#"+this.yb.se.id+")":this.jb.subscribe(this.Lc,"workspaceBackgroundColour","fill"));this.Da=D(Ob,{"class":"blocklyBlockCanvas"},this.H);this.hd=D(Ob,{"class":"blocklyBubbleCanvas"},this.H);this.zd||(H(this.H,"mousedown",this,this.Nf,!1,!0),H(this.H,"wheel",this,this.Qn));this.options.Mk&&(this.la=new (Da(xa,this.options,
!0))(this));this.yb&&this.yb.update(this.scale);$h(this);var b=Da(ua,this.options);b&&(a=this.Ub,b=new b,a.wb&&a.wb.xb&&a.wb.xb.m(),a.wb=b,a.wb&&(b=a.wb,b=new ai(a.j,a.j.oa.D(),b),a.wb.xb=b,a.Jc(a.wb.xb.Ha())));this.oa.Ha(this.H,this.Ac());return this.H};
g.m=function(){this.J=!1;this.Na&&this.Na.cancel();this.H&&(F(this.H),this.H=null);this.hd=this.Da=null;this.la&&(this.la.m(),this.la=null);this.O&&(this.O.m(),this.O=null);this.Ne&&(this.Ne.m(),this.Ne=null);this.xa&&(this.xa.m(),this.xa=null);this.rg&&(this.rg.m(),this.rg=null);this.cc&&(this.cc.m(),this.cc=null);this.yb&&(this.yb.m(),this.yb=null);this.oa.m();this.Ub&&(this.Ub.m(),this.Ub=null);Qh.h.m.call(this);if(this.jb){var a=this.jb,b=a.eg.indexOf(this);if(0>b)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");
a.eg.splice(b,1);this.jb.unsubscribe(this.Lc);this.options.ib||(this.jb.m(),this.jb=null)}this.Gk=this.Vl=this.Hg=null;this.options.ib||(a=L(this))&&a.parentNode&&F(a.parentNode);this.wh&&(I(this.wh),this.wh=null)};g.Ce=function(a,b){return new T(this,a,b)};function Dh(a,b){return a.O||b?a.O:a.la?Dh(a.la):null}function uc(a){a.wj&&a.J&&(a.xa&&a.xa.resize(),a.og())}
g.resize=function(){this.la&&this.la.position();this.O&&this.O.position();var a=Rc(this.af,Tc);var b=this.Be;b={hp:Gh(b),to:Fh(b),cp:Eh(b)};for(var c=[],d=0,e;e=a[d];d++)e.position(b,c),(e=sh(e))&&c.push(e);this.xa&&this.xa.resize();this.og();$h(this)};function fg(a){var b=document.documentElement;var c=window;b=Xa&&c.pageYOffset!=b.scrollTop?new w(b.scrollLeft,b.scrollTop):new w(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop);Ja(a.cl,b)||(a.cl=b,a.og(),$h(a))}
function L(a){if(!a.Vh)for(var b=a.H;b;){if("svg"==b.tagName){a.Vh=b;break}b=b.parentNode}return a.Vh}function $d(a){if(0==y){var b=a.scale,c=-a.scrollY,d=-a.scrollX;if(!(b==a.gj&&1>Math.abs(c-a.yl)&&1>Math.abs(d-a.vl))){var e=new (B("viewport_change"))(c,d,b,a.id,a.gj);a.gj=b;a.yl=c;a.vl=d;z(e)}}}
g.translate=function(a,b){if(this.Hh&&this.Yg)this.Vd.Me(a,b);else{var c="translate("+a+","+b+") scale("+this.scale+")";this.Da.setAttribute("transform",c);this.hd.setAttribute("transform",c)}if(this.lb){c=this.lb;var d=this.scale;c.ed=d;var e=a.toFixed(0),f=b.toFixed(0);c.pk.x=parseInt(e,10);c.pk.y=parseInt(f,10);c.hc.setAttribute("transform","translate("+e+","+f+") scale("+d+")")}this.yb&&this.yb.moveTo(a,b);$d(this)};
function se(a){if(a.Hh){a.Yg=!1;var b=a.Vd.Di();a.Vd.Dg(a.H);b="translate("+b.x+","+b.y+") scale("+a.scale+")";a.Da.setAttribute("transform",b);a.hd.setAttribute("transform",b)}}
function re(a){if(a.Hh&&!a.Yg){a.Yg=!0;var b=a.Da.previousSibling,c=parseInt(L(a).getAttribute("width"),10),d=parseInt(L(a).getAttribute("height"),10),e=jb(a.Da),f=a.Vd,h=a.Da,k=a.hd,l=a.scale;if(f.Z.childNodes.length)throw Error("Already dragging a block.");f.rj=b;h.setAttribute("transform","translate(0, 0) scale("+l+")");k.setAttribute("transform","translate(0, 0) scale("+l+")");f.Z.setAttribute("width",c);f.Z.setAttribute("height",d);f.Z.appendChild(h);f.Z.appendChild(k);f.Z.style.display="block";
a.Vd.Me(e.x,e.y)}}g.Tg=function(){var a=this.jc();return a?a.Ma/this.scale:0};g.Ka=function(a){this.Ef=a;if(this.H)if(this.xa&&this.xa.Xf(a),Dh(this)&&Dh(this).Xf(a),L(this).style.display=a?"block":"none",this.la&&this.la.Ka(a),a){a=Te(this);for(var b=a.length-1;0<=b;b--)a[b].Hf();this.V();this.la&&this.la.position()}else M(!0)};g.V=function(){for(var a=Te(this),b=a.length-1;0<=b;b--)a[b].V(!1);if(this.Na)for(a=this.Na.qe(),b=0;b<a.length;b++)a[b].V(!1);b=this.Ub;b.j.Ff&&b.zc&&b.j.uf().Ob()};
function bi(a){var b=ci;if(a.J&&b.tagName&&!(b.getElementsByTagName("block").length>=(isNaN(a.options.Jf)?Infinity:a.options.Jf-Te(a).length)))if(a.Na&&a.Na.cancel(),"comment"==b.tagName.toLowerCase()){y++;try{var c=ka.so.zi(b),d=parseInt(b.getAttribute("x"),10),e=parseInt(b.getAttribute("y"),10);isNaN(d)||isNaN(e)||(a.u&&(d=-d),c.moveBy(d+50,e+50))}finally{y--}0==y&&ka.qo.Ho(c);c.select()}else{y++;try{var f=pc(b,a),h=parseInt(b.getAttribute("x"),10),k=parseInt(b.getAttribute("y"),10);if(!isNaN(h)&&
!isNaN(k)){a.u&&(h=-h);do{b=!1;var l=Te(a);c=0;for(var m;m=l[c];c++){var n=m.ea();if(1>=Math.abs(h-n.x)&&1>=Math.abs(k-n.y)){b=!0;break}}if(!b){var u=f.Rb(!1);c=0;for(var v;v=u[c];c++)if(v.closest(na,new w(h,k)).connection){b=!0;break}}b&&(h=a.u?h-na:h+na,k+=2*na)}while(b);f.moveBy(h,k)}}finally{y--}0==y&&!f.R&&z(new (B("create"))(f));f.select()}}function Zh(a){(a=a.zd?a.Kj:a)&&!a.Na&&a.la&&Dh(a.la)&&a.la.Vo()}g.Ee=function(a,b){Qh.h.Ee.call(this,a,b);Zh(this)};
g.oe=function(a){Qh.h.oe.call(this,a);Zh(this)};g.Rc=function(a,b,c){a=Qh.h.Rc.call(this,a,b,c);Zh(this);return a};function $h(a){var b=Rc(a.af,Uc);a.ki=[];for(var c=0,d;d=b[c];c++){var e=d.Ko();e&&a.ki.push({component:d,Vm:e})}}function Pf(a,b){for(var c=0,d;d=a.ki[c];c++)if(d.Vm.contains(b.clientX,b.clientY))return d.component;return null}
g.Nf=function(a){var b=Hg(this,a);if(b){if(b.zf)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");b.ta||(b.ta=this);b.Wb=a;b.ji(a)}};g.Dh=function(a){a=nb(a,L(this),qe(this));a.x/=this.scale;a.y/=this.scale};g.zb=function(){return null!=this.Na&&this.Na.zb()};
g.Oa=function(){return this.options.Ja&&!!this.options.Ja.scrollbars||this.options.Ja&&this.options.Ja.Oe||this.options.Ja&&this.options.Ja.fc||this.options.ma&&this.options.ma.Oe||this.options.ma&&this.options.ma.Gl};function ag(a){var b=!!a.xa;return a.Oa()&&(!b||b&&!!a.xa.va)}function bg(a){var b=!!a.xa;return a.Oa()&&(!b||b&&!!a.xa.Aa)}
g.Qn=function(a){if(jg())a.preventDefault(),a.stopPropagation();else{var b=this.options.ma&&this.options.ma.Oe,c=this.options.Ja&&this.options.Ja.Oe;if(b||c){a:switch(a.deltaMode){default:var d=a.deltaX;var e=a.deltaY;break a;case 1:d=40*a.deltaX;e=40*a.deltaY;break a;case 2:d=125*a.deltaX,e=125*a.deltaY}!b||!a.ctrlKey&&c?(b=this.scrollX-d,c=this.scrollY-e,a.shiftKey&&!d&&(b=this.scrollX-e,c=this.scrollY),this.scroll(b,c)):(d=-e/50,e=nb(a,L(this),qe(this)),this.zoom(e.x,e.y,d));a.preventDefault()}}};
g.Ah=function(a){if(!this.options.readOnly&&!this.zd){var b=$g("workspace",{i:this});this.Ym&&this.Ym(b,a);S.show(a,b,this.u)}};function ld(a){if(a.options.ib)ld(a.options.ib);else{md=a;document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{L(a).focus({preventScroll:!0})}catch(b){try{L(a).parentNode.setActive()}catch(c){L(a).parentNode.focus({preventScroll:!0})}}}}
g.zoom=function(a,b,c){c=Math.pow(this.options.ma.Vn,c);var d=this.scale*c;if(this.scale!=d){d>this.options.ma.Kf?c=this.options.ma.Kf/this.scale:d<this.options.ma.Lf&&(c=this.options.ma.Lf/this.scale);var e=this.Da.getCTM(),f=L(this).createSVGPoint();f.x=a;f.y=b;f=f.matrixTransform(e.inverse());a=f.x;b=f.y;e=e.translate(a*(1-c),b*(1-c)).scale(c);this.scrollX=e.e;this.scrollY=e.f;this.setScale(d)}};
g.setScale=function(a){this.options.ma.Kf&&a>this.options.ma.Kf?a=this.options.ma.Kf:this.options.ma.Lf&&a<this.options.ma.Lf&&(a=this.options.ma.Lf);this.scale=a;M(!1);this.O&&(this.O.Uo(),$h(this));this.yb&&this.yb.update(this.scale);a=this.jc();this.scrollX-=a.Va;this.scrollY-=a.eb;a.Jb+=a.Va;a.Kb+=a.eb;this.scroll(this.scrollX,this.scrollY);if(this.xa)if(this.O){var b=this.xa;b.va&&ke(b.va,a);b.Aa&&me(b.Aa,a)}else b=this.xa,b.va&&le(b.va,a),b.Aa&&ne(b.Aa,a)};
g.scroll=function(a,b){M(!0);var c=this.jc();a=Math.min(a,-c.scrollLeft);b=Math.min(b,-c.scrollTop);var d=c.scrollTop+Math.max(0,c.scrollHeight-c.Ta);a=Math.max(a,-(c.scrollLeft+Math.max(0,c.scrollWidth-c.Ma)));b=Math.max(b,-d);this.scrollX=a;this.scrollY=b;this.xa&&this.xa.set(-(a+c.scrollLeft),-(b+c.scrollTop),!1);a+=c.Va;b+=c.eb;this.translate(a,b)};
function Rh(a){var b=this.jc();"number"==typeof a.x&&(this.scrollX=-(b.scrollLeft+(b.scrollWidth-b.Ma)*a.x));"number"==typeof a.y&&(this.scrollY=-(b.scrollTop+(b.scrollHeight-b.Ta)*a.y));this.translate(this.scrollX+b.Va,this.scrollY+b.eb)}g.Pb=function(a){return Qh.h.Pb.call(this,a)};g.$a=function(a){return Qh.h.$a.call(this,a)};g.yg=function(a){this.kg.push(a);Qh.h.yg.call(this,a)};g.vh=function(a){ub(this.kg,a);Qh.h.vh.call(this,a)};g.Hb=function(a){var b=!this.wj&&a;this.wj=a;b&&uc(this)};
g.clear=function(){this.Hb(!1);Qh.h.clear.call(this);this.kg=[];this.Hb(!0)};function di(a,b){if("function"!=typeof b)throw TypeError("Button callbacks must be functions.");a.Gk.CREATE_VARIABLE=b}function Uh(a,b,c){if("function"!=typeof c)throw TypeError("Toolbox category callbacks must be functions.");a.Vl[b]=c}
function Hg(a,b){var c="mousedown"==b.type||"touchstart"==b.type||"pointerdown"==b.type,d=a.Na;return d?c&&d.zf?(console.warn("Tried to start the same gesture twice."),d.cancel(),null):d:c?(a.Na=new Mh(b,a),a.Na):null}function uh(a){a.Na&&a.Na.cancel()};function ei(a,b){"string"==typeof a&&(a=document.getElementById(a)||document.querySelector(a));if(!document.contains(a))throw Error("Error: container is not in current document");b=new Wd(b||{});var c=document.createElement("div");c.className="injectionDiv";c.tabIndex=0;Je(c,"label",t.WORKSPACE_ARIA_LABEL);a.appendChild(c);a=fi(c,b);var d=new Kd(c),e=new gf(c),f=gi(a,b,d,e);hi(f);md=f;ii(f);c.addEventListener("focusin",function(){md=f});return f}
function fi(a,b){a.setAttribute("dir","LTR");var c=b.un,d=b.Fl;if(!Md){Md=!0;var e=Nd.join("\n");Nd.length=0;c&&(c=d.replace(/[\\/]$/,""),e=e.replace(/<<<PATH>>>/g,c),c=document.createElement("style"),c.id="blockly-common-style",c.appendChild(document.createTextNode(e)),document.head.insertBefore(c,document.head.firstChild))}a=D(Ub,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklySvg",tabindex:"0"},
a);c=D(Ib,{},a);e=b.Lk;c=D(Sb,{id:"blocklyGridPattern"+String(Math.random()).substring(2),patternUnits:"userSpaceOnUse"},c);0<e.length&&0<e.spacing?(D(Qb,{stroke:e.colour},c),1<e.length&&D(Qb,{stroke:e.colour},c)):D(Qb,{},c);b.Gi=c;return a}
function gi(a,b,c,d){b.ib=null;b=new Qh(b,c,d);c=b.options;b.scale=c.ma.bo;a.appendChild(b.Ha("blocklyMainBackground"));E(Kh(b),b.oa.Qb());E(Kh(b),b.Ac().Qb());!c.Mk&&c.Ad&&(d=new Wd({parentWorkspace:b,rtl:b.u,oneBasedIndex:b.options.Rn,renderer:b.options.Ol,rendererOverrides:b.options.Pl,move:{scrollbars:!0}}),d.Rd=b.options.Rd,b.O=new (Da(za,b.options,!0))(d),b.O.ik=!1,b.O.mn().Ka(!0),d=b.O.Ha(Ub),cc(d,a));if(c.Pk){if(!ka.Qm)throw Error("Missing require for Blockly.Trashcan");b.Ne=new ka.Qm(b);
d=b.Ne.Ha();b.H.insertBefore(d,b.Da)}if(c.ma&&c.ma.controls){if(!ka.Rm)throw Error("Missing require for Blockly.ZoomControls");b.rg=new ka.Rm(b);c=b.rg.Ha();b.H.appendChild(c)}b.jb.subscribe(a,"workspaceBackgroundColour","background-color");b.translate(0,0);b.Ec.push(ji(b));ii(b);og||(og=document.createElement("div"),og.className="blocklyWidgetDiv",(fd||document.body).appendChild(og));ed();N||(N=document.createElement("div"),N.className="blocklyTooltipDiv",(fd||document.body).appendChild(N));return b}
function ki(a){var b=a.Be;if(!(ag(b.j)&&bg(b.j)||a.zb())){b=Vf(b,!0);for(var c=[].concat(a.kg),d=0,e;e=c[d];d++)Uf(a,b,e)}}
function ji(a){return function(b){var c=a.Be;if(!(ag(c.j)&&bg(c.j)||a.zb()))if(-1!==Ab.indexOf(b.type)){c=Vf(c,!0);var d=null;switch(b.type){case "create":case "move":(d=a.Pb(b.$))&&(d=d.Sb())}if(d){var e=x;A(b.group);Uf(a,c,d)&&!b.group&&console.warn("Moved object in bounds but there was no event group. This may break undo.");null!==e&&A(e)}}else"viewport_change"===b.type&&b.scale>b.Mf&&ki(a)}}
function Uf(a,b,c){var d=sh(c),e=ma(b.top,d.top,b.top+b.height-(d.bottom-d.top))-d.top,f=b.left;b=b.left+b.width-(d.right-d.left);a.u?f=Math.min(b,f):b=Math.max(f,b);return(a=ma(f,d.left,b)-d.left)||e?(c.moveBy(a,e),!0):!1}
function hi(a){var b=a.options,c=L(a);H(c.parentNode,"contextmenu",null,function(e){ib(e)||e.preventDefault()});c=H(window,"resize",null,function(){M(!0);ii(a);ki(a)});a.wh=c;li();if(b.Ad){c=a.la;var d=Dh(a,!0);c?c.na():d&&(d.na(a),d.show(b.Ad),"function"==typeof d.Wn&&d.Wn())}b.Pk&&a.Ne.na();b.ma&&b.ma.controls&&a.rg.na();b.Ja&&b.Ja.scrollbars?(a.xa=new Xd(a,!0===b.Ja.scrollbars||!!b.Ja.scrollbars.Ki,!0===b.Ja.scrollbars||!!b.Ja.scrollbars.vertical),a.xa.resize()):a.xh({x:.5,y:.5});b.wn&&mi(b.Fl,
a)}function li(){la||(H(document,"scroll",null,function(){for(var a=ff(),b=0,c;c=a[b];b++)c.og&&c.og()}),H(document,"keydown",null,ni),Nc(document,"touchend",Gc),Nc(document,"touchcancel",Gc),bb&&H(window,"orientationchange",document,function(){ii(md)}));la=!0}
function mi(a,b){function c(){for(;e.length;)I(e.pop());d.preload()}var d=b.cc;d.load([a+"click.mp3",a+"click.wav",a+"click.ogg"],"click");d.load([a+"disconnect.wav",a+"disconnect.mp3",a+"disconnect.ogg"],"disconnect");d.load([a+"delete.mp3",a+"delete.ogg",a+"delete.wav"],"delete");var e=[];e.push(H(document,"mousemove",null,c,!0));e.push(H(document,"touchstart",null,c,!0))};var Vh={};function oi(a){var b=$e(a,"procedures_defnoreturn").map(function(c){return c.ln()});a=$e(a,"procedures_defreturn").map(function(c){return c.ln()});b.sort(pi);a.sort(pi);return[b,a]}function pi(a,b){return a[0].localeCompare(b[0],void 0,{sensitivity:"base"})}
function Wh(a){function b(f,h){for(var k=0;k<f.length;k++){var l=f[k][0],m=f[k][1],n=G("block");n.setAttribute("type",h);n.setAttribute("gap",16);var u=G("mutation");u.setAttribute("name",l);n.appendChild(u);for(l=0;l<m.length;l++){var v=G("arg");v.setAttribute("name",m[l]);u.appendChild(v)}c.push(n)}}var c=[];if(sf.procedures_defnoreturn){var d=G("block");d.setAttribute("type","procedures_defnoreturn");d.setAttribute("gap",16);var e=G("field");e.setAttribute("name","NAME");e.appendChild(document.createTextNode(t.PROCEDURES_DEFNORETURN_PROCEDURE));
d.appendChild(e);c.push(d)}sf.procedures_defreturn&&(d=G("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),e=G("field"),e.setAttribute("name","NAME"),e.appendChild(document.createTextNode(t.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(e),c.push(d));sf.procedures_ifreturn&&(d=G("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),c.push(d));c.length&&c[c.length-1].setAttribute("gap",24);a=oi(a);b(a[0],"procedures_callnoreturn");b(a[1],"procedures_callreturn");
return c}
function qi(a){for(var b=[],c=$e(a,"procedures_mutatorarg"),d=0,e;e=c[d];d++)b.push(We(e,"NAME"));c=G("xml");d=G("block");d.setAttribute("type","procedures_mutatorarg");e=G("field");e.setAttribute("name","NAME");a:if(b.length)for(var f="",h=14,k="x";;){for(var l=!1,m=0;m<b.length;m++)if(b[m].toLowerCase()==k){l=!0;break}if(!l){b=k;break a}h++;25==h&&(h=0,f=Number(f)+1);k="ijkmnopqrstuvwxyzabcdefgh".charAt(h)+f}else b="x";e.appendChild(document.createTextNode(b));d.appendChild(e);c.appendChild(d);if(b=
Sd(c)){if(!a.options.Ad)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Vd(b)){if(!a.la)throw Error("Existing toolbox has no categories.  Can't change mode.");a.options.Ad=b;a.la.V(b)}else{if(!a.O)throw Error("Existing toolbox has categories.  Can't change mode.");a.options.Ad=b;a.O.show(b)}}else if(a.options.Ad)throw Error("Can't nullify an existing toolbox.");}
function Xh(a){if("bubble_open"==a.type&&"mutator"===a.vo&&a.Ro){a=(Eb[a.cb]||null).Pb(a.$);var b=a.type;if("procedures_defnoreturn"==b||"procedures_defreturn"==b)a=a.Fd.mn(),qi(a),a.Ec.push(ri)}}function ri(a){"create"!=a.type&&"delete"!=a.type&&"change"!=a.type||qi(Eb[a.cb]||null)};function si(){ti=this;this.Fb=Object.create(null);this.ze=Object.create(null)}var ti,rd={Shift:16,Control:17,Alt:18,Meta:91};si.prototype.register=function(a,b){if(this.Fb[a.name]&&!b)throw Error('Shortcut with name "'+a.name+'" already exists.');this.Fb[a.name]=a};
si.prototype.unregister=function(a){if(!this.Fb[a])return console.warn('Keyboard shortcut with name "'+a+'" not found.'),!1;for(var b in this.ze){var c=b,d=this.ze[c],e=d.indexOf(a);-1<e&&(d.splice(e,1),0==d.length&&delete this.ze[c])}delete this.Fb[a];return!0};function U(a,b){var c=ti;a=String(a);var d=c.ze[a];if(d)throw Error('Shortcut with name "'+b+'" collides with shortcuts '+d.toString());c.ze[a]=[b]}
function V(a,b){var c="";if(b){for(var d=qd(),e=0,f;f=b[e];e++)if(0>d.indexOf(f))throw Error(f+" is not a valid modifier key.");for(var h in rd)-1<b.indexOf(rd[h])&&(""!=c&&(c+="+"),c+=h)}""!=c&&a?c=c+"+"+a:a&&(c=a.toString());return c}new si;function Ve(a,b,c,d){this.i=a;this.name=b;this.type=c||"";this.vd=d||qb();z(new (B("var_create"))(this))}Ve.prototype.gb=function(){return this.vd};function ui(a,b){return a.name.localeCompare(b.name,void 0,{sensitivity:"base"})};var Sh={};function Th(a){var b=[],c=document.createElement("button");c.setAttribute("text","%{BKY_NEW_VARIABLE}");c.setAttribute("callbackKey","CREATE_VARIABLE");di(a,function(d){vi(d.Oo())});b.push(c);a=wi(a);return b=b.concat(a)}
function wi(a){a=a.Sg("");var b=[];if(0<a.length){var c=a[a.length-1];if(sf.variables_set){var d=G("block");d.setAttribute("type","variables_set");d.setAttribute("gap",sf.math_change?8:24);d.appendChild(xi(c));b.push(d)}sf.math_change&&(d=G("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",sf.variables_get?20:8),d.appendChild(xi(c)),c=nc('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(c),b.push(d));if(sf.variables_get){a.sort(ui);
c=0;for(var e;e=a[c];c++)d=G("block"),d.setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(xi(e)),b.push(d)}}return b}function vi(a){function b(c){yi(c,function(d){if(d){var e=zi(d,a);if(e){if(""==e.type)var f=t.VARIABLE_ALREADY_EXISTS.replace("%1",e.name);else f=t.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,f=f.replace("%1",e.name).replace("%2",e.type);Xe(f,function(){b(d)})}else a.Rc(d,"")}})}b("")}
function yi(a,b){Ai(a,function(c){c&&(c=c.replace(/[\s\xa0]+/g," ").trim(),c==t.RENAME_VARIABLE||c==t.NEW_VARIABLE)&&(c=null);b(c)})}function zi(a,b){b=b.pa.tf();a=a.toLowerCase();for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a)return d;return null}function xi(a){var b=G("field");b.setAttribute("name","VAR");b.setAttribute("id",a.gb());b.setAttribute("variabletype",a.type);b.appendChild(document.createTextNode(a.name));return b}
function vc(a,b){a=a.tf();var c=[];if(b.length!=a.length)for(var d=0;d<a.length;d++){var e=a[d];-1==b.indexOf(e)&&c.push(e)}return c};var md=null,P=null,Re=[],ci=null,Bi=null,Ci=null,fd=null;function ii(a){for(;a.options.ib;)a=a.options.ib;var b=L(a),c=Hh(a),d=b.parentNode;if(d){var e=d.offsetWidth;d=d.offsetHeight;if(c.width!=e){b.setAttribute("width",e+"px");var f=a;L(f);e&&(f.Uh.width=e)}c.height!=d&&(b.setAttribute("height",d+"px"),b=a,L(b),d&&(b.Uh.height=d));a.resize()}}
function ni(a){var b=md;if(b&&!(ib(a)||b.J&&!b.isVisible()))a:{var c=ti,d="";for(e in rd)a.getModifierState(e)&&(""!=d&&(d+="+"),d+=e);""!=d&&a.keyCode?d=d+"+"+a.keyCode:a.keyCode&&(d=a.keyCode.toString());d=c.ze[d]||[];var e=0;for(var f;f=d[e];e++)if(f=c.Fb[f],(!f.sa||f.sa(b))&&f.ka&&f.ka(b,a,f))break a}}function Di(a){a.i.zd||(A(!0),M(),a.v?a.m(!1,!0):a.m(!0,!0),A(!1))}
function Ei(a){if(a.ye)a=null;else{for(var b=jc(a,!0),c=0,d;d=b.childNodes[c];c++)if("next"==d.nodeName.toLowerCase()){b.removeChild(d);break}c=a.ea();b.setAttribute("x",a.u?-c.x:c.x);b.setAttribute("y",c.y);a={xml:b,source:a.i,oo:vb(a)}}a&&(ci=a.xml,Bi=a.source,Ci=a.oo)}function Fi(){if(!ci)return!1;var a=Bi;a.zd&&(a=a.Kj);return Ci&&bf(a,Ci)?(A(!0),bi(a),A(!1),!0):!1}function M(a){He();ug();kd();var b=!!a;Rc(md.af,Vc).forEach(function(c){c.uo(b)})}function Xe(a,b){alert(a);b&&b()}
function Ye(a,b){b(confirm(a))}function Ai(a,b){b(prompt(t.NEW_VARIABLE_TITLE,a))};var Gi={am:"\u12a0\u121b\u122d\u129b",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",be:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0456","be-tarask":"Tara\u0161kievica",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",bn:"\u09ac\u09be\u0982\u09b2\u09be",br:"Brezhoneg",ca:"Catal\u00e0",cs:"\u010cesky",da:"Dansk",de:"Deutsch",el:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",en:"English",eo:"Esperanto",es:"Espa\u00f1ol",eu:"Euskara",fa:"\u0641\u0627\u0631\u0633\u06cc",
fi:"Suomi",fo:"F\u00f8royskt",fr:"Fran\u00e7ais",gl:"Galego",ha:"Hausa",he:"\u05e2\u05d1\u05e8\u05d9\u05ea",hi:"\u0939\u093f\u0928\u094d\u0926\u0940",hr:"Hrvatski",hu:"Magyar",hy:"\u0570\u0561\u0575\u0565\u0580\u0567\u0576",ia:"Interlingua",id:"Bahasa Indonesia",ig:"As\u1ee5s\u1ee5 Igbo",is:"\u00cdslenska",it:"Italiano",ja:"\u65e5\u672c\u8a9e",kab:"Taqbaylit",kn:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",ko:"\ud55c\uad6d\uc5b4",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ms:"Bahasa Melayu",my:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c",
nb:"Norsk (bokm\u00e5l)",nl:"Nederlands, Vlaams",pl:"Polski",pms:"Piemont\u00e8is",pt:"Portugu\u00eas","pt-br":"Portugu\u00eas Brasileiro",ro:"Rom\u00e2n\u0103",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",sc:"Sardu",sk:"Sloven\u010dina",sl:"Sloven\u0161\u010dina",sq:"Shqip",sr:"\u0421\u0440\u043f\u0441\u043a\u0438","sr-latn":"Srpski",sv:"Svenska",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",ti:"\u1275\u130d\u122d\u129b",tr:"T\u00fcrk\u00e7e",uk:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
ur:"\u0627\u064f\u0631\u062f\u064f\u0648\u202c",vi:"Ti\u1ebfng Vi\u1ec7t",yo:"\u00c8d\u00e8 Yor\u00f9b\u00e1","zh-hans":"\u7b80\u4f53\u4e2d\u6587","zh-hant":"\u6b63\u9ad4\u4e2d\u6587"},Hi=window.BlocklyGamesLang,Ii=window.BlocklyGamesLanguages,Ji=["ar","fa","he","ur"].includes(Hi),Ki=/\.html$/.test(window.location.pathname),W=document.getElementById.bind(document);
function Li(a){try{if(a.lineno||a.colno){var b=Date.now();if(!(Li.bl+1E4>b)){Li.bl=b;var c=new XMLHttpRequest,d="error="+encodeURIComponent(a.error&&a.error.stack||a.message+" "+a.filename+" "+a.lineno+":"+a.colno)+"&amp;url="+encodeURIComponent(window.location);c.open("POST","/errorReporter");c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.send(d);console.log("Error reported.")}}}catch(e){console.log(a.error)}}Li.bl=0;Ki||window.addEventListener("error",Li);
var Mi,Ni=Math,Oi=Ni.floor,Pi=Number,Qi,Ri=window.location.search.match(RegExp("[?&]level=([^&]+)"));Qi=Ri?decodeURIComponent(Ri[1].replace(/\+/g,"%20")):"NaN";var Si=Oi.call(Ni,Pi(Qi));Mi=isNaN(Si)?1:Math.max(1,Math.min(Si,10));
function Ti(a){document.title=X("Games.name",!1)+(a&&" : ")+a;document.dir=Ji?"rtl":"ltr";document.head.parentElement.setAttribute("lang",Hi);if(a=W("languageMenu")){for(var b=[],c=ba(Ii),d=c.next();!d.done;d=c.next())d=d.value,b.push([Gi[d],d]);b.sort(function(e,f){return e[0]>f[0]?1:e[0]<f[0]?-1:0});a.options.length=0;b=ba(b);for(c=b.next();!c.done;c=b.next())d=ba(c.value),c=d.next().value,d=d.next().value,c=new Option(c,d),d===Hi&&(c.selected=!0),a.options.add(c);1>=a.options.length&&(a.style.display=
"none")}for(a=1;10>=a;a++)b=W("level"+a),c=!!Ui(a),b&&c&&(b.className+=" level_done");(a=document.querySelector('meta[name="viewport"]'))&&725>screen.availWidth&&a.setAttribute("content","width=725, initial-scale=.35, user-scalable=no");Ki||setTimeout(Vi,1)}function Ui(a){var b=Wi;try{var c=window.localStorage[b+a]}catch(d){}return c}
function Xi(a,b){if(!a)throw TypeError("Element not found: "+a);"string"===typeof a&&(a=W(a));a.addEventListener("click",b,!0);a.addEventListener("touchend",function(c){c.preventDefault();b(c)},!0)}function X(a,b){a=window.BlocklyGamesMsg[a];void 0===a&&(a="[Unknown message: ${name}]");return b?Yi(a):a}function Yi(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}
function Vi(){function a(c){(a.q=a.q||[]).push(arguments)}window.GoogleAnalyticsObject="GoogleAnalyticsFunction";window.GoogleAnalyticsFunction=a;a.l=1*new Date;var b=document.createElement("script");b.async=1;b.src="//www.google-analytics.com/analytics.js";document.head.appendChild(b);a("create","UA-50448074-1","auto");a("send","pageview")};function Zi(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=b[d];e;)setTimeout(e.Ld.bind(e,a),c),e=xb(e),c+=10}function $i(a,b){if(lc(a))Array.prototype.push.apply(b,wb(a,!1));else{a=ic(a,!1);for(var c=0;c<a.length;c++)$i(a[c],b)}}function aj(a){var b=[];a=a.$a(!0);for(var c=0;c<a.length;c++)$i(a[c],b);return b}function bj(a,b){A(b);var c=a.shift();c&&(c.i?(c.m(!1,!0),setTimeout(bj,10,a,b)):bj(a,b));A(!1)}
Zg.register({Ya:function(){return t.UNDO},sa:function(a){return 0<a.i.Sd.length?"enabled":"disabled"},ka:function(a){df(a.i,!1)},rb:"workspace",id:"undoWorkspace",weight:1});Zg.register({Ya:function(){return t.REDO},sa:function(a){return 0<a.i.Tf.length?"enabled":"disabled"},ka:function(a){df(a.i,!0)},rb:"workspace",id:"redoWorkspace",weight:2});
Zg.register({Ya:function(){return t.CLEAN_UP},sa:function(a){return a.i.Oa()?1<a.i.$a(!1).length?"enabled":"disabled":"hidden"},ka:function(a){a=a.i;a.Hb(!1);A(!0);for(var b=a.$a(!0),c=0,d=0,e;e=b[d];d++)if(e.Oa()){var f=e.ea();e.moveBy(-f.x,c-f.y);rh(e);c=e.ea().y+Nf(e).height+a.oa.D().xg}A(!1);a.Hb(!0)},rb:"workspace",id:"cleanWorkspace",weight:3});
Zg.register({Ya:function(){return t.COLLAPSE_ALL},sa:function(a){if(a.i.options.collapse){a=a.i.$a(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(!c.isCollapsed())return"enabled";c=xb(c)}return"disabled"}return"hidden"},ka:function(a){Zi(!0,a.i.$a(!0))},rb:"workspace",id:"collapseWorkspace",weight:4});
Zg.register({Ya:function(){return t.EXPAND_ALL},sa:function(a){if(a.i.options.collapse){a=a.i.$a(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isCollapsed())return"enabled";c=xb(c)}return"disabled"}return"hidden"},ka:function(a){Zi(!1,a.i.$a(!0))},rb:"workspace",id:"expandWorkspace",weight:5});
Zg.register({Ya:function(a){if(a.i)return a=aj(a.i).length,1==a?t.DELETE_BLOCK:t.DELETE_X_BLOCKS.replace("%1",String(a))},sa:function(a){if(a.i)return 0<aj(a.i).length?"enabled":"disabled"},ka:function(a){if(a.i){uh(a.i);var b=aj(a.i),c=qb();2>b.length?bj(b,c):Ye(t.DELETE_ALL_BLOCKS.replace("%1",b.length),function(d){d&&bj(b,c)})}},rb:"workspace",id:"workspaceDelete",weight:6});
Zg.register({Ya:function(){return t.DUPLICATE_BLOCK},sa:function(a){a=a.block;return!a.Bb&&lc(a)&&a.Oa()?(cf(a.i)?bf(a.i,vb(a)):1)?"enabled":"disabled":"hidden"},ka:function(a){if(a.block){a=a.block;var b=ci,c=Bi;Ei(a);bi(a.i);ci=b;Bi=c}},rb:"block",id:"blockDuplicate",weight:1});
Zg.register({Ya:function(a){return a.block.Mb?t.REMOVE_COMMENT:t.ADD_COMMENT},sa:function(a){a=a.block;return Xa||a.Bb||!a.i.options.Wm||a.isCollapsed()||!a.Ab()?"hidden":"enabled"},ka:function(a){a=a.block;a.Mb?a.He(null):a.He("")},rb:"block",id:"blockComment",weight:2});
Zg.register({Ya:function(a){return vf(a.block)?t.EXTERNAL_INPUTS:t.INLINE_INPUTS},sa:function(a){a=a.block;if(!a.Bb&&a.Oa()&&!a.isCollapsed())for(var b=1;b<a.s.length;b++)if(3!=a.s[b-1].type&&3!=a.s[b].type)return"enabled";return"hidden"},ka:function(a){a.block.Od(!vf(a.block))},rb:"block",id:"blockInline",weight:3});
Zg.register({Ya:function(a){return a.block.isCollapsed()?t.EXPAND_BLOCK:t.COLLAPSE_BLOCK},sa:function(a){a=a.block;return!a.Bb&&a.Oa()&&a.i.options.collapse?"enabled":"hidden"},ka:function(a){a.block.Ld(!a.block.isCollapsed())},rb:"block",id:"blockCollapseExpand",weight:4});
Zg.register({Ya:function(a){return a.block.isEnabled()?t.DISABLE_BLOCK:t.ENABLE_BLOCK},sa:function(a){a=a.block;return!a.Bb&&a.i.options.disable&&a.Ab()?Rg(a)?"disabled":"enabled":"hidden"},ka:function(a){a=a.block;var b=x;b||A(!0);a.Nd(!a.isEnabled());b||A(!1)},rb:"block",id:"blockDisable",weight:5});
Zg.register({Ya:function(a){var b=a.block;a=wb(b,!1).length;(b=xb(b))&&(a-=wb(b,!1).length);return 1==a?t.DELETE_BLOCK:t.DELETE_X_BLOCKS.replace("%1",String(a))},sa:function(a){return!a.block.Bb&&lc(a.block)?"enabled":"hidden"},ka:function(a){A(!0);a.block&&Di(a.block);A(!1)},rb:"block",id:"blockDelete",weight:6});
Zg.register({Ya:function(){return t.HELP},sa:function(a){a=a.block;return("function"==typeof a.Tb?a.Tb():a.Tb)?"enabled":"hidden"},ka:function(a){a.block.showHelp()},rb:"block",id:"blockHelp",weight:7});function Y(a,b){return" "+a+","+b+" "}function cj(a,b){return" "+a+b.join("")}function dj(a,b){return" M "+a+","+b+" "}function Q(a,b){return" m "+a+","+b+" "}function ej(a,b){return" l "+a+","+b+" "}function R(a,b){return" "+a+" "+b+" "}function fj(a,b,c){return"a "+b+" "+b+" "+a+c};function gj(){this.bc=0;this.Jm=3;this.tb=5;this.Yj=8;this.Ua=10;this.dk=this.tb;this.Xe=15;this.ce=5;this.Nh=8;this.Gm=15;this.Lh=4;this.Fm=12;this.qm=16;this.pm=this.Qj=this.Xe;this.ac=8;this.Nm=this.Ue=15;this.bk=0;this.ck=20;this.jm=4;this.Om=this.tb;this.Pm=this.Ua;this.lm=this.tb;this.km=this.Ua;this.Oj=!1;this.Lm=15;this.Mm=100;this.Km=15;this.xg=24;this.sm=14.5;this.rm=this.Xe+11;this.um=2;this.tm=this.xg;this.ak=Q(0,0);this.Cm=12;this.Dm=6;this.Te=11;this.Yd="normal";this.Xd="sans-serif";
this.Uj=this.vg=-1;this.ug=4;this.Rj=16;this.Re=5;this.vm="#fff";this.Kh=!Xa&&!Ya;this.Sj=this.Rj;this.xm=this.wm=this.Tj=!1;this.zm=this.Re;this.Se=12;this.ym="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";
this.uh=String(Math.random()).substring(2);this.si="";this.ui=null;this.Bk="";this.hf=this.xk=this.gi=null;this.Pj="#cc0a0a";this.Wj="#4286f4";this.tg=100;this.ek=5;this.sg=10;this.nm=2;this.om=4;this.Am="#000000";this.Vj=.2;this.$j={Im:1,$d:2}}g=gj.prototype;
g.na=function(){this.Zd=this.Vi();this.$d=this.Wi();this.ae=this.Yi();this.Mh=this.Xi();var a=this.ac;this.wg={width:a,height:a,oj:fj("0 0,0",a,Y(-a,a)),oh:fj("0 0,0",a,Y(a,a))};a=this.ac;this.Ve={Lj:Q(0,a)+fj("0 0,1",a,Y(a,-a)),lo:fj("0 0,1",a,Y(a,a)),Tm:fj("0 0,1",a,Y(-a,a)),Th:fj("0 0,1",a,Y(-a,-a)),Un:a}};
g.$f=function(){this.Bg=Object.create(null);var a=document.createElement("span");a.style.font=this.Yd+" "+(this.Te+"pt ")+this.Xd;a.textContent="Hg";var b=document.createElement("div");b.style.width="1px";b.style.height=0;var c=document.createElement("div");c.style.display="flex";c.style.position="fixed";c.style.top=0;c.style.left=0;c.appendChild(a);c.appendChild(b);document.body.appendChild(c);try{var d={};c.style.alignItems="baseline";d.Lb=b.offsetTop-a.offsetTop;c.style.alignItems="flex-end";d.height=
b.offsetTop-a.offsetTop}finally{document.body.removeChild(c)}a=d;this.vg=a.height;this.Uj=a.Lb};function vh(a,b){var c="auto_"+b;a.Bg[c]||(a.Bg[c]=hj({colourPrimary:b}));return{style:a.Bg[c],name:c}}function qh(a,b){return a.Bg[b||""]||(b&&0==b.indexOf("auto_")?vh(a,b.substring(5)).style:hj({colourPrimary:"#000000"}))}
function hj(a){var b={};a&&pd(b,a);a=yb(b.colourPrimary||"#000");b.od=a.Af;b.colourSecondary?a=yb(b.colourSecondary).Af:(a=b.od,a=Ia("#fff",a,.6)||a);b.Eg=a;b.colourTertiary?a=yb(b.colourTertiary).Af:(a=b.od,a=Ia("#fff",a,.3)||a);b.je=a;b.sd=b.hat||"";return b}g.m=function(){this.ui&&F(this.ui);this.gi&&F(this.gi);this.xk&&F(this.xk);this.hf=null};g.Vi=function(){var a=this.Cm,b=this.Dm;return{height:a,width:b,path:" l"+[Y(b,a/4),Y(2*-b,a/2),Y(b,a/4)].join("")}};
g.Yi=function(){var a=this.Lm,b=this.Mm;return{height:a,width:b,path:cj("c",[Y(30,-a),Y(70,-a),Y(b,0)])}};g.Xi=function(){function a(f){f=f?-1:1;var h=-f,k=c/2;return cj("c",[Y(0,f*(k+2.5)),Y(-b,h*(k+.5)),Y(-b,f*k)])+cj("s",[Y(b,2.5*h),Y(b,f*k)])}var b=this.Nh,c=this.Xe,d=a(!0),e=a(!1);return{type:this.$j.Im,width:b,height:c,Eb:e,Qf:d}};
g.Wi=function(){function a(h){return" l"+[Y(h*d,c),Y(3*h,0),Y(h*d,-c)].join("")}var b=this.Gm,c=this.Lh,d=(b-3)/2,e=a(1),f=a(-1);return{type:this.$j.$d,width:b,height:c,cd:e,El:f}};function Jf(a,b){switch(b.type){case 1:case 2:return a.Mh;case 4:case 3:return a.$d;default:throw Error("Unknown connection type");}}
g.Ha=function(a,b,c){c=this.Ai(c);b="blockly-renderer-style-"+b;this.hf=document.getElementById(b);c=c.join("\n");if(this.hf)this.hf.firstChild.textContent=c;else{var d=document.createElement("style");d.id=b;d.appendChild(document.createTextNode(c));document.head.insertBefore(d,document.head.firstChild);this.hf=d}a=D(Ib,{},a);b=D(Nb,{id:"blocklyEmbossFilter"+this.uh},a);D(Kb,{"in":"SourceAlpha",stdDeviation:1,result:"blur"},b);c=D(Mb,{"in":"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,
"lighting-color":"white",result:"specOut"},b);D(Lb,{x:-5E3,y:-1E4,z:2E4},c);D(Jb,{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},b);D(Jb,{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},b);this.si=b.id;this.ui=b;a=D(Sb,{id:"blocklyDisabledPattern"+this.uh,patternUnits:"userSpaceOnUse",width:10,height:10},a);D(Tb,{width:10,height:10,fill:"#aaa"},a);D(Rb,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a);this.Bk=a.id;this.gi=a};
g.Ai=function(a){return[a+" .blocklyText, ",a+" .blocklyFlyoutLabelText {","font: "+this.Yd+" "+this.Te+"pt "+this.Xd+";","}",a+" .blocklyText {","fill: #fff;","}",a+" .blocklyNonEditableText>rect,",a+" .blocklyEditableText>rect {","fill: "+this.vm+";","fill-opacity: .6;","stroke: none;","}",a+" .blocklyNonEditableText>text,",a+" .blocklyEditableText>text {","fill: #000;","}",a+" .blocklyFlyoutLabelText {","fill: #000;","}",a+" .blocklyText.blocklyBubbleText {","fill: #000;","}",a+" .blocklyEditableText:not(.editing):hover>rect {",
"stroke: #fff;","stroke-width: 2;","}",a+" .blocklyHtmlInput {","font-family: "+this.Xd+";","font-weight: "+this.Yd+";","}",a+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",a+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",a+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",a+" .blocklyReplaceable .blocklyPathLight,",a+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",a+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.Vj+
";","stroke: none;","}"]};function ij(a){this.ge=this.N=this.type=this.height=this.width=0;this.g=a;this.Db=this.g.Ue};function jj(a,b){jj.h.constructor.call(this,a);this.Wa=b;this.shape=Jf(this.g,b);this.yd=!!this.shape.isDynamic;this.type|=1024}K(jj,ij);function kj(a,b){kj.h.constructor.call(this,a,b);this.type|=8192;this.height=this.yd?0:this.shape.height;this.Ib=this.width=this.yd?0:this.shape.width;this.pb=this.g.ce;this.df=0}K(kj,jj);function lj(a,b){lj.h.constructor.call(this,a,b);this.type|=2048;this.height=this.shape.height;this.width=this.shape.width}K(lj,jj);
function mj(a,b){mj.h.constructor.call(this,a,b);this.type|=4096;this.height=this.shape.height;this.width=this.shape.width}K(mj,jj);function nj(a,b){nj.h.constructor.call(this,a,b.connection);this.type|=128;this.input=b;this.align=b.align;(this.Qc=b.connection&&b.connection.I()?b.connection.I():null)?(a=Nf(this.Qc),this.cf=a.width,this.Gg=a.height):this.Gg=this.cf=0;this.pb=this.df=0}K(nj,jj);
function oj(a,b){oj.h.constructor.call(this,a,b);this.type|=256;this.Qc?(this.width=this.cf,this.height=this.Gg):(this.height=this.g.rm,this.width=this.g.sm);this.ke=this.yd?this.shape.height(this.height):this.shape.height;this.ec=this.yd?this.shape.width(this.height):this.shape.width;this.Qc||(this.width+=this.ec*(this.yd?2:1));this.pb=this.yd?this.shape.pb(this.ke):this.g.ce;this.df=this.yd?this.shape.df(this.ec):0}K(oj,nj);
function pj(a,b){pj.h.constructor.call(this,a,b);this.type|=512;this.height=this.Qc?this.Gg+this.g.bk:this.g.tm;this.width=this.g.Nm+this.shape.width}K(pj,nj);function qj(a,b){qj.h.constructor.call(this,a,b);this.type|=64;this.height=this.Qc?this.Gg-this.g.ce-this.g.tb:this.shape.height;this.width=this.shape.width+this.g.um;this.pb=this.g.ce;this.ke=this.shape.height;this.ec=this.shape.width}K(qj,nj);function rj(a,b){rj.h.constructor.call(this,a);this.icon=b;this.isVisible=b.isVisible();this.type|=4;a=b.Lo();this.height=a.height;this.width=a.width}K(rj,ij);function sj(a){sj.h.constructor.call(this,a);this.type|=524288;this.height=this.g.Zd.height;this.width=this.g.Zd.width}K(sj,ij);function tj(a,b){tj.h.constructor.call(this,a);this.Ek=b;this.Ab=b.Qe;this.hn=b.Jk();this.type|=1;a=this.Ek.getSize();this.height=a.height;this.width=a.width}K(tj,ij);
function uj(a){uj.h.constructor.call(this,a);this.type|=2;this.height=this.g.ae.height;this.width=this.g.ae.width;this.fe=this.height}K(uj,ij);function vj(a,b){vj.h.constructor.call(this,a);this.type=(b&&"left"!=b?131072:32768)|16384;this.width=this.height=this.g.bc}K(vj,ij);function wj(a,b){wj.h.constructor.call(this,a);this.type=(b&&"left"!=b?262144:65536)|16384;this.width=this.g.ac;this.height=this.g.ac/2}K(wj,ij);
function xj(a,b){xj.h.constructor.call(this,a);this.type|=40;this.width=b;this.height=this.g.Km}K(xj,ij);function yj(a){this.type=1048576;this.elements=[];this.N=this.Ca=this.Zb=this.minWidth=this.minHeight=this.width=this.height=0;this.Nk=this.ue=this.Hi=this.wa=this.Vc=!1;this.g=a;this.Db=this.g.Ue;this.align=null}yj.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.");};function zj(a){for(var b=a.elements.length-1,c;c=a.elements[b];b--)if(c.type&128)return c;return null}yj.prototype.Fh=function(){return!0};yj.prototype.pf=function(){return!0};
function Aj(a){Aj.h.constructor.call(this,a);this.type|=2097152;this.fe=this.vc=0;this.vn=!1;this.connection=null}K(Aj,yj);Aj.prototype.Ii=function(a){var b=(a.sd?"cap"===a.sd:this.g.Oj)&&!a.v&&!a.B,c=a.B&&a.B.I();return!!a.v||b||(c?xb(c)==a:!1)};
Aj.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&2?c=Math.max(c,e.fe):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.vc=this.fe=c;this.Zb=this.width};Aj.prototype.Fh=function(){return!1};Aj.prototype.pf=function(){return!1};function Bj(a){Bj.h.constructor.call(this,a);this.type|=4194304;this.Ok=!1;this.connection=null;this.Lb=this.kf=0}K(Bj,yj);
Bj.prototype.Ii=function(a){return!!a.v||!!xb(a)};Bj.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&4096?c=Math.max(c,e.height):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.kf=c;this.Zb=this.width};Bj.prototype.Fh=function(){return!1};Bj.prototype.pf=function(){return!1};
function Cj(a,b,c){Cj.h.constructor.call(this,a);this.type|=24;this.width=c;this.height=b;this.Hk=!1;this.Zb=0;this.elements=[new xj(this.g,c)]}K(Cj,yj);Cj.prototype.measure=function(){};function Dj(a){Dj.h.constructor.call(this,a);this.type|=8388608;this.tk=0}K(Dj,yj);
Dj.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var a=0,b=0,c;c=this.elements[b];b++)this.width+=c.width,c.type&128&&(c.type&512?a+=c.cf:c.type&64&&0!=c.cf&&(a+=c.cf-c.ec)),c.type&8||(this.height=Math.max(this.height,c.height));this.tk=a;this.Zb=this.width+a};Dj.prototype.pf=function(){return!this.Vc&&!this.wa};function Ej(a,b){this.U=b;this.oa=a;this.g=this.oa.D();this.v=b.v?new kj(this.g,b.v):null;this.xe=vf(b)&&!b.isCollapsed();this.isCollapsed=b.isCollapsed();this.Cb=b.Cb();this.u=b.u;this.gd=this.width=this.Pe=this.height=0;this.rows=[];this.Wk=[];this.Rk=[];this.za=new Aj(this.g);this.aa=new Bj(this.g);this.Eh=this.Ib=0}g=Ej.prototype;
g.measure=function(){var a=!!this.U.B,b=(this.U.sd?"cap"===this.U.sd:this.g.Oj)&&!this.v&&!a,c=this.za.Ii(this.U)?vj:wj;this.za.elements.push(new c(this.g));b?(a=new uj(this.g),this.za.elements.push(a),this.za.vc=a.fe):a&&(this.za.vn=!0,this.za.connection=new lj(this.g,this.U.B),this.za.elements.push(this.za.connection));this.U.s.length&&3==this.U.s[0].type&&!this.U.isCollapsed()?this.za.minHeight=this.g.Pm:this.za.minHeight=this.g.Om;c=vj;this.za.elements.push(new c(this.g,"right"));this.rows.push(this.za);
a=new Dj(this.g);this.Wk.push(a);c=Lf(this.U);b=0;for(var d;d=c[b];b++){var e=new rj(this.g,d);this.isCollapsed&&d.Bo?this.Rk.push(e):a.elements.push(e)}d=null;for(b=0;c=this.U.s[b];b++)if(c.isVisible()){!d||3!=c.type&&3!=d.type&&(1!=c.type&&5!=c.type||this.xe)||(this.rows.push(a),a=new Dj(this.g),this.Wk.push(a));for(d=0;e=c.Y[d];d++)a.elements.push(new tj(this.g,e,c));this.hk(c,a);d=c}this.isCollapsed&&(a.Nk=!0,a.elements.push(new sj(this.g)));(a.elements.length||a.ue)&&this.rows.push(a);this.pj();
this.rows.push(this.aa);this.gk();a=this.rows;this.rows=[];for(b=0;b<a.length;b++)if(this.rows.push(a[b]),b!=a.length-1){c=this.rows;d=c.push;e=a[b];var f=a[b+1],h=new Cj(this.g,this.Kk(e,f),this.width-this.Ib);e.wa&&(h.Hk=!0);f.wa&&(h.To=!0);d.call(c,h)}for(d=c=b=a=0;e=this.rows[d];d++)e.measure(),b=Math.max(b,e.width),e.wa&&(a=Math.max(a,e.width-zj(e).width)),c=Math.max(c,e.Zb);this.gd=a;this.width=b;for(d=0;e=this.rows[d];d++)e.wa&&(e.gd=this.gd);this.Pe=Math.max(b,c);this.v&&(this.Ib=this.v.width,
this.width+=this.v.width,this.Pe+=this.v.width);this.Oh();this.Fk()};g.pj=function(){this.aa.Ok=!!this.U.F;this.aa.minHeight=this.U.s.length&&3==this.U.s[this.U.s.length-1].type?this.g.km:this.g.lm;this.aa.Ii(this.U)?this.aa.elements.push(new vj(this.g)):this.aa.elements.push(new wj(this.g));this.aa.Ok&&(this.aa.connection=new mj(this.g,this.U.F),this.aa.elements.push(this.aa.connection));this.aa.elements.push(new vj(this.g,"right"))};
g.hk=function(a,b){this.xe&&1==a.type?(b.elements.push(new oj(this.g,a)),b.Hi=!0):3==a.type?(b.elements.push(new pj(this.g,a)),b.wa=!0):1==a.type?(b.elements.push(new qj(this.g,a)),b.Vc=!0):5==a.type&&(b.minHeight=Math.max(b.minHeight,a.A()&&a.A().R?this.g.pm:this.g.Qj),b.ue=!0);null==b.align&&(b.align=a.align)};
g.gk=function(){for(var a=0,b;b=this.rows[a];a++){var c=b.elements;b.elements=[];b.Fh()&&b.elements.push(new xj(this.g,this.qd(null,c[0])));if(c.length){for(var d=0;d<c.length-1;d++)b.elements.push(c[d]),b.elements.push(new xj(this.g,this.qd(c[d],c[d+1])));b.elements.push(c[c.length-1]);b.pf()&&b.elements.push(new xj(this.g,this.qd(c[c.length-1],null)))}}};
g.qd=function(a,b){if(!a&&b&&b.type&512)return this.g.ck;if(a&&a.type&128&&!b){if(a.type&64)return this.g.bc;if(a.type&256)return this.g.Ua;if(a.type&512)return this.g.bc}return a&&a.type&32768&&b&&(b.type&2048||b.type&4096)?b.Db:a&&a.type&65536&&b&&(b.type&2048||b.type&4096)?b.Db-this.g.ac:this.g.tb};g.Oh=function(){for(var a=0,b;b=this.rows[a];a++)if(b.wa)Fj(this,b);else{var c=this.vf(b)-b.width;0<c&&Gj(b,c);b.type&6291456&&(b.Zb=b.width)}};g.vf=function(){return this.width-this.Ib};
function Gj(a,b){a:{var c=0;for(var d;d=a.elements[c];c++)if(d.type&8){c=d;break a}c=null}a:{d=a.elements.length-1;for(var e;e=a.elements[d];d--)if(e.type&8){d=e;break a}d=null}if(a.Vc||a.wa)a.Zb+=b;-1==a.align?d.width+=b:0==a.align?(c.width+=b/2,d.width+=b/2):1==a.align?c.width+=b:d.width+=b;a.width+=b}function Fj(a,b){var c=zj(b),d=b.width-c.width,e=a.gd;d=e-d;0<d&&Gj(b,d);d=b.width;e=a.vf(b);c.width+=e-d;c.height=Math.max(c.height,b.height);b.width+=e-d;b.Zb=Math.max(b.width,a.gd+b.tk)}g.Kk=function(){return this.g.tb};
g.Ik=function(a,b){return b.type&8?a.Ca+b.height/2:a.type&4194304?(a=a.Ca+a.height-a.kf,b.type&4096?a+b.height/2:a-b.height/2):a.type&2097152?b.type&2?a.vc-b.height/2:a.vc+b.height/2:a.Ca+a.height/2};function Hj(a,b){for(var c=b.N,d=0,e;e=b.elements[d];d++)e.type&8&&(e.height=b.height),e.N=c,e.ge=a.Ik(b,e),c+=e.width}
g.Fk=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++)d.Ca=b,d.N=this.Ib,b+=d.height,a=Math.max(a,d.Zb),Hj(this,d);this.v&&this.U.F&&this.U.F.isConnected()&&(a=Math.max(a,Nf(this.U.F.I()).width));this.Pe=a+this.Ib;this.height=b;this.Eh=this.za.vc;this.aa.Lb=b-this.aa.kf};function Ij(a,b){this.U=a;this.G=b;a.ea();this.Xg=this.S="";this.g=b.oa.D()}g=Ij.prototype;g.Ob=function(){Jj(this);Kj(this);Lj(this);this.U.ga.Cj(this.S+"\n"+this.Xg);this.G.u&&this.U.ga.yi();Mj(this)};function Mj(a){a.U.height=a.G.height;a.U.width=a.G.Pe}function Jj(a){for(var b=0,c;c=a.G.Rk[b];b++)c.icon.zn.setAttribute("display","none")}function Kj(a){a.pi();for(var b=1;b<a.G.rows.length-1;b++){var c=a.G.rows[b];c.Nk?a.mf(c):c.wa?a.oi(c):c.Vc?a.ri(c):a.Ck(c)}a.li();a.ni()}
g.pi=function(){var a=this.G.za,b=a.elements,c=this.G.za;if(c.connection){var d=c.N+c.Db;ih(c.connection.Wa,this.G.u?-d:d,0)}this.S+=Q(a.N,this.G.Eh);for(c=0;d=b[c];c++)d.type&65536?this.S+=this.g.Ve.Lj:d.type&262144?this.S+=this.g.Ve.lo:d.type&2048?this.S+=d.shape.cd:d.type&2?this.S+=this.g.ae.path:d.type&8&&(this.S+=R("h",d.width));this.S+=R("v",a.height)};g.mf=function(a){this.S+=this.g.Zd.path+R("v",a.height-this.g.Zd.height)};
g.ri=function(a){var b=zj(a);this.Jl(a);var c="function"==typeof b.shape.Eb?b.shape.Eb(b.height):b.shape.Eb;this.S+=R("H",b.N+b.width)+c+R("v",a.height-b.ke)};g.oi=function(a){var b=zj(a);this.S+=R("H",b.N+b.Db+b.shape.width)+(b.shape.El+R("h",-(b.Db-this.g.wg.width))+this.g.wg.oj)+R("v",a.height-2*this.g.wg.height)+this.g.wg.oh+R("H",a.N+a.width);this.Ml(a)};g.Ck=function(a){this.S+=R("V",a.Ca+a.height)};
g.li=function(){var a=this.G.aa,b=a.elements;this.Ll();for(var c=0,d="",e=b.length-1,f;f=b[e];e--)f.type&4096?d+=f.shape.El:f.type&32768?d+=R("H",a.N):f.type&65536?d+=this.g.Ve.Th:f.type&262144?(d+=this.g.Ve.Tm,c=this.g.Ve.Un):f.type&8&&(d+=R("h",-1*f.width));this.S+=R("V",a.Lb-c);this.S+=d};
g.ni=function(){var a=this.G.v;if(this.G.v){var b=this.G.Ib+this.G.v.df;ih(this.U.v,this.G.u?-b:b,this.G.v.pb)}a&&(b=a.pb+a.height,a="function"==typeof a.shape.Qf?a.shape.Qf(a.height):a.shape.Qf,this.S+=R("V",b)+a);this.S+="z"};
function Lj(a){for(var b=0,c;c=a.G.rows[b];b++)for(var d=0,e;e=c.elements[d];d++)if(e.type&256)a.mi(e);else if(e.type&4||e.type&1){var f=a;if(e.type&1)var h=e.Ek.P();else e.type&4&&(h=e.icon.zn);var k=e.ge-e.height/2,l=e.N,m="";f.G.u&&(l=-(l+e.width),e.hn&&(l+=e.width,m="scale(-1 1)"));e.type&4?(h.setAttribute("display","block"),h.setAttribute("transform","translate("+l+","+k+")"),e.icon.Xm()):h.setAttribute("transform","translate("+l+","+k+")"+m);f.G.Cb&&h.setAttribute("display","none")}}
g.mi=function(a){var b=a.height,c=a.pb;this.Xg+=dj(a.N+a.ec,a.ge-b/2)+R("v",c)+a.shape.Eb+R("v",b-(a.ke+c))+R("h",a.width-a.ec)+R("v",-b)+"z";this.Kl(a)};g.Kl=function(a){var b=a.ge-a.height/2;if(a.Wa){var c=a.N+a.ec+a.df;this.G.u&&(c*=-1);ih(a.Wa,c,b+a.pb)}};g.Ml=function(a){var b=zj(a);if(b.Wa){var c=a.N+a.gd+b.Db;this.G.u&&(c*=-1);ih(b.Wa,c,a.Ca)}};g.Jl=function(a){var b=zj(a);if(b.Wa){var c=a.N+a.width;this.G.u&&(c*=-1);ih(b.Wa,c,a.Ca)}};
g.Ll=function(){var a=this.G.aa;if(a.connection){var b=a.connection,c=b.N;ih(b.Wa,this.G.u?-c:c,a.Lb)}};function Nj(a,b,c,d){var e=a?a.i.id:void 0;d&&"workspace"==d.getType()&&(e=d.M.id);Nj.h.constructor.call(this,e);this.$=a?a.id:null;this.wl=c;this.rl=d;this.nc=b}K(Nj,Ed);Nj.prototype.type="marker_move";Nj.prototype.T=function(){var a=Nj.h.T.call(this);a.isCursor=this.nc;a.blockId=this.$;a.oldNode=this.wl;a.newNode=this.rl;return a};Nj.prototype.L=function(a){Nj.h.L.call(this,a);this.nc=a.isCursor;this.$=a.blockId;this.wl=a.oldNode;this.rl=a.newNode};q(p,"marker_move",Nj);function ai(a,b,c){this.j=a;this.$i=c;this.Pf=null;this.g=b;this.me=null;a=this.nc()?this.g.Pj:this.g.Wj;this.vb=c.Yh||a}g=ai.prototype;g.P=function(){return this.H};g.wf=function(){return this.$i};g.nc=function(){return"cursor"==this.$i.type};
g.Ha=function(){var a=this.nc()?"blocklyCursor":"blocklyMarker";this.H=D(Ob,{"class":a},null);this.Gc=D(Ob,{width:this.g.tg,height:this.g.ek},this.H);this.Zc=D(Tb,{width:this.g.tg,height:this.g.ek},this.Gc);this.Ed=D(Tb,{"class":"blocklyVerticalMarker",rx:10,ry:10},this.Gc);this.Dd=D(Rb,{transform:""},this.Gc);this.Fc=D(Rb,{transform:"",fill:"none","stroke-width":this.g.om},this.Gc);this.Bc();this.nc()&&(a={attributeType:"XML",attributeName:"fill",dur:"1s",values:this.vb+";transparent;transparent;",
repeatCount:"indefinite"},D(Gb,a,this.Zc),D(Gb,a,this.Dd),a.attributeName="stroke",D(Gb,a,this.Fc));return this.H};function Oj(a,b){a.nc()?(a.Pf&&a.Pf.Jc(null),b.Jc(a.P())):(a.Pf&&a.Pf.fd(null),b.fd(a.P()));a.Pf=b}
g.Ob=function(a,b){if(b){this.g=this.j.oa.D();var c=this.nc()?this.g.Pj:this.g.Wj;this.vb=this.$i.Yh||c;this.Zc.setAttribute("fill",this.vb);this.Ed.setAttribute("stroke",this.vb);this.Dd.setAttribute("fill",this.vb);this.Fc.setAttribute("stroke",this.vb);this.nc()&&(c=this.vb+";transparent;transparent;",this.Zc.firstChild.setAttribute("values",c),this.Dd.firstChild.setAttribute("values",c),this.Fc.firstChild.setAttribute("values",c));c=b.M.type;if("block"==b.getType())Pj(this,b);else if("output"==
b.getType())Pj(this,b);else if(1==c){var d=b.M;c=d.A();var e=d.Id.x,f=d.Id.y;d=dj(0,0)+Jf(this.g,d).Eb;this.Dd.setAttribute("d",d);this.Dd.setAttribute("transform","translate("+e+","+f+")"+(this.j.u?" scale(-1 1)":""));this.me=this.Dd;Oj(this,c);Qj(this)}else if(3==c)f=b.M,c=f.A(),e=0,f=f.Id.y,d=Nf(c).width,this.j.u&&(e=-d),Rj(this,e,f,d),Oj(this,c),Qj(this);else if("previous"==b.getType())Pj(this,b);else if("field"==b.getType())c=b.M,e=c.getSize().width,f=c.getSize().height,Sj(this,0,0,e,f),Oj(this,
c),Qj(this);else if("workspace"==b.getType())e=b.gm,c=e.x,e=e.y,this.j.u&&(c-=this.g.tg),Rj(this,c,e,this.g.tg),Oj(this,this.j),Qj(this);else if("stack"==b.getType()){c=b.M;f=Nf(c);e=f.width+this.g.sg;f=f.height+this.g.sg;var h=d=-this.g.sg/2,k=-this.g.sg/2;this.j.u&&(h=-(e+d));Sj(this,h,k,e,f);Oj(this,c);Qj(this)}c=b.A();a=new (B("marker_move"))(c,this.nc(),a,b);z(a);a=this.me.childNodes[0];void 0!==a&&a.beginElement&&a.beginElement()}else this.Bc()};
function Pj(a,b){b=b.A();var c=b.width,d=b.height,e=.75*d,f=a.g.nm;if(b.B){var h=Jf(a.g,b.B);a.Fc.setAttribute("d",Q(-f,e)+R("V",-f)+R("H",a.g.Ue)+h.cd+R("H",c+2*f)+R("V",e))}else b.v?(h=Jf(a.g,b.v),a.Fc.setAttribute("d",Q(c,0)+R("h",-(c-h.width))+R("v",a.g.ce)+h.Eb+R("V",d)+R("H",c))):a.Fc.setAttribute("d",Q(-f,e)+R("V",-f)+R("H",c+2*f)+R("V",e));a.j.u&&a.sf(a.Fc);a.me=a.Fc;Oj(a,b);Qj(a)}function Qj(a){a.Bc();a.me.style.display=""}
function Rj(a,b,c,d){a.Zc.setAttribute("x",b);a.Zc.setAttribute("y",c);a.Zc.setAttribute("width",d);a.me=a.Zc}function Sj(a,b,c,d,e){a.Ed.setAttribute("x",b);a.Ed.setAttribute("y",c);a.Ed.setAttribute("width",d);a.Ed.setAttribute("height",e);a.me=a.Ed}g.sf=function(a){a.setAttribute("transform","scale(-1 1)")};g.Bc=function(){this.Zc.style.display="none";this.Ed.style.display="none";this.Dd.style.display="none";this.Fc.style.display="none"};g.m=function(){this.H&&F(this.H)};function Tj(a,b,c){this.ef=c;this.tc=a;this.ya=D(Rb,{"class":"blocklyPath"},this.tc);this.style=b;this.Zi=this.jf=null}g=Tj.prototype;g.Cj=function(a){this.ya.setAttribute("d",a)};g.yi=function(){this.ya.setAttribute("transform","scale(-1 1)")};g.Jc=function(a){a?(this.tc.appendChild(a),this.jf=a):this.jf=null};g.fd=function(a){a?(this.jf?this.tc.insertBefore(a,this.jf):this.tc.appendChild(a),this.Zi=a):this.Zi=null};
g.Ga=function(a){this.ya.setAttribute("stroke",this.style.je);this.ya.setAttribute("fill",this.style.od);this.Zl(a.R);this.Mj(!a.isEnabled()||Rg(a))};g.Ie=function(a){this.style=a};function If(a,b,c){c?E(a.tc,b):ac(a.tc,b)}g.Yl=function(a){a?this.ya.setAttribute("filter","url(#"+this.ef.si+")"):this.ya.setAttribute("filter","none")};g.Zl=function(a){a&&(this.ya.setAttribute("stroke","none"),this.ya.setAttribute("fill",this.style.Eg))};
g.Mj=function(a){If(this,"blocklyDisabled",a);a&&this.ya.setAttribute("fill","url(#"+this.ef.Bk+")")};function fh(a,b){If(a,"blocklySelected",b)};function Uj(a){this.name=a;this.mj=this.g=null}g=Uj.prototype;g.Qb=function(){return this.name+"-renderer"};g.na=function(a,b){this.g=this.Ui();b&&(this.mj=b,pd(this.g,b));this.g.$f(a);this.g.na()};g.Ha=function(a,b){this.g.Ha(a,this.name+"-"+b.name,"."+this.Qb()+"."+b.Qb())};g.sj=function(a,b){var c=this.D();c.m();this.g=this.Ui();this.mj&&pd(this.g,this.mj);this.g.uh=c.uh;this.g.$f(b);this.g.na();this.Ha(a,b)};g.m=function(){this.g&&this.g.m()};g.Ui=function(){return new gj};
g.jl=function(a){return new Ej(this,a)};g.hl=function(a,b){return new Ij(a,b)};g.il=function(a,b){return new Tj(a,b,this.g)};g.D=function(){return this.g};g.V=function(a){var b=this.jl(a);b.measure();this.hl(a,b).Ob()};function Vj(){Vj.h.constructor.call(this);this.Kh=!1;this.Ea=1;this.Em=30;this.bk=-this.Lh/2}K(Vj,gj);Vj.prototype.Ai=function(a){return Vj.h.Ai.call(this,a).concat([a+" .blocklyInsertionMarker>.blocklyPathLight,",a+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.Vj+";","stroke: none;","}"])};function Wj(a){this.G=a;this.Bf=this.C="";this.Fa=this.G.u;a=a.oa;this.g=a.D();this.qb=a.qb;this.hb=this.qb.OFFSET;this.lj=this.qb.Hm;this.we=this.qb.Bm;this.Sf=this.qb.Mh;this.Hn=this.qb.$d;this.ao=this.qb.ae;this.al=this.qb.Zd}Wj.prototype.mf=function(a){this.G.u&&(this.C+=this.al.cd+R("v",a.height-this.al.height-this.hb))};function Xj(a,b){var c=b.N+b.width-a.hb;b.Hk&&(a.C+=R("H",c));a.Fa&&(a.C+=R("H",c),b.height>a.hb&&(a.C+=R("V",b.Ca+b.height-a.hb)))};function Yj(a,b){Yj.h.constructor.call(this,a,b);this.Qc&&(this.width+=this.g.Ea,this.height+=this.g.Ea)}K(Yj,oj);function Zj(a,b){Zj.h.constructor.call(this,a,b);this.Qc&&(this.height+=this.g.Ea)}K(Zj,pj);function ak(a,b){ak.h.constructor.call(this,a,b)}K(ak,Ej);g=ak.prototype;g.pj=function(){ak.h.pj.call(this);this.U.s.length&&3==this.U.s[this.U.s.length-1].type||(this.aa.minHeight=this.g.tb-this.g.Ea)};g.hk=function(a,b){this.xe&&1==a.type?(b.elements.push(new Yj(this.g,a)),b.Hi=!0):3==a.type?(b.elements.push(new Zj(this.g,a)),b.wa=!0):1==a.type?(b.elements.push(new qj(this.g,a)),b.Vc=!0):5==a.type&&(b.minHeight=Math.max(b.minHeight,this.g.Qj),b.ue=!0);this.xe||null!=b.align||(b.align=a.align)};
g.gk=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.Vc&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.Fh()&&c.elements.push(new xj(this.g,this.qd(null,d[0])));if(d.length){for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.qd(d[e],d[e+1]);c.elements.push(new xj(this.g,f))}c.elements.push(d[d.length-1]);c.pf()&&(f=this.qd(d[d.length-1],null),a&&c.ue&&(f+=this.g.Nh),c.elements.push(new xj(this.g,f)))}}};
g.qd=function(a,b){if(!a)return b&&b.type&1&&b.Ab?this.g.tb:b&&b.type&256?this.g.Yj:b&&b.type&512?this.g.ck:this.g.Ua;if(!(a.type&128)&&(!b||b.type&512))return a.type&1&&a.Ab?this.g.tb:a.type&4?2*this.g.Ua+1:a.type&2?this.g.bc:a.type&6144?this.g.Ua:a.type&65536?this.g.Fm:a.type&524288?this.g.bc:this.g.Ua;if(a.type&128&&!b){if(a.type&64)return this.g.bc;if(a.type&256)return this.g.Ua;if(a.type&512)return this.g.bc}if(!(a.type&128)&&b&&b.type&128){if(a.type&1&&a.Ab){if(b.type&256||b.type&64)return this.g.Jm}else{if(b.type&
256||b.type&64)return this.g.Yj;if(b.type&512)return this.g.Ua}return this.g.Ua-1}if(a.type&4&&b&&!(b.type&128))return this.g.Ua;if(a.type&256&&b&&b.type&1)return b.Ab?this.g.tb:this.g.Ua;if(a.type&32768&&b){if(b.type&2)return this.g.bc;if(b.type&2048)return b.Db;if(b.type&4096)return a=(this.u?1:-1)*this.g.Ea/2,b.Db+a}if(a.type&65536&&b){if(b.type&2048)return b.Db-this.g.ac;if(b.type&4096)return a=(this.u?1:-1)*this.g.Ea/2,b.Db-this.g.ac+a}return a.type&1&&b&&b.type&1&&a.Ab==b.Ab||b&&b.type&524288?
this.g.Ua:this.g.tb};g.Kk=function(a,b){return a.type&2097152&&b.type&4194304?this.g.qm:a.type&2097152||b.type&4194304?this.g.bc:a.Vc&&b.Vc?this.g.Ua:!a.wa&&b.wa?this.g.jm:a.wa&&b.wa||!a.wa&&b.ue||a.ue?this.g.Ua:this.g.tb};
g.Ik=function(a,b){if(b.type&8)return a.Ca+b.height/2;if(a.type&4194304)return a=a.Ca+a.height-a.kf,b.type&4096?a+b.height/2:a-b.height/2;if(a.type&2097152)return b.type&2?a.vc-b.height/2:a.vc+b.height/2;var c=a.Ca;b.type&1||b.type&4?(c+=b.height/2,(a.Hi||a.wa)&&b.height+this.g.dk<=a.height&&(c+=this.g.dk)):c=b.type&256?c+b.height/2:c+a.height/2;return c};
g.Oh=function(){if(this.xe){for(var a=0,b=null,c=this.rows.length-1,d;d=this.rows[c];c--)d.dj=a,d.type&8388608&&(d.wa&&Fj(this,d),b&&b.wa&&d.width<b.width?d.dj=b.width:a=d.width,b=d);for(c=a=0;d=this.rows[c];c++)d.wa?a=this.vf(d):d.type&8?d.width=Math.max(a,d.dj):(a=Math.max(a,d.dj)-d.width,0<a&&Gj(d,a),a=d.width)}else ak.h.Oh.call(this)};g.vf=function(a){return this.xe&&a.wa?this.gd+this.g.Em+this.Ib:ak.h.vf.call(this,a)};
g.Fk=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.Ca=b;d.N=this.Ib;b+=d.height;a=Math.max(a,d.Zb);var e=b-this.za.fe;d==this.aa&&e<this.g.xg&&(e=this.g.xg-e,this.aa.height+=e,b+=e);Hj(this,d)}this.v&&this.U.F&&this.U.F.isConnected()&&(a=Math.max(a,Nf(this.U.F.I()).width-this.g.Ea));this.aa.Lb=b-this.aa.kf;this.Pe=a+this.Ib+this.g.Ea;this.width+=this.g.Ea;this.height=b+this.g.Ea;this.Eh=this.za.vc};function bk(a,b){bk.h.constructor.call(this,a,b);this.lc=new Wj(b)}K(bk,Ij);g=bk.prototype;g.Ob=function(){Jj(this);Kj(this);Lj(this);var a=this.U.ga;a.Cj(this.S+"\n"+this.Xg);var b=this.lc;a.Pd.setAttribute("d",b.C+"\n"+b.Bf);this.G.u&&a.yi();Mj(this)};
g.pi=function(){var a=this.lc,b=this.G.za;a.C+=Q(b.N,a.G.Eh);for(var c=0,d;d=b.elements[c];c++)d.type&32768?a.C+=a.qb.ak:d.type&65536?a.C+=a.lj.Lj(a.Fa):d.type&2048?a.C+=a.Hn.cd:d.type&2?a.C+=a.ao.path(a.Fa):d.type&8&&0!=d.width&&(a.C+=R("H",d.N+d.width-a.hb));a.C+=R("H",b.N+b.width-a.hb);Xj(this.lc,this.G.za);bk.h.pi.call(this)};g.mf=function(a){this.lc.mf(a);bk.h.mf.call(this,a)};
g.ri=function(a){var b=this.lc,c=zj(a);if(b.Fa){var d=a.height-c.ke;b.C+=dj(c.N+c.width-b.hb,a.Ca)+b.Sf.Eb(b.Fa)+R("v",d)}else b.C+=dj(c.N+c.width,a.Ca)+b.Sf.Eb(b.Fa);bk.h.ri.call(this,a)};g.oi=function(a){var b=this.lc,c=zj(a);if(b.Fa){var d=a.height-2*b.we.height;b.C+=dj(c.N,a.Ca)+b.we.oj(b.Fa)+R("v",d)+b.we.oh(b.Fa)+ej(a.width-c.N-b.we.width,0)}else b.C+=dj(c.N,a.Ca+a.height)+b.we.oh(b.Fa)+ej(a.width-c.N-b.we.width,0);bk.h.oi.call(this,a)};
g.Ck=function(a){Xj(this.lc,a);this.S+=R("H",a.N+a.width)+R("V",a.Ca+a.height)};g.li=function(){var a=this.lc,b=this.G.aa;if(a.Fa)a.C+=R("V",b.Lb-a.hb);else{var c=a.G.aa.elements[0];c.type&32768?a.C+=dj(b.N+a.hb,b.Lb-a.hb):c.type&65536&&(a.C+=dj(b.N,b.Lb),a.C+=a.lj.Th())}bk.h.li.call(this)};
g.ni=function(){var a=this.lc,b=a.G.v;b&&(b=b.pb+b.height,a.Fa?a.C+=dj(a.G.Ib,b):(a.C+=dj(a.G.Ib+a.hb,a.G.aa.Lb-a.hb),a.C+=R("V",b)),a.C+=a.Sf.Qf(a.Fa));a.Fa||(b=a.G.za,a.C=b.elements[0].type&65536?a.C+R("V",a.lj.height):a.C+R("V",b.vc+a.hb));bk.h.ni.call(this)};
g.mi=function(a){var b=this.lc,c=b.hb,d=a.N+a.ec,e=a.ge-a.height/2,f=a.width-a.ec,h=e+c;b.Fa?(e=a.height-(a.pb+a.ke)+c,b.Bf+=dj(d-c,h)+R("v",a.pb-c)+b.Sf.Eb(b.Fa)+R("v",e)+R("h",f)):b.Bf+=dj(a.N+a.width+c,h)+R("v",a.height)+R("h",-f)+dj(d,e+a.pb)+b.Sf.Eb(b.Fa);bk.h.mi.call(this,a)};g.Kl=function(a){var b=a.ge-a.height/2;if(a.Wa){var c=a.N+a.ec+this.g.Ea;this.G.u&&(c*=-1);ih(a.Wa,c,b+a.pb+this.g.Ea)}};
g.Ml=function(a){var b=zj(a);if(b.Wa){var c=a.N+a.gd+b.Db;c=this.G.u?-1*c:c+this.g.Ea;ih(b.Wa,c,a.Ca+this.g.Ea)}};g.Jl=function(a){var b=zj(a);if(b.Wa){var c=a.N+a.width+this.g.Ea;this.G.u&&(c*=-1);ih(b.Wa,c,a.Ca)}};g.Ll=function(){var a=this.G.aa;if(a.connection){var b=a.connection,c=b.N;ih(b.Wa,(this.G.u?-c:c)+this.g.Ea/2,a.Lb+this.g.Ea)}};function ck(a){this.le=a;this.OFFSET=.5;this.ak=Q(this.OFFSET,this.OFFSET)}g=ck.prototype;g.na=function(){this.Bm=dk(this);this.Hm=ek(this);this.Mh=this.Xi();this.$d=this.Wi();this.Zd=this.Vi();this.ae=this.Yi()};function dk(a){var b=a.le.ac;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b+a)-a,d=Q(c,c)+fj("0 0,0",b,Y(-c-a,b-c)),e=fj("0 0,0",b+a,Y(b+a,b+a)),f=Q(c,-c)+fj("0 0,0",b+a,Y(b-c,c+a));return{width:b+a,height:b,oj:function(h){return h?d:""},oh:function(h){return h?e:f}}}
function ek(a){var b=a.le.ac;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b-a)+a,d=Q(c,c)+fj("0 0,1",b-a,Y(b-c,-c+a)),e=Q(a,b)+fj("0 0,1",b-a,Y(b,-b+a)),f=-c,h=Q(c,f)+fj("0 0,1",b-a,Y(-c+a,-f-b));return{height:b,Lj:function(k){return k?d:e},Th:function(){return h}}}
g.Xi=function(){var a=this.le.Nh,b=this.le.Xe,c=Q(-2,-b+3.4)+ej(-.45*a,-2.1),d=R("v",2.5)+Q(.97*-a,2.5)+cj("q",[Y(.05*-a,10),Y(.3*a,9.5)])+Q(.67*a,-1.9)+R("v",2.5),e=R("v",-1.5)+Q(-.92*a,-.5)+cj("q",[Y(-.19*a,-5.5),Y(0,-11)])+Q(.92*a,1),f=Q(-5,b-.7)+ej(.46*a,-2.1);return{width:a,height:b,Qf:function(h){return h?c:e},Eb:function(h){return h?d:f}}};g.Wi=function(){return{cd:R("h",this.OFFSET)+this.le.$d.cd}};g.Vi=function(){return{cd:ej(5.1,2.6)+Q(-10.2,6.8)+ej(5.1,2.6),height:12,width:10.2}};
g.Yi=function(){var a=Q(25,-8.7)+cj("c",[Y(29.7,-6.2),Y(57.2,-.5),Y(75,8.7)]),b=cj("c",[Y(17.8,-9.2),Y(45.3,-14.9),Y(75,-8.7)])+dj(100.5,this.le.ae.height+.5);return{path:function(c){return c?a:b}}};function fk(a,b,c){this.ef=c;this.tc=a;this.gg=D(Rb,{"class":"blocklyPathDark",transform:"translate(1,1)"},this.tc);this.ya=D(Rb,{"class":"blocklyPath"},this.tc);this.Pd=D(Rb,{"class":"blocklyPathLight"},this.tc);this.Zh="#000000";this.style=b}K(fk,Tj);g=fk.prototype;g.Cj=function(a){this.ya.setAttribute("d",a);this.gg.setAttribute("d",a)};g.yi=function(){this.ya.setAttribute("transform","scale(-1 1)");this.Pd.setAttribute("transform","scale(-1 1)");this.gg.setAttribute("transform","translate(1,1) scale(-1 1)")};
g.Ga=function(a){this.Pd.style.display="";this.gg.style.display="";this.Pd.setAttribute("stroke",this.style.je);this.gg.setAttribute("fill",this.Zh);fk.h.Ga.call(this,a);this.ya.setAttribute("stroke","none")};g.Ie=function(a){this.style=a;this.Zh=Ia("#000",this.style.od,.2)||this.Zh};g.Yl=function(a){a?(this.ya.setAttribute("filter","url(#"+this.ef.si+")"),this.Pd.style.display="none"):(this.ya.setAttribute("filter","none"),this.Pd.style.display="inline")};
g.Zl=function(a){a&&(this.Pd.style.display="none",this.gg.setAttribute("fill",this.style.Eg),this.ya.setAttribute("stroke","none"),this.ya.setAttribute("fill",this.style.Eg))};g.Mj=function(a){fk.h.Mj.call(this,a);a&&this.ya.setAttribute("stroke","none")};function gk(a){gk.h.constructor.call(this,a);this.qb=null}K(gk,Uj);g=gk.prototype;g.na=function(a,b){gk.h.na.call(this,a,b);this.qb=new ck(this.D());this.qb.na()};g.sj=function(a,b){gk.h.sj.call(this,a,b);this.qb.na()};g.Ui=function(){return new Vj};g.jl=function(a){return new ak(this,a)};g.hl=function(a,b){return new bk(a,b)};g.il=function(a,b){return new fk(a,b,this.D())};q(wa,"geras",gk);(function(){var a={name:"escape",sa:function(b){return!b.options.readOnly},ka:function(){M();return!0}};ti.register(a);U(27,a.name)})();(function(){var a={name:"delete",sa:function(b){return!b.options.readOnly&&P&&lc(P)},ka:function(b,c){c.preventDefault();if(jg())return!1;Di(P);return!0}};ti.register(a);U(46,a.name);U(8,a.name)})();
(function(){var a={name:"copy",sa:function(c){return!c.options.readOnly&&!jg()&&P&&lc(P)&&P.Oa()},ka:function(c,d){d.preventDefault();M();Ei(P);return!0}};ti.register(a);var b=V(67,[17]);U(b,a.name);b=V(67,[18]);U(b,a.name);b=V(67,[91]);U(b,a.name)})();(function(){var a={name:"cut",sa:function(c){return!c.options.readOnly&&!jg()&&P&&lc(P)&&P.Oa()&&!P.i.zd},ka:function(){Ei(P);Di(P);return!0}};ti.register(a);var b=V(88,[17]);U(b,a.name);b=V(88,[18]);U(b,a.name);b=V(88,[91]);U(b,a.name)})();
(function(){var a={name:"paste",sa:function(c){return!c.options.readOnly&&!jg()},ka:function(){return Fi()}};ti.register(a);var b=V(86,[17]);U(b,a.name);b=V(86,[18]);U(b,a.name);b=V(86,[91]);U(b,a.name)})();(function(){var a={name:"undo",sa:function(c){return!c.options.readOnly&&!jg()},ka:function(c){M();df(c,!1);return!0}};ti.register(a);var b=V(90,[17]);U(b,a.name);b=V(90,[18]);U(b,a.name);b=V(90,[91]);U(b,a.name)})();
(function(){var a={name:"redo",sa:function(c){return!jg()&&!c.options.readOnly},ka:function(c){M();df(c,!0);return!0}};ti.register(a);var b=V(90,[16,17]);U(b,a.name);b=V(90,[16,18]);U(b,a.name);b=V(90,[16,91]);U(b,a.name);b=V(89,[17]);U(b,a.name)})();var hk=null,ik=null;function jk(){var a=hk();kk("xml="+encodeURIComponent(a))}var lk=new Map;function kk(a){var b=mk;var c=void 0===c?"POST":c;lk.has("/storage")&&lk.get("/storage").abort();var d=new XMLHttpRequest;lk.set("/storage",d);d.onload=function(){200===this.status?b&&b.call(d):nk(X("Games.httpRequestError",!1)+"\nXHR status: "+d.status);lk.delete("/storage")};d.open(c,"/storage");"POST"===c&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(a)}
function mk(){window.location.hash=this.responseText.trim();nk(X("Games.linkAlert",!1).replace("%1",window.location.href));ik=hk()}function nk(a){if("object"===typeof Z){var b=W("linkButton");Z.ho(b,a)}else alert(a)};var O=null,ok="";function pk(){var a=X("Games.puzzle",!1);Ti(a);if(a=W("linkButton"))Ki?a.style.display="none":(hk=qk,Xi(a,jk));(a=W("languageMenu"))&&a.addEventListener("change",rk,!0)}
function qk(){for(var a=O,b=G("xml"),c=Te(a),d=Object.create(null),e=0;e<c.length;e++){var f=Ac(c[e]);if(f)for(var h=0;h<f.length;h++){var k=f[h],l=k.gb();l&&(d[l]=k)}}c=[];for(l in d)c.push(d[l]);d=G("variables");for(l=0;e=c[l];l++)f=G("variable"),f.appendChild(document.createTextNode(e.name)),e.type&&f.setAttribute("type",e.type),f.id=e.gb(),d.appendChild(f);d.hasChildNodes()&&b.appendChild(d);l=[].concat(a.Gh);1<l.length&&(a.qc.offset=Math.sin(3*Math.PI/180),a.u&&(a.qc.offset*=-1),l.sort(a.qc));
for(d=0;c=l[d];d++)b.appendChild(c.ap(!0));a=a.$a(!0);for(d=0;l=a[d];d++)b.appendChild(hc(l,!0));1===O.$a(!1).length&&b.querySelector&&(a=b.querySelector("block"))&&(a.removeAttribute("x"),a.removeAttribute("y"));return mc(b)}function sk(){null!==ik&&ik!==qk()&&(window.location.hash="",ik=null)}function tk(){var a={rtl:Ji,scrollbars:!1,trashcan:!1},b=W("toolbox");b&&(a.toolbox=b);a.media="third-party/blockly/media/";a.oneBasedIndex=!1;O=ei("blockly",a);O.Ec.push(sk)}
function uk(){window.location=(Ki?"index.html":"./")+"?lang="+Hi}function rk(){window.sessionStorage&&(window.sessionStorage.fl=qk());var a=W("languageMenu");a=encodeURIComponent(a.options[a.selectedIndex].value);var b=window.location.search;b=1>=b.length?"?lang="+a:/[?&]lang=[^&]*/.test(b)?b.replace(/([?&]lang=)[^&]*/,"$1"+a):b.replace(/\?/,"?lang="+a+"&");window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+b};var Z={Dc:!1,yk:null,Jg:null,Kg:null,Mg:null,Lg:null,Bh:function(a,b,c,d,e,f){function h(){if(Z.Dc){m.style.visibility="visible";m.style.zIndex=10;n.style.visibility="hidden";var v=a.getElementsByClassName("primary");v.length||(v=a.getElementsByClassName("secondary"),v.length||(v=a.getElementsByTagName("button")));v.length&&v[0].focus()}}if(!a)throw TypeError("Content not found: "+a);for(var k=a.getElementsByClassName("addHideHandler"),l;l=k[0];)l.addEventListener("click",Z.Vg,!0),l.addEventListener("touchend",
Z.Vg,!0),l.classList.remove("addHideHandler");Z.Dc&&Z.Vg(!1);md&&M(!0);Z.Dc=!0;Z.yk=b;Z.Jg=f;var m=W("dialog");f=W("dialogShadow");var n=W("dialogBorder"),u;for(u in e)m.style[u]=e[u];d&&(f.style.visibility="visible",f.style.opacity=.3,f.style.zIndex=9,d=document.createElement("div"),d.id="dialogHeader",m.appendChild(d),Z.Kg=Nc(d,"mousedown",Z.cn));m.appendChild(a);a.classList.remove("dialogHiddenContent");try{b.blur()}catch(v){}c&&b?(Z.gh(b,!1,.2),Z.gh(m,!0,.8),setTimeout(h,175)):h()},zk:0,Ak:0,
cn:function(a){Z.ei();if(!mb(a)){var b=W("dialog");Z.zk=b.offsetLeft-a.clientX;Z.Ak=b.offsetTop-a.clientY;Z.Mg=Nc(document,"mouseup",Z.ei);Z.Lg=Nc(document,"mousemove",Z.dn);a.stopPropagation()}},dn:function(a){var b=W("dialog"),c=Z.zk+a.clientX;a=Z.Ak+a.clientY;a=Math.max(a,0);a=Math.min(a,window.innerHeight-b.offsetHeight);c=Math.max(c,0);c=Math.min(c,window.innerWidth-b.offsetWidth);b.style.left=c+"px";b.style.top=a+"px"},ei:function(){Z.Mg&&(I(Z.Mg),Z.Mg=null);Z.Lg&&(I(Z.Lg),Z.Lg=null)},Vg:function(a){function b(){d.style.zIndex=
-1;d.style.visibility="hidden";W("dialogBorder").style.visibility="hidden"}a=void 0===a?!0:a;if(Z.Dc){Z.ei();Z.Kg&&(I(Z.Kg),Z.Kg=null);Z.Dc=!1;Z.Jg&&Z.Jg();Z.Jg=null;var c=a?Z.yk:null;a=W("dialog");var d=W("dialogShadow");d.style.opacity=0;c&&a?(Z.gh(a,!1,.8),Z.gh(c,!0,.2),setTimeout(b,175)):b();a.style.visibility="hidden";a.style.zIndex=-1;for((c=W("dialogHeader"))&&c.parentNode.removeChild(c);a.firstChild;)c=a.firstChild,c.classList.add("dialogHiddenContent"),document.body.appendChild(c)}},gh:function(a,
b,c){function d(){e.style.width=f.width+"px";e.style.height=f.height+"px";e.style.left=f.x+"px";e.style.top=f.y+"px";e.style.opacity=c}if(a){var e=W("dialogBorder"),f=Z.getBBox(a);b?(e.className="dialogAnimate",setTimeout(d,1)):(e.className="",d());e.style.visibility="visible"}},getBBox:function(a){var b=Wa(a);b={x:b.x,y:b.y};a.getBBox?(a=a.getBBox(),b.height=a.height,b.width=a.width):(b.height=a.offsetHeight,b.width=a.offsetWidth);return b},ho:function(a,b){var c=W("containerStorage");c.textContent=
"";b=ba(b.split("\n"));for(var d=b.next();!d.done;d=b.next()){var e=document.createElement("p");e.appendChild(document.createTextNode(d.value));c.appendChild(e)}c=W("dialogStorage");Z.Bh(c,a,!0,!0,{width:"50%",left:"25%",top:"5em"},Z.Ij);Z.Hj()},Sm:function(){if(!Ui(Mi))if(Z.Dc||O.zb())setTimeout(Z.Sm,15E3);else{var a=W("dialogAbort"),b=W("abortOk");b.addEventListener("click",uk,!0);b.addEventListener("touchend",uk,!0);Z.Bh(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},function(){document.body.removeEventListener("keydown",
Z.fk,!0)});document.body.addEventListener("keydown",Z.fk,!0)}},di:function(a){!Z.Dc||13!==a.keyCode&&27!==a.keyCode&&32!==a.keyCode||(Z.Vg(!0),a.stopPropagation(),a.preventDefault())},Hj:function(){document.body.addEventListener("keydown",Z.di,!0)},Ij:function(){document.body.removeEventListener("keydown",Z.di,!0)},fk:function(a){Z.di(a);13!==a.keyCode&&32!==a.keyCode||uk()}};window.BlocklyDialogs=Z;
function vk(){return[{name:X("Puzzle.animal1",!1),ph:"duck.jpg",qh:70,rh:100,eh:2,lg:[X("Puzzle.animal1Trait1",!1),X("Puzzle.animal1Trait2",!1)],Tb:X("Puzzle.animal1HelpUrl",!1)},{name:X("Puzzle.animal2",!1),ph:"cat.jpg",qh:70,rh:100,eh:4,lg:[X("Puzzle.animal2Trait1",!1),X("Puzzle.animal2Trait2",!1)],Tb:X("Puzzle.animal2HelpUrl",!1)},{name:X("Puzzle.animal3",!1),ph:"bee.jpg",qh:70,rh:100,eh:6,lg:[X("Puzzle.animal3Trait1",!1),X("Puzzle.animal3Trait2",!1)],Tb:X("Puzzle.animal3HelpUrl",!1)},{name:X("Puzzle.animal4",
!1),ph:"snail.jpg",qh:70,rh:100,eh:0,lg:[X("Puzzle.animal4Trait1",!1),X("Puzzle.animal4Trait2",!1)],Tb:X("Puzzle.animal4HelpUrl",!1)}]};function wk(){return'\n<div class="farSide" style="padding: 1ex 3ex 0">\n  <button class="secondary addHideHandler">'+Yi(t.DIALOG_OK)+"</button>\n</div>\n"};function xk(){var a={lang:Hi,xn:Ki},b=X("Games.puzzle",!0),c='<button id="checkButton" class="primary">'+X("Puzzle.checkAnswers",!0)+"</button>";var d='\n&nbsp;\n<button id="helpButton">'+X("Games.help",!0)+"</button>\n";c&&(c=" &nbsp; "+c);b='\n<span id="title">\n  <a href="'+(a.xn?"index.html":"./")+"?lang="+a.lang+'">'+X("Games.name",!0)+"</a> : "+b+"\n</span>\n";if(a.level){for(var e=" &nbsp ",f=1;f<=a.En;f++){var h="?lang="+a.lang+"&level="+f;e+=" ";e=f===a.level?e+('<span class="level_number level_done" id="level'+
f+'">'+f+"</span>"):f===a.En?e+('<a class="level_number" id="level'+f+'" href="'+h+'">'+f+"</a>"):e+('<a class="level_dot" id="level'+f+'" href="'+h+'"></a>')}a=e}else a="";return'\n\n<table width="100%">\n  <tr>\n    <td>\n      <h1>\n        '+(b+"\n        "+a+'\n      </h1>\n    </td>\n    <td id="header_cta" class="farSide">\n      <select id="languageMenu"></select>\n      \n      '+d+"\n      "+c+'\n    </td>\n  </tr>\n</table>\n\n\n<div id="blockly"></div>\n\n\n<div id="dialogShadow" class="dialogAnimate"></div>\n<div id="dialogBorder"></div>\n<div id="dialog"></div>\n\n<div id="help" class="dialogHiddenContent">\n  <div style="padding-bottom: 0.7ex">')+
X("Puzzle.helpText",!0)+'</div>\n  <div id="sample" class="readonly"></div>\n  '+wk()+'\n</div>\n<div id="answers" class="dialogHiddenContent">\n  <div id="answerMessage">\n  </div>\n  <div id="graph"><div id="graphValue"></div></div>\n  '+wk()+"\n</div>\n"};function yk(a,b,c){"function"!=typeof a&&(zk(a),a=JSON.parse(JSON.stringify(a)));this.Ae=a;this.Jj=this.qj=this.Qg=null;a=this.Ae;if(Array.isArray(a)){for(var d=!1,e=0;e<a.length;e++){var f=a[e][0];"string"==typeof f?a[e][0]=ob(f):(null!=f.alt&&(a[e][0].alt=ob(f.alt)),d=!0)}if(!(d||2>a.length)){f=[];for(e=0;e<a.length;e++)f.push(a[e][0]);var h=Oa(f);e=Pa(f,h);d=Qa(f,h);if((e||d)&&!(h<=e+d)){e&&(this.qj=f[0].substring(0,e-1));d&&(this.Jj=f[0].substr(1-d));f=[];for(h=0;h<a.length;h++){var k=a[h][0],
l=a[h][1];k=k.substring(e,k.length-d);f[h]=[k,l]}this.Ae=f}}}this.Fe=Ak(this,!1)[0];yk.h.constructor.call(this,this.Fe[1],b,c);this.Le=this.md=this.ab=this.bb=this.Vf=null}K(yk,wg);yk.L=function(a){return new yk(a.options,void 0,a)};yk.prototype.zi=function(a){"function"==typeof this.Ae&&Ak(this,!1);vd(this,a.textContent)};yk.prototype.Zj=!0;var Bk=ab?"\u25bc":"\u25be";g=yk.prototype;g.mm="default";
g.Wg=function(){!this.D().Tj||this.D().Tj&&!this.o.R?zg(this):this.qk=this.o.P();Ag(this);this.ab=D(Pb,{},this.fb);this.D().xm?(this.Le=D(Pb,{height:this.D().Se+"px",width:this.D().Se+"px"},this.fb),this.Le.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.D().ym)):(this.md=D(Wb,{},this.Sa),this.md.appendChild(document.createTextNode(this.o.u?Bk+" ":" "+Bk)),this.o.u?this.Sa.insertBefore(this.md,this.Qd):this.Sa.appendChild(this.md));this.ua&&E(this.ua,"blocklyDropdownRect")};
g.Ch=function(a){var b=new Sg;b.Yf("listbox");this.bb=b;var c=Ak(this,!1);this.Vf=null;for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if("object"==typeof e){var h=new Image(e.width,e.height);h.src=e.src;h.alt=e.alt||"";e=h}e=new Wg(e,f);e.Yf("option");e.xj=this.o.u;e.Wh=!0;b.Vb.push(e);e.Xh=f==this.kb;f==this.kb&&(this.Vf=e);Xg(e,this.pn,this)}this.bb.kj=a&&"number"===typeof a.clientX?new w(a.clientX,a.clientY):null;this.bb.V(Xc);E(this.bb.Ia,"blocklyDropdownMenu");this.D().wm&&(a=this.o.R?this.o.getParent().Bi():
this.o.Bi(),b=this.o.R?this.o.getParent().style.je:this.o.style.je,Wc.style.backgroundColor=a,Wc.style.borderColor=b);a=this.fn.bind(this);this.ua?(f=this.ua.getBoundingClientRect(),c=Wa(this.ua),d=f.width,f=f.height):(f=Nf(this.o),b=this.o.i.scale,c=Wa(yg(this)),d=f.width*b,f=f.height*b,$a?(c.x+=1.5*b,c.y+=1.5*b):Ya||Xa||(c.x-=.5*b,c.y-=.5*b),d+=1*b,f+=1*b);b=new Na(c.y,c.y+f,c.x,c.x+d);d=new Na(b.top,b.bottom,b.left,b.right);b=d.left+(d.right-d.left)/2;c=d.bottom;d=d.top;f=this.A();for(e=f.i;e.options.ib;)e=
e.options.ib;Zc=L(e).parentNode;f=f.u;$c=this;bd=a||null;a=Wc;a.style.direction=f?"rtl":"ltr";f=md;cd=f.oa.Qb();dd=f.Ac().Qb();E(a,cd);E(a,dd);a=Wa(Zc);f=Ua(Zc);a={left:a.x,right:a.x+f.width,top:a.y,bottom:a.y+f.height,width:f.width,height:f.height};f=Ua(Wc);c+f.height<a.bottom?a=gd(b,c,a,f):d-f.height>a.top?a=id(b,d,a,f):c+f.height<document.documentElement.clientHeight?a=gd(b,c,a,f):d-f.height>document.documentElement.clientTop?a=id(b,d,a,f):(a=hd(b,a.left,a.right,f.width),a={Li:a.pe,Mi:0,wi:a.pe,
xi:0,Ph:null,ee:null,Rh:null,Qh:!1});d=a;d.Qh?(Yc.style.display="",Yc.style.transform="translate("+d.ee+"px,"+d.Rh+"px) rotate(45deg)",Yc.setAttribute("class",d.Ph?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Yc.style.display="none";a=Math.floor(d.Li);b=Math.floor(d.Mi);c=Math.floor(d.wi);d=Math.floor(d.xi);f=Wc;f.style.left=a+"px";f.style.top=b+"px";f.style.display="block";f.style.opacity=1;f.style.transform="translate("+(c-a)+"px,"+(d-b)+"px)";this.bb.focus();
this.Vf&&this.bb.Kc(this.Vf);this.Ga()};g.fn=function(){this.bb&&this.bb.m();this.Vf=this.bb=null;this.Ga()};g.pn=function(a){$c===this&&kd();vd(this,a.kb)};function Ak(a,b){return"function"==typeof a.Ae?(a.Qg&&b||(a.Qg=a.Ae.call(a),zk(a.Qg)),a.Qg):a.Ae}g.Ng=function(a){for(var b=!1,c=Ak(this,!0),d=0,e;e=c[d];d++)if(e[1]==a){b=!0;break}return b?a:(this.o&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.o.type+", Field name: "+this.name+", Value: "+a),null)};
g.lf=function(a){yk.h.lf.call(this,a);a=Ak(this,!0);for(var b=0,c;c=a[b];b++)c[1]==this.kb&&(this.Fe=c)};g.Ga=function(){this.ua&&(this.ua.setAttribute("stroke",this.o.style.je),this.bb?this.ua.setAttribute("fill",this.o.style.je):this.ua.setAttribute("fill","transparent"));this.o&&this.md&&(this.md.style.fill=this.o.R?this.o.style.Eg:this.o.style.od)};
g.vj=function(){this.Qd.nodeValue="";this.ab.style.display="none";var a=this.Fe&&this.Fe[0];if(a&&"object"==typeof a){this.ab.style.display="";this.ab.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);this.ab.setAttribute("height",a.height);this.ab.setAttribute("width",a.width);var b=Number(a.height);a=Number(a.width);var c=!!this.ua,d=Math.max(c?this.D().Sj:0,b+10);c=c?this.D().Re:0;if(this.Le)var e=Ck(this,a+c,d/2-this.D().Se/2);else{e=this.D().Te;var f=this.D().Yd,h=this.D().Xd;
e=gc(this.md,e+"pt",f,h)}this.Ra.width=a+e+2*c;this.Ra.height=d;f=0;this.o.u?this.ab.setAttribute("x",c+e):(f=a+e,this.Sa.setAttribute("text-anchor","end"),this.ab.setAttribute("x",c));this.ab.setAttribute("y",d/2-b/2);Cg(this,f+c,a+e)}else this.Qd.nodeValue=Bg(this),E(this.Sa,"blocklyDropdownText"),this.Sa.setAttribute("text-anchor","start"),a=!!this.ua,b=Math.max(a?this.D().Sj:0,this.D().vg),d=this.D().Te,c=this.D().Yd,e=this.D().Xd,d=gc(this.Sa,d+"pt",c,e),a=a?this.D().Re:0,c=0,this.Le&&(c=Ck(this,
d+a,b/2-this.D().Se/2)),this.Ra.width=d+c+2*a,this.Ra.height=b,Cg(this,a,d);Dg(this)};function Ck(a,b,c){if(!a.Le)return 0;var d=a.ua?a.D().Re:0,e=a.D().zm,f=a.D().Se;a.Le.setAttribute("transform","translate("+(a.o.u?d:b+e)+","+c+")");return f+e}g.Ei=function(){if(!this.Fe)return null;var a=this.Fe[0];return"object"==typeof a?a.alt:a};
function zk(a){if(!Array.isArray(a))throw TypeError("FieldDropdown options must be an array.");if(!a.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var b=!1,c=0;c<a.length;++c){var d=a[c];Array.isArray(d)?"string"!=typeof d[1]?(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&"string"!=typeof d[0]&&"string"!=typeof d[0].src&&(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must have a string label or image description. Found"+
d[0]+" in: ",d)):(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must be an array. Found: ",d))}if(b)throw TypeError("Found invalid FieldDropdown options.");}q(va,"field_dropdown",yk);function Dk(a,b,c,d,e,f,h){if(!a)throw Error("Src value of an image field is required");a=ob(a);c=Number(ob(c));b=Number(ob(b));if(isNaN(c)||isNaN(b))throw Error("Height and width values of an image field must cast to numbers.");if(0>=c||0>=b)throw Error("Height and width values of an image field must be greater than 0.");this.sf=!1;this.zg="";Dk.h.constructor.call(this,a,null,h);h||(this.sf=!!f,this.zg=ob(d)||"");this.Ra=new Ta(b,c+Ek);this.An=c;this.xc=null;"function"==typeof e&&(this.xc=e);this.ab=
null}K(Dk,wg);Dk.prototype.Jh="";Dk.L=function(a){return new Dk(a.src,a.width,a.height,void 0,void 0,void 0,a)};var Ek=1;g=Dk.prototype;g.Qe=!1;g.Xc=!1;g.bf=function(a){Dk.h.bf.call(this,a);this.sf=!!a.flipRtl;this.zg=ob(a.alt)||""};g.Wg=function(){this.ab=D(Pb,{height:this.An+"px",width:this.Ra.width+"px",alt:this.zg},this.fb);this.ab.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.kb);this.xc&&(this.ab.style.cursor="pointer")};g.$l=function(){};
g.Ng=function(a){return"string"!=typeof a?null:a};g.lf=function(a){this.kb=a;this.ab&&this.ab.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",String(this.kb))};g.Jk=function(){return this.sf};g.Ch=function(){this.xc&&this.xc(this)};g.Ei=function(){return this.zg};q(va,"field_image",Dk);function Fk(){for(var a=vk(),b=[[X("Puzzle.legsChoose",!1),"0"]],c=0;c<a.length;c++)b[c+1]=["\u00a0\u00a0"+a[c].eh+"\u00a0\u00a0",String(c+1)];b.sort(function(d,e){return d[0]-e[0]});return b}
sf.animal={na:function(){this.Ge(120);Kg(this.uc(5,""),"","NAME");var a=this.uc(1,"PIC");Kg(Og(a),X("Puzzle.picture",!1));Kg(Kg(Og(this.uc(5,"")),X("Puzzle.legs",!1)),new yk(Fk),"LEGS");a=this.uc(3,"TRAITS");Kg(a,X("Puzzle.traits",!1));this.Od(!1)},Hc:function(){var a=document.createElement("mutation");a.setAttribute("animal",this.ub);return a},Tc:function(a){this.Jd(parseInt(a.getAttribute("animal")))},ub:0,Jd:function(a){var b=vk();this.ub=a;Qg(this,b[a-1].name);this.Tb=b[a-1].Tb},Qi:function(){return Number(We(this,
"LEGS"))===this.ub}};sf.picture={na:function(){this.Ge(30);this.uc(5,"PIC");this.Bj(!0);this.ag("")},Hc:sf.animal.Hc,Tc:sf.animal.Tc,ub:0,Jd:function(a){this.ub=a;var b=vk();Kg(zc(this,"PIC"),new Dk("puzzle/"+b[a-1].ph,b[a-1].rh,b[a-1].qh))},Qi:function(){var a=this.getParent();return a&&a.ub===this.ub}};
sf.trait={na:function(){this.Ge(290);Kg(this.uc(5,""),"","NAME");this.Dj(!0);this.Aj(!0)},Hc:function(){var a=document.createElement("mutation");a.setAttribute("animal",this.ub);a.setAttribute("trait",this.Xl);return a},Tc:function(a){this.Jd(parseInt(a.getAttribute("animal")),parseInt(a.getAttribute("trait")))},ub:0,Xl:0,Jd:function(a,b){this.ub=a;this.Xl=b;var c=vk();Qg(this,c[a-1].lg[b-1])},Qi:function(){var a=Pg(this);return a&&a.ub===this.ub}};var Wi="puzzle";function Gk(a){for(var b=a.length-1;0<b;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c];a[c]=d}}
function Hk(){for(var a=Te(O),b=0,c=[],d=ba(a),e=d.next();!e.done;e=d.next())e=e.value,e.Qi()||(b++,e.select(),c.push(e));var f=W("graphValue");setTimeout(function(){f.style.width=100*(a.length-b)/a.length+"px"},500);1===b?e=[X("Puzzle.error1",!1),X("Puzzle.tryAgain",!1)]:b?e=[X("Puzzle.error2",!1).replace("%1",b),X("Puzzle.tryAgain",!1)]:(e=[X("Puzzle.error0",!1).replace("%1",a.length)],ok=qk(),window.localStorage&&(window.localStorage[Wi+Mi]=ok));d=W("answerMessage");d.textContent="";e=ba(e);for(var h=
e.next();!h.done;h=e.next()){var k=document.createElement("div");k.appendChild(document.createTextNode(h.value));d.appendChild(k)}d=W("answers");e=W("checkButton");Z.Bh(d,e,!0,!0,{width:"25%",left:Ji?"5%":"70%",top:"5em"},b?Z.Ij:uk);Z.Hj();if(c.length){Gk(c);var l=c[0],m=function(){l.select();Z.Dc&&(setTimeout(function(){cg(l)},150),setTimeout(m,300))};m()}else setTimeout(Ik,2E3),P&&cg(P)}
function Ik(){O.cc.play("win",.5);O.options.Ja.fc=!0;for(var a=O.$a(!1),b=0;b<a.length;b++)Jk(a[b],b/a.length*360)}
function Jk(a,b){if(Z.Dc){var c=O.jc(),d=c.Ta/2,e=c.Ma/2,f=Nf(a);c=a.ea();Ji&&(c.x-=f.width);var h=Math.max(175,Math.min(d,e)-Math.max(f.height,f.width)/2),k=Date.now(),l=b+k/50%360;h*=Math.sin(k%5E3/5E3*2*Math.PI)/8+.875;e=h*Math.cos(l*Math.PI/180)+e-f.width/2;f=h*Math.sin(l*Math.PI/180)+d-f.height/2;5>Math.sqrt(Math.pow(e-c.x,2)+Math.pow(f-c.y,2))?(d=e-c.x,c=f-c.y):(c=180*Math.atan2(f-c.y,e-c.x)/Math.PI,c%=360,0>c&&(c+=360),d=Math.round(5*Math.cos(c*Math.PI/180)),c=Math.round(5*Math.sin(c*Math.PI/
180)));a.moveBy(d,c);setTimeout(Jk,50,a,b)}}
function Kk(a){var b='<xml>;<block type="animal" x="5" y="5">;<mutation animal="1"></mutation>;<title name="LEGS">1</title>;<value name="PIC">;<block type="picture">;<mutation animal="1"></mutation>;</block>;</value>;<statement name="TRAITS">;<block type="trait">;<mutation animal="1" trait="2"></mutation>;<next>;<block type="trait">;<mutation animal="1" trait="1"></mutation>;</block>;</next>;</block>;</statement>;</block>;</xml>'.split(";"),c=W("sample");c.firstChild||(c=ei(c,{rtl:Ji,readOnly:!0}),
"string"!==typeof b&&(b=b.join("")),oc(nc(b),c));b=W("help");c=W("helpButton");Z.Bh(b,c,a,!0,{width:"50%",left:"25%",top:"5em"},Z.Ij);Z.Hj()}
(function(a){function b(){window.BlocklyGamesMsg?(window.BlocklyMsg&&(t=window.BlocklyMsg),a()):setTimeout(b,99)}window.addEventListener("load",b)})(function(){function a(){b.style.width=window.innerWidth-20+"px";b.style.height=window.innerHeight-b.offsetTop-15+"px"}document.body.innerHTML=xk();pk();var b=W("blockly");a(null);window.addEventListener("resize",a);tk();var c=Ui(Mi);try{var d=window.sessionStorage.fl}catch(n){d=null}if(d)delete window.sessionStorage.fl,d=nc(d),oc(d,O);else if(c)d=nc(c),
oc(d,O);else{d=[];for(var e=[],f=[],h=vk(),k=0;k<h.length;k++){var l=O.Ce("animal");l.Jd(k+1);d.push(l);l=O.Ce("picture");l.Jd(k+1);e.push(l);for(l=0;l<h[k].lg.length;l++){var m=O.Ce("trait");m.Jd(k+1,l+1);f.push(m)}}Gk(d);Gk(e);Gk(f);e=[].concat(d,e,f);Ji&&e.reverse();d=ba(e);for(k=d.next();!k.done;k=d.next())f=k.value,f.ci=!1,f.ve(),f.V();d=0;f=ba(e);for(k=f.next();!k.done;k=f.next())h=k.value,k=h.P().getBBox(),h.xo=k.width,h.wo=k.height,h.mk=k.width*k.height,d+=h.mk;ii(O);f=Hh(O);f.width-=50;f.height-=
50;h=0;e=ba(e);for(k=e.next();!k.done;k=e.next())k=k.value,l=k.P().getBBox(),m=void 0,m=Ji?l.width+h/d*f.width:h/d*(f.width-l.width),m=Math.round(m+50*Math.random()),k.moveBy(m,Math.round(Math.random()*(f.height-l.height))),h+=k.mk}ef();Xi("checkButton",Hk);Xi("helpButton",function(){Kk(!0)});c||Kk(!1);oa=na*=2;O.cc.load(["puzzle/win.mp3","puzzle/win.ogg"],"win")});
